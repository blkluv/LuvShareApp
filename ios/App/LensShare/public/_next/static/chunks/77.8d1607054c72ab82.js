(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77,3463],{13027:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return et}});var r=s(85893),n=s(92882),a=s(67294),l=s(68980),o=s(37887),i=s(86501),d=s(5649),c=s(31618),u=s(11163),m=s.n(u),h=s(41664),g=s.n(h),v=s(30052),x=s(23286),f=s(21273),p=s(47516),w=s(33962),b=s(22257);let j=e=>{let{hideDropdown:t=!1}=e,{push:s,pathname:n,query:o}=(0,u.useRouter)(),[i,d]=(0,a.useState)(""),c=(0,a.useRef)(null),[m,{data:h,loading:v}]=(0,f.mp)(),x=e=>{let s=e.target.value;d(s),"/search"===n||t||m({variables:{request:{type:l.qkC.Profile,query:s,limit:8}}})},j=e=>{e.preventDefault(),"/search"===n?s("/search?q=".concat(i,"&type=").concat(o.type)):s("/search?q=".concat(i,"&type=profiles")),d(""),console.log(i)},y=null==h?void 0:h.search,M=y&&y.hasOwnProperty("items"),N=M?y.items:[];return(0,r.jsxs)("div",{className:"relative hidden items-center md:hidden",children:[(0,r.jsxs)("form",{className:"absolute -left-20 top-10 max-w-md md:static",onSubmit:j,children:[(0,r.jsx)("input",{className:"justify-content md:text-md w-[300px] rounded-full border-2 border-gray-100 bg-primary p-3 font-medium focus:border-2 focus:border-gray-300 focus:outline-none md:top-0 md:w-[350px]",placeholder:"Search accounts and videos",value:i,onChange:x}),(0,r.jsx)("button",{className:"absolute right-6 top-4 border-l-2 border-gray-300 pl-4 text-2xl text-gray-400 md:right-5",children:(0,r.jsx)(p.Goc,{})})]}),"/search"!==n&&!t&&i.length>0&&(0,r.jsx)("div",{className:"absolute z-50 mt-2 flex w-[94%] flex-col",ref:c,children:(0,r.jsx)("div",{className:"max-h-[80vh] overflow-y-auto rounded-none border bg-white dark:bg-gray-900/70 py-2",children:v?(0,r.jsxs)("div",{className:"space-y-2 px-4 py-2 text-center text-sm font-bold",children:[(0,r.jsx)(w.$,{size:"sm",className:"mx-auto"}),(0,r.jsx)("div",{children:"Searching..."})]}):(0,r.jsxs)(r.Fragment,{children:[N.map(e=>(0,r.jsx)("div",{className:"p-5",children:(0,r.jsx)(g(),{href:"/u/".concat(null==e?void 0:e.id),children:(0,r.jsxs)("div",{className:"flex cursor-pointer items-center gap-3 rounded p-2 font-semibold hover:bg-primary",children:[(0,r.jsx)("div",{children:(0,r.jsx)("img",{width:40,height:40,className:"cursro-pointer rounded-full",src:(0,b.Z)(e),alt:null==e?void 0:e.handle})}),(0,r.jsx)("div",{className:"hidden lg:block",children:(0,r.jsx)("p",{className:"text-md flex items-center gap-1 font-bold lowercase text-primary",children:null==e?void 0:e.handle})})]})})},null==e?void 0:e.id)),0===N.length&&(0,r.jsx)("div",{children:"No matching Profiles"})]})})})]})};var y=s(7297),M=s(50555);function N(){let e=(0,y.Z)(["\n  cursor: pointer;\n  position: relative;\n  display: inline-block;\n  padding: 10px 20px;\n  color: #ffffff;\n  background: #000;\n  font-size: 13px;\n  font-weight: 400;\n  border-radius: 10rem;\n  box-shadow: 0 4px 20px -6px #1a88f8;\n\n  transition: 200ms ease;\n  &:hover {\n    transform: translateY(-6px);\n    box-shadow: 0 6px 40px -6px #1a88f8;\n  }\n  &:active {\n    transform: translateY(-3px);\n    box-shadow: 0 6px 26px -6px #1a88f8;\n  }\n"]);return N=function(){return e},e}s(5405).ZP.button(N());let k=()=>(0,r.jsx)(M.tn,{});var S=s(45341),C=s(73445),P=s(782);let A=(0,C.Ue)((0,P.tJ)((e,t)=>({notificationCountMap:void 0,setNotificationCount:(s,r)=>{let{notificationCountMap:n}=t();if(!n){e({notificationCountMap:[{profileId:s,count:r}]});return}let a=n.findIndex(e=>e.profileId===s);a>-1?n[a].count=r:n.push({profileId:s,count:r}),e({notificationCountMap:n})},getNotificationCount:e=>{let{notificationCountMap:s}=t();if(!s)return 0;let r=s.findIndex(t=>t.profileId===e);return r>-1?s[r].count:0}}),{name:S.d.NotificationStore}));var I=s(64412);let T=()=>{let e=(0,n.qr)(e=>e.currentProfile),t=A(e=>e.getNotificationCount),s=A(e=>e.setNotificationCount),[o,i]=(0,a.useState)(0),{data:d,loading:c}=(0,l.eT7)({variables:{request:{profileId:null==e?void 0:e.id,customFilters:[l.U9Q.Gardeners]}},skip:!(null==e?void 0:e.id),fetchPolicy:"no-cache"});return(0,a.useEffect)(()=>{var r,n;if(!e||c)return;let a=(null==d?void 0:null===(r=d.notifications)||void 0===r?void 0:null===(n=r.pageInfo)||void 0===n?void 0:n.totalCount)||0,l=t(null==e?void 0:e.id);l?i(a-l):(s(null==e?void 0:e.id,a),i(0))},[d,c]),(0,r.jsxs)(g(),{href:"/notifications",className:"hover:bg-white dark:bg-gray-900/70-300/20 dark:hover:bg-gray-700 flex min-w-[40px] items-start justify-center rounded-md p-1 ",onClick:()=>{var t,r;s(null==e?void 0:e.id,(null==d?void 0:null===(t=d.notifications)||void 0===t?void 0:null===(r=t.pageInfo)||void 0===r?void 0:r.totalCount)||0),i(0)},children:[(0,r.jsx)(I.Z,{className:"h-6 w-6 text-blue-500 sm:h-6 sm:w-6"}),o>0&&(0,r.jsx)("span",{className:"z-[6] h-2 w-2 rounded-full bg-red-500 text-red-500"})]})};var q=s(82010);let B=()=>{var e;let t=(0,n.qr)(e=>e.currentProfile),{id:s}=m().query,l=null==t?void 0:t.picture;console.log("CURRENT PROFILE",null==t?void 0:t.picture);let[o,i]=(0,a.useState)(0),[c,u]=(0,a.useState)(!0),{resolvedTheme:h}=(0,q.F)(),f=()=>{let e=window.scrollY;e>o?u(!1):u(!0),i(e)};return(0,a.useEffect)(()=>(window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f))),(0,r.jsxs)("div",{className:"flex w-full z-10 items-center justify-between  border-2 rounded-t-sm rounded-xl border-b border-t-0 border-l border-r border-blue-700 bg-white/70 dark:bg-gray-900/70  p-2  sticky ".concat(c?"top-0":""," "),children:[(0,r.jsx)(g(),{href:"/discover",children:(0,r.jsx)("button",{className:"text-md text-md flex cursor-pointer items-center gap-2 rounded-full border-[#57B8FF] px-2 py-2 pt-3 font-semibold text-blue-500 hover:bg-[#57B8FF] md:px-4",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),(0,r.jsx)(j,{}),(0,r.jsx)(g(),{href:"/",children:(0,r.jsx)("div",{className:"w-[100px] md:w-[129px]",children:"dark"===h?(0,r.jsx)(v.E,{className:"cursor-pointer",src:"".concat(d.Fv,"/images/Lenstoknewlogo3.png"),alt:"logo"}):(0,r.jsx)(v.E,{className:"cursor-pointer",src:"".concat(d.Fv,"/images/Lenstoknewlogo.png"),alt:"logo"})})}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"centre-item flex gap-5 pl-2 md:gap-10 ",children:[(0,r.jsx)("button",{children:(0,r.jsx)(T,{})}),(0,r.jsx)("div",{className:"flex",children:t?(0,r.jsx)("div",{className:"h-12 w-12",children:(0,r.jsx)(g(),{href:"/u/".concat(t.id),children:(null==l?void 0:l.__typename)==="MediaSet"?(null===(e=l.original)||void 0===e?void 0:e.url.includes("ipfs"))?(0,r.jsx)(v.E,{src:(0,x.A)(null==l?void 0:l.original.url),width:40,height:40,className:"cursor-pointer rounded-full",alt:t.id.handle}):(0,r.jsx)(v.E,{src:null==l?void 0:l.original.url,width:40,height:40,className:"cursor-pointer rounded-full",alt:t.id.handle}):(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-900"})},t.id)}):(0,r.jsx)("div",{className:"block",children:(0,r.jsx)(k,{})})})]})})]})};var F=s(36595),E=s(9507);let L=e=>({style:{padding:"16px",background:"dark"===e?"#ec1e25":"",borderRadius:"100px",boxShadow:"rgba(0, 0, 0, 0.35) 0px 6px 45px",backdropFilter:"blur(3px)",color:"dark"===e?"#fff":"",textShadow:"rgba(17, 17, 17, 0.21) 0px 1px 12px"},success:{className:"!px-3 !bg-green-500 !text-white overflow-hidden",iconTheme:{primary:"#fff",secondary:"#10B981"}},error:{className:"!px-3 !bg-red-500 !text-white overflow-hidden",iconTheme:{primary:"#fff",secondary:"#ec1e25"}},loading:{className:"!px-3 !bg-yellow-500 !text-white overflow-hidden",iconTheme:{primary:"#fff",secondary:"rgba(230, 125, 0, 1)"}},reverseOrder:!1,duration:4e3});var Z=s(9008),z=s.n(Z),D=s(36008),R=s(96806),U=s(64208);let O=()=>{let{reportingPublication:e,showStatusModal:t,setShowStatusModal:s,showProfileSwitchModal:n,setShowProfileSwitchModal:a,showNewModal:o,showAuthModal:i,setShowNewModal:d,setShowAuthModal:c,setShowNewSpacesModal:u}=(0,R.u)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(U.u,{title:"Create post",size:"md",show:o,onClose:()=>{d(!1,l.mnY.Post)},children:(0,r.jsx)(D.Z,{})})})};var G=s(97125),J=s(44080),_=s(92485),W=s(29780);let K=e=>{let{title:t,description:s,show:n,isDestructive:l=!1,isPerformingAction:o=!1,confirmText:i,children:d,onConfirm:c,onClose:u}=e;return(0,r.jsx)(J.u.Root,{show:n,as:a.Fragment,children:(0,r.jsx)(_.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:()=>null==u?void 0:u(),children:(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:block sm:p-0",children:[(0,r.jsx)(J.u.Child,{as:a.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(_.V.Overlay,{className:"fixed inset-0 bg-gray-500/75 transition-opacity "})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,r.jsx)(J.u.Child,{as:a.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,r.jsxs)("div",{className:"inline-block w-full scale-100 space-y-6 rounded-xl bg-white dark:bg-gray-900/70 p-5 text-left align-bottom shadow-xl transition-all sm:max-w-sm sm:align-middle",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("b",{className:"text-xl",children:t}),(0,r.jsx)("p",{children:s})]}),(0,r.jsx)("div",{children:d}),(0,r.jsxs)("div",{className:"space-y-3",children:[c?(0,r.jsx)(W.z,{className:"w-full",size:"lg",variant:l?"danger":"primary",disabled:o,onClick:()=>c(),children:i}):null,(0,r.jsx)(W.z,{className:"w-full",size:"lg",variant:"secondary",outline:!0,onClick:u,children:"Cancel"})]})]})})]})})})};var Q=s(69125);let Y=()=>{let e=(0,G.h)(e=>e.showPublicationDeleteAlert),t=(0,G.h)(e=>e.setShowPublicationDeleteAlert),s=(0,G.h)(e=>e.deletingPublication),[n,{loading:a}]=(0,l.Rvf)({onCompleted:()=>{t(!1,null),i.Am.success("Publication deleted successfully")},update:e=>{e.evict({id:(0,Q.D)(s)})}});return(0,r.jsx)(K,{title:"Delete Publication?",description:"Delete",confirmText:"Delete",show:e,isDestructive:!0,isPerformingAction:a,onConfirm:()=>n({variables:{request:{publicationId:null==s?void 0:s.id}}}),onClose:()=>t(!1,null)})},$=()=>{let e=(0,G.h)(e=>e.showModActionAlert),t=(0,G.h)(e=>e.modingPublication),s=(0,G.h)(e=>e.setShowModActionAlert);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y,{}),t?(0,r.jsx)(K,{show:e,title:"Mod actions",description:"Perform mod actions on this publication.",onClose:()=>s(!1,null)}):null]})};var V=s(29211),H=s(20208),X=s(12317);let ee=e=>{let{children:t}=e,{resolvedTheme:s}=(0,q.F)();(0,n.qr)(e=>e.setUserSigNonce),(0,n.qr)(e=>e.setCurrentProfile);let m=(0,n.qr)(e=>e.currentProfile),h=(0,n.qr)(e=>e.setCurrentProfile),g=(0,n.Fc)(e=>e.profileId),v=(0,n.Fc)(e=>e.setProfileId),{address:x,isDisconnected:f}=(0,c.mA)(),{chain:p}=(0,c.LN)(),[w,b]=(0,a.useState)(!1),{disconnect:j}=(0,c.qL)({onError(e){i.ZP.error(null==e?void 0:e.message)}}),y=(0,X.P)(e=>e.showSpacesLobby),M=(0,X.P)(e=>e.showSpacesWindow),{loading:N}=(0,o.a)(l.$aq,{variables:{request:{ownedBy:[x]}},skip:!g,onCompleted:e=>{var t;let s=null==e?void 0:null===(t=e.profiles)||void 0===t?void 0:t.items;if(!s.length)return k()},onError:()=>{v(null)}}),k=()=>{h(null),v(null)},S=()=>{let e=null==m?void 0:m.ownedBy,t=localStorage.getItem("accessToken")&&localStorage.getItem("refreshToken"),s=(null==p?void 0:p.id)!==d.Kj;(!t||s||f||void 0!==e&&e!==x)&&g&&(h(null),v(null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),null==j||j())},{pathname:C}=(0,u.useRouter)();return((0,a.useEffect)(()=>{S()},[f,x,p,j,g]),(0,a.useEffect)(()=>{b(!0)},[]),N)?(0,r.jsx)(E.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z(),{children:(0,r.jsx)("meta",{name:"theme-color",content:"dark"===s?"#1b1b1d":"#ffffff"})}),(0,r.jsx)(i.x7,{position:"bottom-right",toastOptions:L(s)}),y&&(0,r.jsx)(V.Z,{}),M&&(0,r.jsx)(H.Z,{}),(0,r.jsx)(O,{}),(0,r.jsx)($,{}),(0,r.jsx)("div",{className:"flex min-h-screen flex-col pb-14 md:pb-0",children:C.includes("/feed")?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B,{}),(0,r.jsx)(F.Z,{}),t]})})]})};var et=ee},36595:function(e,t,s){"use strict";s.d(t,{Z:function(){return N}});var r=s(85893),n=s(41664),a=s.n(n),l=s(92882),o=s(67294),i=s(73359),d=s(50319),c=s(76781),u=s(5649),m=s(31618),h=s(86501);let g=()=>{let e=(0,l.qr)(e=>e.setProfiles),t=(0,l.qr)(e=>e.setCurrentProfile),s=(0,l.Fc)(e=>e.setProfileId),[n,a]=(0,o.useState)(!1),{chain:g}=(0,m.LN)(),{switchNetwork:v}=(0,m.g0)(),[x,f]=(0,o.useState)(!1),{address:p,connector:w}=(0,m.mA)(),{connectors:b,error:j,connectAsync:y}=(0,m.$4)(),{signMessageAsync:M,isLoading:N}=(0,m.QW)(),[k,{error:S,loading:C}]=(0,i.t)(c.bT,{fetchPolicy:"no-cache"}),[P,{error:A,loading:I}]=(0,d.D)(c.bs),[T,{error:q,loading:B}]=(0,i.t)(c.$);(0,o.useEffect)(()=>{a(!0)},[]);let F=async()=>{try{var r,n,a,l,o,i,d,c,u;let m=await k({variables:{request:{address:p}}});if(!(null==m?void 0:null===(r=m.data)||void 0===r?void 0:null===(n=r.challenge)||void 0===n?void 0:n.text))return h.ZP.error("ERROR_MESSAGE");let g=await M({message:null==m?void 0:null===(a=m.data)||void 0===a?void 0:null===(l=a.challenge)||void 0===l?void 0:l.text}),v=await P({variables:{request:{address:p,signature:g}}});localStorage.setItem("accessToken",null===(o=v.data)||void 0===o?void 0:o.authenticate.accessToken),localStorage.setItem("refreshToken",null===(i=v.data)||void 0===i?void 0:i.authenticate.refreshToken);let{data:x}=await T({variables:{request:{ownedBy:[p]}}});if((null==x?void 0:null===(d=x.profiles)||void 0===d?void 0:null===(c=d.items)||void 0===c?void 0:c.length)===0)return h.ZP.error("You have no lens profile yet, please create one");{let f=null==x?void 0:null===(u=x.profiles)||void 0===u?void 0:u.items,w=f[0];e(f),t(w),s(w.id)}}catch(b){}};return(null==w?void 0:w.id)?(0,r.jsx)("div",{children:(null==g?void 0:g.id)===u.Kj?(0,r.jsx)("button",{className:"flex-1 text-blue-700",onClick:()=>F(),children:n?"Log In":""}):(0,r.jsx)("button",{className:"flex-1 text-blue-700",onClick:()=>{v?v(u.Kj):h.ZP.error("Please change your network!")},children:"Switch Network"})}):(0,r.jsx)("button",{onClick:()=>{h.ZP.error("Log in to view profile",{duration:1e3})},className:"border-gray-800 text-blue-700 hover:text-gray-600 focus:text-black dark:text-white focus:outline-none",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})};var v=s(93832),x=s(28166),f=s(5434),p=s(14382),w=s(61998),b=s(1257),j=s(10116);let y=()=>{let e=(0,l.qr)(e=>e.currentProfile),t=(0,j.N)(e=>e.clearMessagesBadge),s=(0,j.N)(e=>e.viewedMessagesAtNs),n=(0,j.N)(e=>e.showMessagesBadge),i=(0,j.N)(e=>e.setShowMessagesBadge),{client:d}=(0,p.Z)(!0),c=(e,t)=>{if(!t)return!1;let s=(0,b.nB)(e);return!s||s.getTime()<t.getTime()&&t.getTime()<new Date().getTime()};return(0,o.useEffect)(()=>{let t;if(!d||!e)return;let r=async()=>{let t=await d.conversations.list();if(t.length<=0)return;let r=t.map(e=>e.topic),a=await d.apiClient.batchQuery(r.map(e=>({contentTopic:e,pageSize:1,direction:b.Sr.SORT_DIRECTION_DESCENDING}))),l=a.reduce((e,t)=>{var s,r;return t.length&&(null===(s=t[0])||void 0===s?void 0:s.timestampNs)&&(!e||(null===(r=t[0])||void 0===r?void 0:r.timestampNs)>e)?t[0].timestampNs:e},null),o=(0,b.nB)(null!=l?l:void 0),u=c(s.get(e.id),o);n.set(e.id,u),i(new Map(n))},a=async()=>{t&&await t.return(void 0)},l=t=>!window.location.pathname.startsWith("/messages")&&e.id===t,o=async r=>{for await(let a of t=await d.conversations.streamAllMessages())if(r(e.id)){let l=e.ownedBy!==a.senderAddress;if(l){let o=c(s.get(e.id),a.sent);n.set(e.id,o),i(new Map(n))}}};return r(),o(l),()=>{a()}},[d,null==e?void 0:e.id]),(0,r.jsxs)(a(),{href:"/messages",className:" min-w-[40px] items-start justify-center rounded-md md:flex",onClick:()=>{e&&t(e.id)},children:[(0,r.jsx)(w.Z,{className:"h-6 w-6 pb-1 text-blue-500 "}),n.get(null==e?void 0:e.id)?(0,r.jsx)("span",{className:"z-[6] h-2 w-2 rounded-full bg-red-500 text-red-500"}):null]})},M=()=>{let e=(0,l.qr)(e=>e.currentProfile),[t,s]=(0,o.useState)(!0),[n,i]=(0,o.useState)(0),[d,c]=(0,o.useState)(!0);return(0,r.jsx)("div",{children:(0,r.jsxs)("nav",{className:"z-99 fixed bottom-0 left-0 right-0 z-[5] m-auto flex h-[70px] items-center justify-around overflow-hidden rounded-lg border-2 border-b-0 border-l border-r border-t border-blue-700 bg-white/70 dark:bg-gray-800/70 px-4 py-3 lg:w-[1100px] xl:w-[1200px]",children:[t?(0,r.jsx)(a(),{href:"/",children:(0,r.jsx)("button",{onClick:()=>{s(!1)},className:"border-gray-800 text-blue-500 hover:text-gray-100 focus:text-gray-100 focus:outline-none",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})}):(0,r.jsx)(a(),{href:"/",children:(0,r.jsx)("button",{onClick:()=>{s(!0)},className:"border-gray-800 text-blue-500 hover:text-gray-100 focus:text-gray-100 focus:outline-none",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})}),(0,r.jsx)("div",{children:(0,r.jsxs)(a(),{href:"/feed",children:[(0,r.jsx)(f.dnC,{className:"h-6 w-6 pb-1 text-blue-500"})," "]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(a(),{href:"/latest",children:[(0,r.jsx)(v.Z,{className:"h-6 w-6 pb-1 text-blue-500"})," "]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(a(),{href:"/listen",children:[(0,r.jsx)(x.Z,{className:"h-6 w-6 pb-1 text-blue-500"})," "]})}),(0,r.jsx)("div",{children:(0,r.jsx)(y,{})}),e?(0,r.jsx)(a(),{href:"/u/".concat(e.id),children:(0,r.jsx)("button",{className:"border-gray-800 text-blue-500 hover:text-gray-100 focus:text-gray-100 focus:outline-none",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})},e.id):(0,r.jsx)(g,{})]})})};var N=M},29211:function(e,t,s){"use strict";var r=s(85893);s(67294);var n=s(20208);let a=()=>(0,r.jsx)(n.Z,{});t.Z=a},97125:function(e,t,s){"use strict";s.d(t,{h:function(){return n}});var r=s(73445);let n=(0,r.Ue)(e=>({showPublicationDeleteAlert:!1,deletingPublication:null,forceDeletePublication:!1,setShowPublicationDeleteAlert:(t,s)=>e(()=>({showPublicationDeleteAlert:t,deletingPublication:s})),showModActionAlert:!1,modingPublication:null,setShowModActionAlert:(t,s)=>e(()=>({showModActionAlert:t,modingPublication:s}))}))},10116:function(e,t,s){"use strict";s.d(t,{N:function(){return c},G:function(){return d}});let r=e=>{let t=[...Array.from(new Map(e.map(e=>[e.id,e])).values())];return t.sort((e,t)=>{var s,r,n,a;return(null!==(n=null===(s=t.sent)||void 0===s?void 0:s.getTime())&&void 0!==n?n:0)-(null!==(a=null===(r=e.sent)||void 0===r?void 0:r.getTime())&&void 0!==a?a:0)}),null!=t?t:[]};var n=s(1257),a=s(73445),l=s(782),o=s(45341),i=s(5649);let d=(0,a.Ue)(e=>({client:void 0,setClient:t=>e(()=>({client:t})),conversations:new Map,setConversations:t=>e(()=>({conversations:t})),addConversation:(t,s)=>{e(e=>{let r=new Map(e.conversations);return r.set(t,s),{conversations:r}})},chatProvider:i.N5.PUSH,setChatProvider:t=>e(()=>({chatProvider:t})),queuedMessages:new Map,addQueuedMessage:(t,s)=>{e(e=>{let r=new Map(e.queuedMessages),n=e.queuedMessages.get(t)||[],a=[...n,s];return a.sort((e,t)=>t.sent.getTime()-e.sent.getTime()),r.set(t,a),{queuedMessages:r}})},removeQueuedMessage:(t,s)=>{e(e=>{let r=new Map(e.queuedMessages),n=e.queuedMessages.get(t)||[],a=n.filter(e=>e.id!==s);return r.set(t,a),{queuedMessages:r}})},updateQueuedMessage:(t,s,r)=>{e(e=>{let n=new Map(e.queuedMessages),a=e.queuedMessages.get(t)||[],l=a.filter(e=>e.id!==s);return a.length!==l.length?(l.push(r),l.sort((e,t)=>t.sent.getTime()-e.sent.getTime()),n.set(t,l),{queuedMessages:n}):{queuedMessages:e.queuedMessages}})},messages:new Map,addMessages:(t,s)=>{let n=0;return e(e=>{let a=new Map(e.messages),l=e.messages.get(t)||[],o=r([...l,...s]);return(n=o.length-l.length)?(a.set(t,o),{messages:a}):{messages:e.messages}}),n},hasSyncedMessages:!1,setHasSyncedMessages:t=>e(()=>({hasSyncedMessages:t})),previewMessages:new Map,setPreviewMessages:t=>e(()=>({previewMessages:t})),ensNames:new Map,setEnsNames:t=>e(()=>({ensNames:t})),previewMessagesNonLens:new Map,setPreviewMessagesNonLens:t=>e(()=>({previewMessagesNonLens:t})),selectedProfileId:"",setSelectedProfileId:t=>e(()=>({selectedProfileId:t})),selectedTab:"All",setSelectedTab:t=>e(()=>({selectedTab:t})),syncedProfiles:new Set,addSyncedProfiles:t=>e(e=>{let{syncedProfiles:s}=e;return{syncedProfiles:new Set([...s,...t])}}),unsyncProfile:t=>e(e=>{let{syncedProfiles:s}=e;return{syncedProfiles:new Set([...s].filter(e=>e!==t))}}),reset:()=>e(e=>({...e,conversations:new Map,messages:new Map,messageProfiles:new Map,previewMessages:new Map,selectedTab:"All",previewMessagesNonLens:new Map,ensNames:new Map}))})),c=(0,a.Ue)((0,l.tJ)(e=>({viewedMessagesAtNs:new Map,showMessagesBadge:new Map,setShowMessagesBadge:t=>e(()=>({showMessagesBadge:t})),clearMessagesBadge:t=>{e(e=>{let s=new Map(e.viewedMessagesAtNs);if(s.set(t,(0,n.$)(new Date)),!e.showMessagesBadge.get(t))return{viewedMessagesAtNs:s};let r=new Map(e.showMessagesBadge);return r.set(t,!1),{viewedMessagesAtNs:s,showMessagesBadge:r}})},unsentMessages:new Map,setUnsentMessage:(t,s)=>e(e=>{let r=new Map(e.unsentMessages);return s?r.set(t,s):r.delete(t),{unsentMessages:r}}),setUnsentMessages:t=>e(()=>({unsentMessages:t}))}),{name:o.d.MessageStore,storage:{setItem(e,t){let s=JSON.stringify({...t,state:{...t.state,viewedMessagesAtNs:Array.from(t.state.viewedMessagesAtNs),showMessagesBadge:Array.from(t.state.showMessagesBadge),unsentMessages:Array.from(t.state.unsentMessages)}});localStorage.setItem(e,s)},getItem:e=>{let t=localStorage.getItem(e);if(!t)return null;let s=JSON.parse(t);return s.state.viewedMessagesAtNs=new Map(s.state.viewedMessagesAtNs),s.state.showMessagesBadge=new Map(s.state.showMessagesBadge),s.state.unsentMessages=new Map(s.state.unsentMessages),s},removeItem(e){localStorage.removeItem(e)}}}))},14382:function(e,t,s){"use strict";s.d(t,{T:function(){return f}});var r=s(45341),n=s(5649),a=s(1257),l=s(67294),o=s(92882),i=s(10116),d=s(88559),c=s(52942),u=s(48764).Buffer;let m="binary",h=e=>"xmtp:".concat(n.Jy,":keys:").concat(e),g=e=>{let t=localStorage.getItem(h(e));return t?u.from(t,m):null},v=(e,t)=>{localStorage.setItem(h(e),u.from(t).toString(m))},x=e=>{localStorage.removeItem(h(e))},f=()=>{let{data:e}=(0,c.Z)(),t=(0,i.G)(e=>e.client),s=(0,i.G)(e=>e.setClient),n=(0,l.useCallback)(async()=>{e&&x(await e.getAddress()),t&&s(void 0),localStorage.removeItem(r.d.MessageStore),localStorage.removeItem(r.d.AttachmentCache),localStorage.removeItem(r.d.AttachmentStore)},[e,t]);return n};t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,o.qr)(e=>e.currentProfile),s=(0,i.G)(e=>e.client),r=(0,i.G)(e=>e.setClient),[u,m]=(0,l.useState)(),{data:h,isLoading:x}=(0,c.Z)();return(0,l.useEffect)(()=>{let l=async()=>{if(h&&!s&&t){let l=g(await h.getAddress());if(!l){if(e)return;m(!0),l=await a.KU.getKeys(h,{env:n.Jy,appVersion:n.iC+"/"+n.Ji,persistConversations:!1,skipContactPublishing:!0}),v(await h.getAddress(),l)}let o=await a.KU.create(null,{env:n.Jy,appVersion:n.iC+"/"+n.Ji,privateKeyOverride:l,persistConversations:!0});o.registerCodec(new d.AttachmentCodec),o.registerCodec(new d.RemoteAttachmentCodec),r(o),m(!1)}else m(!1)};l(),h&&t||r(void 0)},[t]),{client:s,loading:x||u}}},95856:function(){}}]);