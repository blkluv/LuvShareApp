(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6550],{84831:function(e,t,l){"use strict";l.d(t,{Z:function(){return q}});var a=l(85893),n=l(86010),s=l(67294),i=l(48113),r=l(5678),o=l(92321),d=l(5649),c=l(92359),u=l(59355),m=l(29780),h=l(86501);let p=(e,t,l)=>{let a=new Image;a.crossOrigin="Anonymous",a.src=e,a.onload=()=>{let e=document.createElement("canvas"),n=e.getContext("2d");e.width=a.width,e.height=a.height,null==n||n.drawImage(a,0,0,a.width,a.height),e.toBlob(e=>{if(e){let a=new File([e],t,{type:e.type});l(a)}})},a.onerror=()=>{l(null)}};var v=l(6154);let x=(e,t)=>{d.M8&&d.Mw&&v.Z.post(d.GA,{source:"web",level:e,message:t}).catch(e=>{console.error(e)})},f={log:(e,t)=>{console.log(e,t)},warn:function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];console.warn(...t)},error:(e,t)=>{x("error","".concat(e," ").concat(JSON.stringify(t))),console.error(e,t)}},g=(e,t)=>new Promise(l=>{let a=document.createElement("video"),n=document.createElement("canvas");a.autoplay=!0,a.muted=!0,a.src=URL.createObjectURL(e),a.onloadedmetadata=()=>{a.currentTime=t},a.oncanplay=()=>{setTimeout(()=>{let e=n.getContext("2d");return n.width=a.videoWidth,n.height=a.videoHeight,null==e||e.drawImage(a,0,0,a.videoWidth,a.videoHeight),l(n.toDataURL("image/png"))},100)}}),b=(e,t)=>new Promise(l=>{try{if(!e.size)return[];let a=document.createElement("video");a.autoplay=!0,a.muted=!0,a.src=URL.createObjectURL(e),a.onloadeddata=async()=>{let n=[],s=Math.floor(a.duration/t);for(let i=0;i<t;i++){let r=s*i,o=await g(e,r);n.push(o)}l(n)}}catch(n){f.error("[Error Generate Video Thumbnails]",n),l([])}});var j=l(33962),w=l(92882);l(9747);var y=l(62641);let N=()=>{let e=(0,s.useMemo)(()=>Array(8).fill(1),[]);return(0,a.jsx)(a.Fragment,{children:e.map((e,t)=>(0,a.jsx)("div",{className:(0,n.Z)("h-32 w-full max-w-[5rem] animate-pulse rounded-lg",0===t&&"min-w-[4rem]"),children:(0,a.jsx)("div",{className:"h-32 rounded-lg bg-gray-300 dark:bg-gray-700"})},"".concat(e,"_").concat(t)))})};var Z=l(7814),k=l(10050);let S=()=>{let[e,t]=(0,s.useState)([]),[l,n]=(0,s.useState)(!1),[o,d]=(0,s.useState)(-1),c=(0,i.l)(e=>e.attachments),u=(0,i.l)(e=>e.videoThumbnail),m=(0,i.l)(e=>e.setVideoThumbnail),{file:v}=c[0],x=async e=>{m({uploading:!0});let t=await (0,y.l)(e);return t.original.url||h.Am.error("Failed to upload thumbnail"),m({url:t.original.url,type:e.type||"image/jpeg",uploading:!1}),t},f=async l=>{var a,n,s;d(l),(null===(a=e[l])||void 0===a?void 0:a.ipfsUrl)===""?(m({uploading:!0}),p(e[l].blobUrl,"thumbnail.jpeg",async a=>{if(!a)return h.Am.error("Please upload a custom thumbnail");let n=await x(a);t(e.map((e,t)=>(t===l&&(e.ipfsUrl=n.original.url),e)))})):m({url:null===(n=e[l])||void 0===n?void 0:n.ipfsUrl,type:(null===(s=e[l])||void 0===s?void 0:s.mimeType)||"image/jpeg",uploading:!1})},g=async e=>{try{let l=await b(e,4),a=[];for(let n of l)a.push({blobUrl:n,ipfsUrl:"",mimeType:"image/jpeg"});t(a),d(0)}catch(s){console.error("Failed to generate thumbnails",s)}};(0,r.rf)(()=>{f(o)},[o]),(0,s.useEffect)(()=>(v&&g(v),()=>{d(-1),t([])}),[v]);let w=async l=>{var a,s;if(null===(a=l.target.files)||void 0===a?void 0:a.length)try{n(!0),d(-1);let i=l.target.files[0],r=await x(i),o=null===(s=window.URL)||void 0===s?void 0:s.createObjectURL(i);t([{blobUrl:o,ipfsUrl:r.original.url,mimeType:i.type||"image/jpeg"},...e]),d(0)}catch(c){console.error("Failed to upload thumbnail",c),h.Am.error("Failed to upload thumbnail")}finally{n(!1)}},S=u.uploading;return(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("b",{children:"Choose Thumbnail"}),(0,a.jsxs)("div",{className:"mt-1 grid grid-cols-3 gap-3 py-0.5 md:grid-cols-5",children:[(0,a.jsxs)("label",{htmlFor:"chooseThumbnail",className:"max-w-32 flex h-24 w-full flex-none cursor-pointer flex-col items-center justify-center rounded-xl border dark:border-gray-700",children:[(0,a.jsx)("input",{id:"chooseThumbnail",type:"file",accept:".png, .jpg, .jpeg",className:"hidden w-full",onChange:w}),l?(0,a.jsx)(j.$,{size:"sm"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"mb-1 h-5 w-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Upload"})]})]}),e.length?null:(0,a.jsx)(N,{}),e.map((e,t)=>{let{blobUrl:l,ipfsUrl:n}=e,s=o===t,i=n===u.url;return(0,a.jsxs)("button",{type:"button",disabled:S,onClick:()=>f(t),className:"relative",children:[(0,a.jsx)("img",{className:"h-24 w-full rounded-xl border object-cover dark:border-gray-700",src:l,alt:"thumbnail",draggable:!1}),n&&s&&i?(0,a.jsx)("div",{className:"absolute inset-0 grid place-items-center rounded-xl bg-gray-100/10",children:(0,a.jsx)(k.Z,{className:"h-6 w-6 text-green-500"})}):null,S&&s&&(0,a.jsx)("div",{className:"absolute inset-0 grid place-items-center rounded-xl bg-gray-100/10 backdrop-blur-md",children:(0,a.jsx)(j.$,{size:"sm"})})]},"".concat(l,"_").concat(t))})]})]})};var C=l(45706),T=l(44762),P=l(30052),_=l(23),A=l(5362);l(44753);var I=l(23286);let M=e=>{var t,l,a;return(0,I.A)(null===(t=null==e?void 0:null===(l=e.metadata)||void 0===l?void 0:l.media[0])||void 0===t?void 0:null===(a=t.original)||void 0===a?void 0:a.url)};var R=l(11163),F=l(21192),U=l(6528),O=l(38624);let E=e=>{let{publication:t}=e,l=(0,w.qr)(e=>e.videoWatchTime),[n,i]=(0,s.useState)(!1),[r,o]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)(""),v=(0,s.useRef)(null),[x,f]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),[j,y]=(0,s.useState)(!1),N="Mirror"===t.__typename,Z=N?t.mirrorOf:t;(0,R.useRouter)();let[k,S]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(f(!0),e.disconnect())})});v.current&&e.observe(v.current)},[]);let C=(0,U.y)((0,c.Z)((0,O.g)(Z)),"THUMBNAIL_V");return Z.appId===d.fO||(t.appId,d.AF),(0,a.jsxs)("div",{className:"lenshare-player",children:[(0,a.jsx)("div",{children:(0,a.jsx)(F.Z,{currentTime:l,publicationId:null==Z?void 0:Z.id,permanentUrl:M(Z),posterUrl:C,showControls:!0,options:{autoPlay:!1,muted:!1,loop:!0,loadingSpinner:!1,isCurrentlyShown:!0}})}),(0,a.jsx)("div",{className:"absolute right-0 top-0 m-2 mr-6 flex flex-row space-x-6 p-2 md:relative md:m-0 md:flex md:flex-col md:space-x-0 md:p-0 md:pt-[50px]",children:(0,a.jsx)("div",{className:"dropdown relative inline-block"})})]})},D=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return 1===e?{aspect:t?"aspect-w-16 aspect-h-10":"",row:"grid-cols-1 grid-rows-1"}:2===e?{aspect:"aspect-w-16 aspect-h-12",row:"grid-cols-2 grid-rows-1"}:e>2?{aspect:"aspect-w-16 aspect-h-12",row:"grid-cols-2 grid-rows-2"}:void 0},L=e=>{var t;let{attachments:l=[],isNew:h=!1,hideDelete:p=!1,publication:v,txn:x}=e,f=(0,i.l)(e=>e.setAttachments),g=(0,i.l)(e=>e.setVideoDurationInSeconds),[b,j]=(0,s.useState)(null),w=(0,s.useRef)(null),y=()=>{var e,t;(null===(e=w.current)||void 0===e?void 0:e.duration)&&(null===(t=w.current)||void 0===t?void 0:t.duration)!==1/0&&g(w.current.duration.toFixed(2))};(0,r.rf)(()=>{w.current&&(w.current.onloadeddata=y)},[w,l]);let N=e=>{f(l.filter(t=>t!==e))},Z=(null==l?void 0:l.some(e=>{var t;return d.Xe.includes(null==e?void 0:null===(t=e.original)||void 0===t?void 0:t.mimeType)}))?null==l?void 0:l.slice(0,1):null==l?void 0:l.slice(0,4),k=null==Z?void 0:Z.length;return 0!==k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,n.Z)(null===(t=D(k))||void 0===t?void 0:t.row,"mt-3 grid gap-2"),children:null==Z?void 0:Z.map((e,t)=>{var l,s,i;let r=null===(l=e.original)||void 0===l?void 0:l.mimeType,f=h?e.previewItem:(0,c.Z)(null===(s=e.original)||void 0===s?void 0:s.url),g=d.cV.includes(r),b=d.Xe.includes(r);return(0,a.jsxs)("div",{className:(0,n.Z)(b||g?"":"".concat(null===(i=D(k,h))||void 0===i?void 0:i.aspect," ").concat(3===k&&0===t?"row-span-2":""),{"w-full":g||b,"w-2/3":!b&&1===k},"relative"),onClick:u.Z,"aria-hidden":"true",children:["image/svg+xml"===r?(0,a.jsx)(m.z,{className:"text-sm",variant:"primary",icon:(0,a.jsx)(_.Z,{className:"h-4 w-4"}),onClick:()=>window.open(f,"_blank"),children:(0,a.jsx)("span",{children:"Open Image in new tab"})}):b?h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("video",{className:"w-full overflow-hidden rounded-xl",src:f,ref:w,disablePictureInPicture:!0,disableRemotePlayback:!0,controlsList:"nodownload noplaybackrate",controls:!0}),(0,a.jsx)(S,{})]}):(0,a.jsx)(E,{publication:v}):g?(0,a.jsx)(o.Z,{src:f,isNew:h,publication:v,txn:x,expandCover:e=>j(e)}):(0,a.jsx)(P.E,{className:"cursor-pointer rounded-lg border bg-gray-100 object-cover dark:border-gray-700 dark:bg-gray-800",loading:"lazy",height:1e3,width:1e3,onError:e=>{let{currentTarget:t}=e;t.src=f},onClick:()=>{j(f)},src:h?f:(0,C.Z)(f,d.y7),alt:h?f:(0,C.Z)(f,d.y7),"data-testid":"attachment-image-".concat(f)}),h&&!p&&(b?(0,a.jsx)(m.z,{className:"mt-3",variant:"danger",size:"sm",icon:(0,a.jsx)(A.Z,{className:"h-4 w-4"}),onClick:()=>N(e),outline:!0,children:"Cancel Upload"}):(0,a.jsx)("div",{className:(0,n.Z)(g?"absolute left-2 top-2":"m-3"),children:(0,a.jsx)("button",{type:"button",className:"rounded-full bg-gray-900 p-1.5 opacity-75",onClick:()=>N(e),children:(0,a.jsx)(A.Z,{className:"h-4 w-4 text-white"})})}))]},t+f)})}),(0,a.jsx)(T.q,{show:Boolean(b),url:b,onClose:()=>j(null)})]}):null};var q=L},92321:function(e,t,l){"use strict";l.d(t,{q:function(){return Z},Z:function(){return S}});var a=l(85893),n=l(67294),s=l(48113),i=l(1604),r=l(33962),o=l(5649),d=l(45706),c=l(62641),u=l(92359),m=l(7814),h=l(86010),p=l(30052);let v=e=>{let{isNew:t=!1,cover:l,setCover:s,imageRef:i,expandCover:v}=e,[x,f]=(0,n.useState)(!1),g=e=>{f(!1)},b=async e=>{var t;if(null===(t=e.target.files)||void 0===t?void 0:t.length)try{f(!0);let l=await (0,c.l)(e.target.files[0]);s(l.original.url,l.original.mimeType)}catch(a){g(a)}};return(0,a.jsxs)("div",{className:"group relative flex-none overflow-hidden",children:[(0,a.jsx)("button",{type:"button",className:"flex focus:outline-none",onClick:()=>v(l?(0,u.Z)(l):l),children:(0,a.jsx)(p.E,{onError:e=>{let{currentTarget:t}=e;t.src=l?(0,u.Z)(l):l},src:l?(0,d.Z)((0,u.Z)(l),o.y7):l,className:"h-24 w-24 rounded-xl object-cover md:h-40 md:w-40 md:rounded-none",draggable:!1,alt:"attachment-audio-cover-".concat(l),"data-testid":"attachment-audio-cover-".concat(l),ref:i})}),t&&(0,a.jsxs)("label",{className:(0,h.Z)({visible:x&&!l,invisible:l},"absolute top-0 grid h-24 w-24 cursor-pointer place-items-center bg-gray-100 backdrop-blur-lg group-hover:visible dark:bg-gray-900 md:h-40 md:w-40"),children:[x&&!l?(0,a.jsx)(r.$,{size:"sm"}):(0,a.jsxs)("div",{className:"flex flex-col items-center text-sm text-black dark:text-white opacity-60 dark:text-white",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Add cover"})]}),(0,a.jsx)("input",{type:"file",accept:".png, .jpg, .jpeg, .svg",className:"hidden w-full",onChange:b})]})]})};l(44753);var x=l(23106);let f=e=>{let{playerRef:t,src:l}=e;return(0,a.jsx)(x.Z,{ref:t,source:{type:"audio",sources:[{src:l}]},options:{controls:["progress","current-time","mute","volume"]}})};var g=(0,n.memo)(f),b=l(38624),j=l(83436),w=l(21321),y=l(4239),N=l(31586);let Z=(0,i.Ry)({title:(0,i.Z_)().trim().min(1,{message:"Invalid audio title"}),author:(0,i.Z_)().trim().min(1,{message:"Invalid author name"}),cover:(0,i.Z_)().trim().min(1,{message:"Invalid cover image"})}),k=e=>{var t,l,i,r,o;let{src:d,isNew:c=!1,publication:u,txn:m,expandCover:h}=e,[p,x]=(0,n.useState)(!1),f=(0,s.l)(e=>e.audioPublication),Z=(0,s.l)(e=>e.setAudioPublication),k=(0,n.useRef)(null),S=(0,n.useRef)(null),C=()=>{var e,t,l;if(k.current){if((null===(e=k.current)||void 0===e?void 0:e.plyr.paused)&&!p)return x(!0),null===(l=k.current)||void 0===l?void 0:l.plyr.play();x(!1),null===(t=k.current)||void 0===t||t.plyr.pause()}},T=e=>{Z({...f,[e.target.name]:e.target.value})};return(0,a.jsx)("div",{className:"bg-brand-500 overflow-hidden rounded-xl border-2 px-3.5 pt-3.5 dark:border-blue-700 md:p-0","data-testid":"attachment-audio-".concat(d),children:(0,a.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap md:space-x-2",children:[(0,a.jsx)(v,{isNew:c&&!m,cover:c?null!==(l=null==m?void 0:m.cover)&&void 0!==l?l:f.cover:(0,b.g)(null==u?void 0:u.id),setCover:(e,t)=>Z({...f,cover:e,coverMimeType:t}),imageRef:S,expandCover:h}),(0,a.jsxs)("div",{className:"flex w-full flex-col justify-between truncate py-1 md:px-3",children:[(0,a.jsx)("div",{className:"mt-3 flex justify-between md:mt-7",children:(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2.5 truncate",children:[(0,a.jsx)("button",{type:"button",onClick:C,children:!p||(null===(t=k.current)||void 0===t?void 0:t.plyr.paused)?(0,a.jsx)(w.Z,{className:"h-[50px] w-[50px] text-blue-600 hover:text-white"}):(0,a.jsx)(j.Z,{className:"h-[50px] w-[50px] text-blue-600 hover:text-white"})}),(0,a.jsx)("div",{className:"w-full truncate pr-3",children:c&&!m?(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)("input",{className:"border-none bg-transparent text-lg text-blue-600 outline-none placeholder:text-white",placeholder:"Add title",name:"title",value:f.title,autoComplete:"off",onChange:T}),(0,a.jsx)("input",{className:"border-none bg-transparent text-blue-600/70 outline-none placeholder:text-white/70",placeholder:"Add author",name:"author",value:f.author,onChange:T,autoComplete:"off"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{className:"truncate text-lg text-blue-600",children:null!==(i=null==u?void 0:u.metadata.name)&&void 0!==i?i:m.title}),(0,a.jsx)("h6",{className:"truncate text-blue-600/70",children:null!==(o=null!==(r=null==m?void 0:m.author)&&void 0!==r?r:(0,y.Z)(null==u?void 0:u.metadata.attributes,"author"))&&void 0!==o?o:(0,N.Z)(null==u?void 0:u.profile.name)})]})})]})}),(0,a.jsx)("div",{className:"md:pb-3",children:(0,a.jsx)(g,{src:d,playerRef:k})})]})]})})};var S=k},49117:function(e,t,l){"use strict";var a=l(85893),n=l(11761);let s=e=>{let{type:t="Publication"}=e;return(0,a.jsx)(n.Z,{className:"!bg-gray-100 dark:!bg-gray-800",children:(0,a.jsxs)("div",{className:"px-4 py-3 text-sm",children:[t," was hidden by the author"]})})};t.Z=s},37788:function(e,t,l){"use strict";l.d(t,{Z:function(){return ei}});var a=l(85893),n=l(4239),s=l(86010),i=l(41664),r=l.n(i),o=l(27102),d=l(84831),c=l(43797),u=l(68980),m=l(38564),h=l(51406),p=l(61896);let v=e=>{let{showActions:t=!0}=e;return(0,a.jsxs)("div",{className:"space-y-4 p-5",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(p.Z,{}),(0,a.jsx)("div",{className:"shimmer h-5 w-5 rounded-lg"})]}),(0,a.jsxs)("div",{className:"ml-[52px] space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"shimmer h-3 w-7/12 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-3 w-1/3 rounded-lg"})]}),t&&(0,a.jsxs)("div",{className:"flex gap-7 pt-3",children:[(0,a.jsx)("div",{className:"shimmer h-5 w-5 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-5 w-5 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-5 w-5 rounded-lg"})]})]})]})},x=e=>{let{publicationId:t,profile:l}=e,{data:n,loading:s,error:i}=(0,u.Kwl)({variables:{request:{publicationId:t}}});return s?(0,a.jsx)(h.Z,{zeroPadding:!0,children:(0,a.jsx)(v,{showActions:!1})}):!i&&(null==n?void 0:n.publication)?(0,a.jsx)(h.Z,{zeroPadding:!0,children:(0,a.jsx)(m.Z,{profile:l,publication:n.publication})}):null};var f=l(54209),g=l(5649),b=l(92359),j=l(52942),w=l(847),y=l(6154),N=l(11163),Z=l(67294),k=l(92882),S=l(96806),C=l(31618),T=l(11761),P=l(59355),_=l(79352),A=l(56186),I=l(7543),M=l(7814),R=l(62940),F=l(63750),U=l(29451),O=l(93300),E=l(66167),D=l(93189);let L=e=>{let{address:t,chainId:l,enabled:a}=e,n=()=>{switch(l){case 1:default:return"eth-mainnet";case 5:return"eth-goerli";case 137:return"polygon-mainnet";case 80001:return"polygon-mumbai"}},s=async()=>{let e=await (0,y.Z)({method:"GET",url:"https://".concat(n(),".g.alchemy.com/nft/v2/").concat(g.QI,"/getContractMetadata"),params:{contractAddress:t}});return e.data},{data:i,error:r}=(0,D.a)(["nftData"],()=>s().then(e=>e),{enabled:a});return{data:i,error:r}},q=(e,t)=>e&&1===e.length&&t.indexOf(e[0])===t.length-e[0].length?null==t?void 0:t.replace(e[0],""):t,z=e=>{let{icon:t,children:l}=e;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t,(0,a.jsx)("span",{children:l})]})},B=e=>{var t,l,n,i,m,h,p,v,x;let{encryptedPublication:D}=e,{pathname:B}=(0,N.useRouter)(),V=(0,k.qr)(e=>e.currentProfile),W=(0,S.u)(e=>e.setShowAuthModal),[G,K]=(0,Z.useState)(null),[H,Q]=(0,Z.useState)(null),[J,Y]=(0,Z.useState)(!1),[X,$]=(0,Z.useState)(null==D?void 0:null===(t=D.canDecrypt)||void 0===t?void 0:t.result),[ee,et]=(0,Z.useState)(null==D?void 0:D.canDecrypt.reasons),el=(0,C.t_)(),{data:ea}=(0,j.Z)(),en=(null==D?void 0:null===(l=D.metadata)||void 0===l?void 0:null===(n=l.content)||void 0===n?void 0:n.length)>450&&"/post/[id]"!==B;(0,u.mVA)({variables:{request:{publicationId:D.id},profileId:null!==(m=null==V?void 0:V.id)&&void 0!==m?m:null},pollInterval:5e3,skip:X||!V,onCompleted:e=>{let{publication:t}=e;$((null==t?void 0:t.canDecrypt.result)||!1),et((null==t?void 0:t.canDecrypt.reasons)||[])}});let es=e=>{var t,l,a,n;let s=null===(t=null===(l=D.metadata.encryptionParams)||void 0===l?void 0:l.accessCondition.or)||void 0===t?void 0:t.criteria,i=e=>s.map(t=>t[e]).find(e=>e);return(null===(a=i("and"))||void 0===a?void 0:a.criteria)?i("and").criteria.map(t=>t[e]).find(e=>e):(null===(n=i("or"))||void 0===n?void 0:n.criteria)?i("or").criteria.map(t=>t[e]).find(e=>e):s.map(t=>t[e]).find(e=>e)},ei=es("token"),er=es("nft"),eo=es("collect"),{data:ed}=(0,C.dQ)({address:null==ei?void 0:ei.contractAddress,chainId:null==ei?void 0:ei.chainID,enabled:Boolean(ei)}),{data:ec}=L({address:null==er?void 0:er.contractAddress,chainId:null==er?void 0:er.chainID,enabled:Boolean(er)}),eu="text-sm rounded-xl w-fit p-9 shadow-sm bg-gradient-to-tr from-brand-400 to-brand-600",em=null==ee?void 0:ee.includes(u.f1D.HasNotCollectedPublication),eh=!em&&(null==ee?void 0:ee.includes(u.f1D.CollectNotFinalisedOnChain)),ep=null==ee?void 0:ee.includes(u.f1D.DoesNotFollowProfile),ev=!ep&&(null==ee?void 0:ee.includes(u.f1D.FollowNotFinalisedOnChain)),ex=null==ee?void 0:ee.includes(u.f1D.UnauthorizedBalance),ef=null==ee?void 0:ee.includes(u.f1D.DoesNotOwnNft),eg=async()=>{if(!ea||J)return;Y(!0);let e=(0,b.Z)(null==D?void 0:D.onChainContentURI),{data:t}=await y.Z.get(e),l=await w.LensGatedSDK.create({provider:el,signer:ea,env:g._s}),{decrypted:a,error:n}=await l.gated.decryptMetadata(t);K(a),Q(n),Y(!1)};if(!V)return(0,a.jsx)(T.Z,{className:(0,s.Z)(eu,"!cursor-pointer"),onClick:e=>{(0,P.Z)(e),W(!0)},children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 font-bold text-white",children:[(0,a.jsx)(_.orh,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Login to decrypt"})]})});if(!X)return(0,a.jsxs)(T.Z,{className:(0,s.Z)(eu,"cursor-text"),onClick:P.Z,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 font-bold",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5 text-green-300"}),(0,a.jsx)("span",{className:"text-base font-black text-white",children:"To view this..."})]}),(0,a.jsxs)("div",{className:"space-y-2 pt-3.5 text-white",children:[em&&(0,a.jsxs)(z,{icon:(0,a.jsx)(F.pNO,{className:"h-4 w-4"}),children:["Collect the"," ",(0,a.jsx)(r(),{href:"/post/".concat(null==eo?void 0:eo.publicationId),className:"font-bold lowercase underline",children:null==D?void 0:D.__typename})]}),eh&&(0,a.jsx)(z,{icon:(0,a.jsx)(F.pNO,{className:"h-4 w-4 animate-pulse"}),children:"Collect finalizing on chain.."}),ep&&(0,a.jsxs)(z,{icon:(0,a.jsx)(I.Z,{className:"h-4 w-4"}),children:["Follow"," ",(0,a.jsxs)(r(),{href:"/u/".concat(null==D?void 0:null===(h=D.profile)||void 0===h?void 0:h.id),className:"font-bold",children:["@",(0,U.Z)(null==D?void 0:null===(p=D.profile)||void 0===p?void 0:p.handle)]})]}),ev&&(0,a.jsx)(z,{icon:(0,a.jsx)(I.Z,{className:"h-4 w-4 animate-pulse"}),children:"Follow finalizing on chain..."}),ex&&(0,a.jsxs)(z,{icon:(0,a.jsx)(F.oxP,{className:"h-4 w-4"}),children:["You need"," ",(0,a.jsxs)(r(),{href:"".concat(g.Bq,"/token/").concat(ei.contractAddress),className:"font-bold underline",target:"_blank",rel:"noreferrer noopener",children:[ei.amount," ",null==ed?void 0:ed.symbol]})," ","to unlock"]}),ef&&(0,a.jsxs)(z,{icon:(0,a.jsx)(M.Z,{className:"h-4 w-4"}),children:["You need"," ",(0,a.jsx)(O.u,{content:null==ec?void 0:null===(v=ec.contractMetadata)||void 0===v?void 0:v.name,placement:"top",children:(0,a.jsx)(r(),{href:"".concat(g.qP,"/collection/polygon/").concat(er.contractAddress,"/items"),className:"font-bold underline",target:"_blank",rel:"noreferrer noopener",children:null==ec?void 0:null===(x=ec.contractMetadata)||void 0===x?void 0:x.symbol})})," ","nft to unlock"]})]})]});if(H)return(0,a.jsx)(E.B,{title:"Error while decrypting!",error:H});if(!G&&J)return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"shimmer h-3 w-7/12 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-3 w-1/3 rounded-lg"})]});if(!G)return(0,a.jsx)(T.Z,{className:(0,s.Z)(eu,"!cursor-pointer"),onClick:async e=>{(0,P.Z)(e),await eg()},children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 border-blue-600 font-bold text-blue-600",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5"}),(0,a.jsxs)("span",{children:["Decrypt"," ",(0,a.jsx)("span",{className:"lowercase",children:D.__typename})]})]})});let{content:eb}=null!=G?G:{},ej=(0,c.Z)(eb);return eb=q(ej,eb),(0,a.jsxs)("div",{className:"break-words",children:[(0,a.jsx)(o.Z,{className:(0,s.Z)({"line-clamp-5":en},"markup linkify text-md break-words"),children:null==G?void 0:G.content}),en&&(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-1 text-sm font-bold text-gray-500",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),(0,a.jsx)(r(),{href:"/post/".concat(null==D?void 0:D.id),children:"Show more"})]}),(null==G?void 0:null===(i=G.media)||void 0===i?void 0:i.length)?(0,a.jsx)(d.Z,{attachments:null==G?void 0:G.media}):eb?ej.length>0&&(0,a.jsx)(f.Z,{url:ej[0],publicationId:D.id}):null]})};var V=l(12317);let W=(e,t)=>{var l;let a=null==e?void 0:e.find(e=>e.traitType===t);return null!==(l=null==a?void 0:a.value)&&void 0!==l?l:""};var G=l(4896),K=l(33962),H=l(89814),Q=l(29780),J=l(22257),Y=l(30052),X=l(8974),$=l(48900),ee=l(31586),et=l(22023);let el=e=>{var t;let{profile:l,timestamp:n="",smallAvatar:i=!1}=e,o=()=>(0,a.jsx)(Y.E,{src:(0,J.Z)(l),loading:"lazy",className:(0,s.Z)(i?"h-5 w-5":"h-6 w-6","rounded-full border bg-gray-200 dark:border-gray-700"),height:i?20:24,width:i?20:24,alt:(0,U.Z)(null==l?void 0:l.handle)}),d=()=>(0,a.jsxs)("div",{className:"flex max-w-sm items-center",children:[(0,a.jsx)("div",{className:"truncate",children:null!==(t=(0,ee.Z)(null==l?void 0:l.name))&&void 0!==t?t:(0,U.Z)(null==l?void 0:l.handle)}),(0,a.jsx)(X.Z,{className:"ml-2 text-sm",slug:(0,U.Z)(null==l?void 0:l.handle),prefix:"@"}),n?(0,a.jsxs)("span",{className:"lt-text-gray-500",children:[(0,a.jsx)("span",{className:"mx-1.5",children:"\xb7"}),(0,a.jsx)("span",{className:"text-xs",title:(0,$.Z)(n),children:(0,et.RK)(n)})]}):null]});return(0,a.jsx)(r(),{href:"/u/".concat((0,U.Z)(null==l?void 0:l.handle)),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o,{}),(0,a.jsx)(d,{})]})})};var ea=(0,Z.memo)(el);let en=e=>{var t,l;let{publication:n}=e,{address:s}=(0,C.mA)(),{metadata:i}=n,r=(0,V.P)(e=>e.setShowSpacesWindow),o=(0,V.P)(e=>e.setLensAccessToken),d=(0,V.P)(e=>e.lensAccessToken),c=(0,V.P)(e=>e.setSpace),m=JSON.parse(W(i.attributes,"audioSpace")),{signMessage:p,isLoading:v}=(0,C.QW)({onSuccess:async e=>{let t=await (0,G.Y_)(e,s);t.accessToken&&(r(!0),o(t.accessToken),c({...m,title:i.content}))}}),{data:x,loading:f}=(0,u.zip)({variables:{request:{ownedBy:[m.host]}}});if(f)return(0,a.jsx)("div",{children:"Loading..."});let g=null==x?void 0:null===(t=x.profiles)||void 0===t?void 0:null===(l=t.items)||void 0===l?void 0:l.find(e=>(null==e?void 0:e.ownedBy)===m.host);return(0,a.jsxs)(h.Z,{className:"!bg-brand-500/30 border-brand-400 mt-0 !p-3",children:[(0,a.jsx)(ea,{profile:g,smallAvatar:!0}),(0,a.jsxs)("div",{className:"mt-2 space-y-3",children:[(0,a.jsx)("b",{className:"text-lg",children:i.content}),(0,a.jsx)(Q.z,{className:"!mt-4 flex w-full justify-center",disabled:v,icon:v?(0,a.jsx)(K.$,{size:"xs",className:"mr-1"}):(0,a.jsx)(H.Z,{className:"h-5 w-5"}),onClick:async()=>{if(d){r(!0),c({...m,title:i.content});return}let e=await (0,G.XY)(s);p({message:e.message})},children:"Open Space"})]})]})},es=e=>{var t,l;let{publication:i,showMore:u=!1,quoted:m=!1,profile:h}=e,{id:p,metadata:v}=i,g=(null==v?void 0:null===(t=v.content)||void 0===t?void 0:t.length)>450&&u,b=(0,c.Z)(null==v?void 0:v.content),j=(null==b?void 0:b.length)>0,w=(0,n.Z)(v.attributes,"quotedPublicationId"),y=(0,n.Z)(v.attributes,"audioSpace"),N=Boolean(y)?JSON.parse(y):null,Z=null==v?void 0:v.content;if(w)for(let k of b)k.includes(w)&&(Z=null==Z?void 0:Z.replace(k,""));if(null==v?void 0:v.encryptionParams)return(0,a.jsx)(B,{encryptedPublication:i});let S=(0,V.P)(e=>e.showSpacesLobby);if(Boolean(null==N?void 0:N.id))return(0,a.jsx)(en,{publication:i});let C=(null==v?void 0:null===(l=v.media)||void 0===l?void 0:l.length)>0,T=w&&!m,P=j&&!C&&!T&&!m;return P&&(Z=q(b,Z)),(0,a.jsxs)("div",{className:"break-words",children:[(0,a.jsx)(o.Z,{className:(0,s.Z)({"line-clamp-5":g},"markup linkify font-helvetica break-words text-xs font-bold"),children:Z}),g&&(0,a.jsx)("div",{className:"lt-text-gray-500 mt-4 flex items-center space-x-1 text-sm font-bold",children:(0,a.jsx)(r(),{href:"/post/".concat(p),children:"Show more"})}),C?(0,a.jsx)(d.Z,{attachments:null==v?void 0:v.media,publication:i}):null,S?(0,a.jsx)(en,{publication:i}):null,P?(0,a.jsx)(f.Z,{url:b[0]}):null,T?(0,a.jsx)(x,{publicationId:w,profile:h}):null]})};var ei=es},49167:function(e,t,l){"use strict";l.d(t,{Z:function(){return x}});var a=l(85893),n=l(59355),s=l(86010),i=l(48113),r=l(53914),o=l(5362),d=l(92882),c=l(5649);let u=["0x16","0x01","0x02","0x05","0x06","0x0210","0x0d","0x24","0x8e","0x0636","0xa1","0x30aa","0x4b","0xfc3f","0x2ee4","0x2d","0x0a","0x09","0xabd0","0x01b430","0x73","0x3a","0x933b"],m=["0x01","0x02","0x18","0x15","0x038b","0x933b",37691],h=e=>c.M8?u.includes(e):m.includes(e),p=()=>{let e=(0,d.qr)(e=>e.currentProfile),t=!!e&&h(null==e?void 0:e.id);return{allowed:t}},v=e=>{var t,l;let{publication:d,feedItem:c,quoted:u=!1,isNew:m=!1}=e,h=(0,i.l)(e=>e.setQuotedPublication),{allowed:v}=p(),x="Mirror"===d.__typename,f=(null==c?void 0:c.comments)&&c.comments[0],g=c?f||(null==c?void 0:c.root):d,b=c?g.profile:x?null==d?void 0:null===(t=d.mirrorOf)||void 0===t?void 0:t.profile:null==d?void 0:d.profile,j=c?g.createdAt:x?null==d?void 0:null===(l=d.mirrorOf)||void 0===l?void 0:l.createdAt:null==d?void 0:d.createdAt;return(0,a.jsxs)("div",{className:(0,s.Z)(u?"pb-2":"pb-4","relative m-2 flex justify-between space-x-1.5 pt-3"),"data-testid":"publication-".concat(d.id,"-header"),children:[(0,a.jsx)("span",{onClick:n.Z,"aria-hidden":"true",children:u?(0,a.jsx)(r.Z,{profile:b,timestamp:j}):(0,a.jsx)(r.Z,{profile:b,timestamp:j,showStatus:!0})}),(0,a.jsx)("div",{className:"!-mr-[7px] flex items-center space-x-1",children:u&&m&&(0,a.jsx)("button",{className:"rounded-full p-1.5",onClick:e=>{(0,n.Z)(e),h(null)},"aria-label":"Remove Quote",children:(0,a.jsx)(o.Z,{className:"lt-text-gray-500 w-[15px] sm:w-[18px]"})})})]})};var x=v},97959:function(e,t,l){"use strict";var a=l(85893),n=l(86010),s=l(11163);let i=e=>{let{publication:t,className:l="",children:i}=e,{push:r}=(0,s.useRouter)();return(0,a.jsx)("article",{className:(0,n.Z)(l),onClick:()=>{let e=window.getSelection();e&&0!==e.toString().length||r("/post/".concat(null==t?void 0:t.id))},"data-testid":"publication-".concat(t.id),"aria-hidden":"true",children:i})};t.Z=i},38564:function(e,t,l){"use strict";var a=l(85893),n=l(37788),s=l(49167),i=l(49117),r=l(97959);let o=e=>{let{publication:t,isNew:l=!1,profile:o}=e;return(0,a.jsxs)(r.Z,{className:"line-clamp-5 cursor-pointer break-words truncate border-blue-500 p-5 text-xs first:rounded-t-xl last:rounded-b-xl hover:bg-grey-200 dark:hover:bg-gray-800",publication:t,children:[(0,a.jsx)(s.Z,{profile:o,publication:t,quoted:!0,isNew:l}),(null==t?void 0:t.hidden)?(0,a.jsx)(i.Z,{type:t.__typename}):(0,a.jsx)(n.Z,{profile:o,publication:t,showMore:!0,quoted:!0})]})};t.Z=o},61896:function(e,t,l){"use strict";var a=l(85893),n=l(86010);let s=e=>{let{showFollow:t=!1,isBig:l=!1}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:(0,n.Z)(l?"h-14 w-14":"h-10 w-10","shimmer rounded-full")}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"shimmer h-3 w-28 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-3 w-20 rounded-lg"}),l&&(0,a.jsx)("div",{className:"shimmer h-3 w-48 rounded-lg"})]})]}),t&&(0,a.jsx)("div",{className:"shimmer h-8 w-10 rounded-lg"})]})};t.Z=s},43797:function(e,t){"use strict";let l=e=>e&&e.match(/(((https?:\/\/)|(www\.))\S+)/g)||[];t.Z=l},51406:function(e,t,l){"use strict";var a=l(85893),n=l(59355),s=l(86010),i=l(11761);let r=e=>{let{children:t,className:l="",dataTestId:r="",zeroPadding:o=!1}=e;return(0,a.jsx)(i.Z,{className:(0,s.Z)("mt-3 cursor-auto",l,{"p-5":!o}),forceRounded:!0,dataTestId:r,onClick:n.Z,children:t})};t.Z=r},66167:function(e,t,l){"use strict";l.d(t,{B:function(){return n}});var a=l(85893);let n=e=>{let{title:t,error:l,className:n=""}=e;return l?(0,a.jsxs)("div",{className:"space-y-1 rounded-xl border-2 border-red-500/50 bg-red-50 p-4 dark:bg-red-900/10 ".concat(n),children:[t&&(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:t}),(0,a.jsx)("div",{className:"text-sm text-red-700 dark:text-red-200",children:null==l?void 0:l.message})]}):null}},54209:function(e,t,l){"use strict";l.d(t,{Z:function(){return x}});var a=l(85893),n=l(93189),s=l(6154),i=l(59355),r=l(41664),o=l.n(r),d=l(11761),c=l(45706),u=l(5649),m=l(30052);let h=e=>{let{og:t,publicationId:l}=e;return(0,a.jsx)("div",{className:"mt-4 text-sm truncate sm:w-5/6","data-testid":"normal-oembed-".concat(t.url),children:(0,a.jsx)(o(),{href:t.url,onClick:e=>{(0,i.Z)(e)},target:t.url.includes(location.host)?"_self":"_blank",rel:"noreferrer noopener",children:(0,a.jsxs)(d.Z,{forceRounded:!0,children:[t.isLarge&&t.thumbnail&&(0,a.jsx)(m.E,{className:"divider w-full truncate rounded-t-xl",onError:e=>{let{currentTarget:l}=e;l.src=t.thumbnail},src:(0,c.Z)(t.thumbnail,u.y7),alt:"Thumbnail"}),(0,a.jsxs)("div",{className:"flex items-center",children:[!t.isLarge&&t.thumbnail&&(0,a.jsx)(m.E,{className:"h-34 w-34 flex truncate rounded-l-xl border-r",height:144,width:144,onError:e=>{let{currentTarget:l}=e;l.src=t.thumbnail},src:(0,c.Z)(t.thumbnail,u.y7),alt:"Thumbnail"}),(0,a.jsx)("div",{className:"truncate p-2",children:(0,a.jsxs)("div",{className:"space-y-1.5",children:[t.title&&(0,a.jsx)("div",{className:"line-clamp-3 truncate break-words font-bold",children:t.title}),t.site&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-1.5",children:[t.favicon&&(0,a.jsx)("img",{className:"h-4 w-4 rounded-full",height:16,width:16,src:t.favicon,alt:"Favicon"}),(0,a.jsx)("div",{className:"lt-text-gray-500 truncate text-xs",children:t.site})]})]})})]})]})})})},p=e=>{let{og:t}=e;return(0,a.jsx)("div",{className:" mt-5 flex h-full w-full rounded-l-xl text-sm","data-testid":"rich-oembed-".concat(t.url),children:(0,a.jsx)("div",{className:"oembed-player",dangerouslySetInnerHTML:{__html:t.html}})})},v=e=>{let{url:t,publicationId:l}=e,{isLoading:i,error:r,data:o}=(0,n.a)([t],()=>(0,s.Z)({url:u.rF,params:{url:t}}).then(e=>e.data.oembed),{enabled:Boolean(t)});if(r||i||!o)return null;let d={url:t,title:null==o?void 0:o.title,description:null==o?void 0:o.description,site:null==o?void 0:o.site,favicon:"https://www.google.com/s2/favicons?domain=".concat(o.url),thumbnail:null==o?void 0:o.image,isLarge:null==o?void 0:o.isLarge,html:null==o?void 0:o.html};return d.title?d.html?(0,a.jsx)(p,{og:d}):(0,a.jsx)(h,{og:d,publicationId:l}):null};var x=v},44762:function(e,t,l){"use strict";l.d(t,{q:function(){return c}});var a=l(85893),n=l(44080),s=l(92485),i=l(59355),r=l(41664),o=l.n(r),d=l(67294);let c=e=>{let{show:t,url:l,onClose:r}=e;return(0,a.jsx)(n.u.Root,{show:t,as:d.Fragment,children:(0,a.jsx)(s.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:r,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.u.Child,{as:d.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(s.V.Overlay,{className:"fixed inset-0 bg-gray-500/75 transition-opacity"})}),(0,a.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,a.jsxs)(n.u.Child,{as:"div",className:"inline-block p-8 text-left align-middle transition-all sm:max-w-3xl",enter:"ease-out duration-100",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:[(0,a.jsx)("img",{className:"max-h-screen",height:1e3,width:1e3,src:null!=l?l:"",alt:null!=l?l:"",onClick:r,"aria-hidden":"true"}),l?(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(o(),{className:"text-sm text-gray-200 hover:underline",href:l,target:"_blank",rel:"noreferrer noopener",onClick:i.Z,"data-testid":"lightbox-open-original",children:"Open original"})}):null]})]})})})}},64208:function(e,t,l){"use strict";l.d(t,{u:function(){return d}});var a=l(85893),n=l(44080),s=l(92485),i=l(5362),r=l(86010),o=l(67294);let d=e=>{let{icon:t,title:l,size:d="sm",show:c,children:u,dataTestId:m="",onClose:h}=e;return(0,a.jsx)(n.u.Root,{show:c,as:o.Fragment,children:(0,a.jsx)(s.V,{as:"div",className:"fixed inset-0 z-[20] overflow-y-auto",onClose:()=>null==h?void 0:h(),"data-testid":m,children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:block sm:p-0",children:[(0,a.jsx)(n.u.Child,{as:o.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(s.V.Overlay,{className:"fixed inset-0 bg-gray-500/75 transition-opacity "})}),(0,a.jsx)("span",{className:" sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,a.jsx)(n.u.Child,{as:o.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)("div",{className:(0,r.Z)({"sm:max-w-5xl":"lg"===d},{"sm:max-w-3xl":"md"===d},{"sm:max-w-lg":"sm"===d},{"sm:max-w-sm":"xs"===d},"inline-block w-full scale-100 rounded-xl bg-blue-700/80 text-left align-bottom shadow-xl transition-all sm:my-8 sm:align-middle"),children:[l&&(0,a.jsxs)("div",{className:"divider flex items-center justify-between px-5 py-3.5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 font-bold",children:[t,(0,a.jsx)("div",{children:l})]}),h?(0,a.jsx)("button",{type:"button",className:"rounded-full p-1 text-gray-800 hover:bg-gray-200 dark:text-gray-100 dark:hover:bg-gray-500",onClick:h,children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})}):null]}),u]})})]})})})}},93300:function(e,t,l){"use strict";l.d(t,{u:function(){return s}});var a=l(85893);l(73372);var n=l(52697);let s=e=>{let{children:t,content:l,placement:s="right",className:i="",withDelay:r=!1}=e;return(0,a.jsx)(n.ZP,{placement:s,duration:0,delay:[r?500:0,0],className:"hidden !rounded-lg !text-xs !leading-6 tracking-wide sm:block",content:(0,a.jsx)("span",{className:i,children:l}),children:(0,a.jsx)("span",{children:t})})}},41741:function(e,t,l){"use strict";var a,n;l.d(t,{D:function(){return a}}),(n=a||(a={})).SomethingWentWrong="Something went wrong!",n.SignWallet="Please sign in your wallet.",n.InvalidAccesstoken="InvalidAccesstoken"},64911:function(e,t){"use strict";let l=(e,t)=>{let{[t]:l,...a}=e;return a},a=e=>{let{domain:t,types:a,value:n}=e;return{primaryType:Object.keys(l(a,"__typename"))[0],domain:l(t,"__typename"),types:l(a,"__typename"),message:l(n,"__typename")}};t.Z=a},45706:function(e,t,l){"use strict";var a=l(5649);let n=(e,t)=>{if(!e)return"";if(e.includes(a.vC)){let l=e.split("/"),n=l[l.length-1];return t?"".concat(a.vC,"/").concat(t,"/").concat(n):e}return e};t.Z=n},59355:function(e,t){"use strict";let l=e=>e.stopPropagation();t.Z=l},62641:function(e,t,l){"use strict";l.d(t,{l:function(){return c}});var a=l(25232),n=l(5649),s=l(6154),i=l(57632);let r="image/jpeg",o=async()=>{var e,t,l;let i=await s.Z.get(n.Kl),r=new a.S3({endpoint:n.qD,credentials:{accessKeyId:null===(e=i.data)||void 0===e?void 0:e.accessKeyId,secretAccessKey:null===(t=i.data)||void 0===t?void 0:t.secretAccessKey,sessionToken:null===(l=i.data)||void 0===l?void 0:l.sessionToken},region:"us-west-2",maxAttempts:3});return r.middlewareStack.addRelativeTo(e=>async t=>{let{response:l}=await e(t);return null===l.body&&(l.body=new Uint8Array),{response:l}},{name:"nullFetchResponseBodyMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",override:!0}),r},d=async e=>{try{let t=Array.from(e),l=await o(),a=await Promise.all(t.map(async(t,a)=>{let s=e[a],o={Bucket:n.DG.LENSTER_MEDIA,Key:(0,i.Z)()};await l.putObject({...o,Body:s,ContentType:s.type});let d=await l.headObject(o),c=d.Metadata;return{original:{url:"ipfs://".concat(null==c?void 0:c["ipfs-hash"]),mimeType:s.type||r}}}));return a}catch(s){return[]}},c=async e=>{try{let t=await d([e]),l=t[0];return{original:{url:l.original.url,mimeType:e.type||r}}}catch(a){return console.error("Failed to upload file to IPFS",a),{original:{url:"",mimeType:e.type||r}}}};t.Z=d},96806:function(e,t,l){"use strict";l.d(t,{u:function(){return s}});var a=l(68980),n=l(73445);let s=(0,n.Ue)(e=>({showAuthModal:!1,showNewPostModal:!1,setShowNewPostModal:t=>e(()=>({showNewPostModal:t})),setShowAuthModal:t=>e(()=>({showAuthModal:t})),showNewModal:!1,modalPublicationType:a.mnY.Post,setShowNewModal:(t,l)=>e(()=>({showNewModal:t,modalPublicationType:l})),showReportModal:!1,reportingPublication:null,reportConfig:null,setShowReportModal:(t,l,a)=>e(()=>({showReportModal:t,reportingPublication:l,reportConfig:a})),showStatusModal:!1,setShowStatusModal:t=>e(()=>({showStatusModal:t})),showProfileSwitchModal:!1,setShowProfileSwitchModal:t=>e(()=>({showProfileSwitchModal:t})),showMobileDrawer:!1,setShowMobileDrawer:t=>e(()=>({showMobileDrawer:t})),showNewSpacesModal:!1,setShowNewSpacesModal:t=>e(()=>({showNewSpacesModal:t}))}))},70769:function(e,t,l){"use strict";l.d(t,{p:function(){return s}});var a=l(73445),n=l(782);let s=(0,a.Ue)((0,n.XR)(e=>({userSigNonce:0,setUserSigNonce:t=>e(()=>({userSigNonce:t}))})))},48113:function(e,t,l){"use strict";l.d(t,{l:function(){return n}});var a=l(73445);let n=(0,a.Ue)(e=>({publicationContent:"",setPublicationContent:t=>e(()=>({publicationContent:t})),quotedPublication:null,setQuotedPublication:t=>e(()=>({quotedPublication:t})),audioPublication:{title:"",author:"",cover:"",coverMimeType:"image/jpeg"},setAudioPublication:t=>e(()=>({audioPublication:t})),attachments:[],setAttachments:t=>e(()=>({attachments:t})),addAttachments:t=>e(e=>({attachments:[...e.attachments,...t]})),updateAttachments:t=>e(e=>{let l=[...e.attachments];return t.map(e=>{let t=l.findIndex(t=>t.id===e.id);-1!==t&&(l[t]=e)}),{attachments:l}}),removeAttachments:t=>e(e=>{let l=[...e.attachments];return t.map(e=>{let t=l.findIndex(t=>t.id===e);-1!==t&&l.splice(t,1)}),{attachments:l}}),videoThumbnail:{url:"",type:"",uploading:!1},setVideoThumbnail:t=>e(()=>({videoThumbnail:t})),videoDurationInSeconds:"",setVideoDurationInSeconds:t=>e(()=>({videoDurationInSeconds:t})),isUploading:!1,setIsUploading:t=>e(()=>({isUploading:t})),showPollEditor:!1,setShowPollEditor:t=>e(()=>({showPollEditor:t})),pollConfig:{length:7,choices:["",""]},setPollConfig:t=>e(()=>({pollConfig:t})),resetPollConfig:()=>e(()=>({pollConfig:{length:1,choices:["",""]}})),showSpaceEditor:!1,setShowSpaceEditor:t=>e(()=>({showSpaceEditor:t}))}))},12317:function(e,t,l){"use strict";l.d(t,{P:function(){return n}});var a=l(73445);let n=(0,a.Ue)((e,t)=>({showSpacesLobby:!1,setShowSpacesLobby:t=>e(()=>({showSpacesLobby:t})),showSpacesWindow:!1,setShowSpacesWindow:t=>e(()=>({showSpacesWindow:t})),lensAccessToken:"",setLensAccessToken:t=>e(()=>({lensAccessToken:t})),isRecordingOn:!1,setIsRecordingOn:t=>e(()=>({isRecordingOn:t})),isTokenGated:!1,setIsTokenGated:t=>e(()=>({isTokenGated:t})),space:{id:"",host:"",title:""},sidebar:{isSidebarOpen:!1,sidebarView:"close"},isMyHandRaised:!1,requestedPeers:[],setSpace:t=>e(()=>({space:t})),setSidebarView(l){let a=t().sidebar.sidebarView;("close"===l||l===a)&&e(()=>({sidebar:{isSidebarOpen:!1,sidebarView:"close"}})),e(()=>({sidebar:{isSidebarOpen:!0,sidebarView:l}}))},setMyHandRaised:t=>e(()=>({isMyHandRaised:t})),addRequestedPeers:t=>{e(e=>({requestedPeers:[...e.requestedPeers,t]}))},removeRequestedPeers:t=>e(e=>({requestedPeers:e.requestedPeers.filter(e=>e!==t)}))}))},21192:function(e,t,l){"use strict";l.d(t,{Z:function(){return v}});var a=l(85893);l(44753);var n=l(54125),s=l.n(n),i=l(11163),r=l(67294),o=l(5649),d=l(99983),c=l(65561);let u=e=>{var t,l,n;let{ratio:s,permanentUrl:i,posterUrl:r,playerRef:u,options:m,showControls:h}=e;return(0,a.jsx)("div",{className:"lensshare-player",children:(0,a.jsx)(d.e,{src:i,poster:r,showTitle:!1,objectFit:"contain",aspectRatio:s,showPipButton:!0,mediaElementRef:u,loop:null===(t=m.loop)||void 0===t||t,showUploadingIndicator:!1,muted:null!==(l=null==m?void 0:m.muted)&&void 0!==l&&l,controls:{defaultVolume:1},autoPlay:null!==(n=m.autoPlay)&&void 0!==n&&n,showLoadingSpinner:m.loadingSpinner,_isCurrentlyShown:m.isCurrentlyShown,autoUrlUpload:o.M8&&{fallback:!0,ipfsGateway:c.Gs},children:h?null:(0,a.jsx)(a.Fragment,{})})})};var m=r.memo(u);let h=e=>{let{acceptWarning:t}=e;return(0,a.jsx)("div",{className:"flex h-56 w-full items-center justify-center space-x-5 rounded-xl bg-black px-10 text-lg text-white md:h-[60vh]",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"text-base",children:["The following video has sensitive content and may inappropriate or offensive to some audiences. ",(0,a.jsx)("div",{children:"Viewer discretion is advised."})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"button",className:"mt-5 rounded-xl bg-gray-800 px-5 py-2 text-sm outline-none",onClick:()=>t(),children:"I understand & wish to proceed"})})]})})},p=e=>{let{permanentUrl:t,posterUrl:l,ratio:n="16to9",isSensitiveContent:d,currentTime:c=0,refCallback:u,publicationId:p,options:v,showControls:x=!0}=e,f=(0,i.useRouter)(),g=(0,r.useRef)(),[b,j]=(0,r.useState)(d),w=e=>{var t;let l=s().utils.now();s().monitor(e,{debug:!1,data:{env_key:o.Vk,player_name:"Lensshare-player",video_id:p,video_stream_type:"on-demand",player_init_time:l,video_title:"".concat(o.Tq,"/post/").concat(null!=p?p:null===(t=f.query)||void 0===t?void 0:t.id),page_type:"bytespage",video_duration:null==e?void 0:e.duration}})},y=(0,r.useCallback)(e=>{null==u||u(e),g.current=e,g.current.currentTime=Number(c||0),o.M8&&w(g.current)},[]);(0,r.useEffect)(()=>{g.current&&(g.current.currentTime=Number(c||0))},[c]);let N=e=>{e.preventDefault()};return(0,a.jsx)("div",{className:"w-full rounded-lg",children:b?(0,a.jsx)(h,{acceptWarning:()=>j(!1)}):(0,a.jsx)("div",{onContextMenu:N,className:"lensshare-player",children:(0,a.jsx)(m,{posterUrl:l,permanentUrl:t,ratio:n,playerRef:y,options:v,showControls:x})})})};var v=r.memo(p)},4239:function(e,t){"use strict";let l=(e,t)=>{var l;let a=null==e?void 0:e.find(e=>e.traitType===t);return null!==(l=null==a?void 0:a.value)&&void 0!==l?l:""};t.Z=l},38624:function(e,t,l){"use strict";l.d(t,{g:function(){return s}});var a=l(5649),n=l(92359);let s=(e,t)=>{var l,s,i;let r=(null==e?void 0:null===(l=e.metadata)||void 0===l?void 0:null===(s=l.cover)||void 0===s?void 0:s.original.url)||(null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:i.image);return t&&(r=r||a.TJ),(0,n.Z)(r)}},6528:function(e,t,l){"use strict";l.d(t,{y:function(){return n}});var a=l(5649);let n=(e,t)=>{if(!e)return e;if(e.includes(a.vC)){let l=e.split("/"),n=l[l.length-1];return t?"".concat(a.vC,"/").concat(a.UN[t],"/").concat(n):e}return e}},69125:function(e,t,l){"use strict";l.d(t,{D:function(){return a}});let a=e=>{var t;return"".concat(e.__typename,":").concat(JSON.stringify({id:e.id,collectedBy:null===(t=e.collectedBy)||void 0===t?void 0:t.address,createdAt:e.createdAt}))}},92359:function(e,t,l){"use strict";var a=l(5649),n=l(65561);let s=e=>{let t="".concat(n.Gs,"/"),l="".concat(a.C7,"/");return e?e.replace(/^Qm[1-9A-Za-z]{44}/gm,"".concat(t,"/").concat(e)).replace("https://ipfs.io/ipfs",t).replace("https://ipfs.infura.io/ipfs",t).replace("https://lens.ipfs.infura.io/ipfs",t).replace("https://ipfs-infura.io/ipfs",t).replace("https://lens.ipfs-infura.io/ipfs",t).replace("https://lenshareapp.ipfs-infura.io/ipfs",t).replace("https://lenshareapp.ipfs-infura.io",t).replace("ipfs://",t).replace("ipfs://ipfs/",t).replace("ipfs://ipfs",t).replace("ar://",l).replace("https://lp-playback.com/hls","".concat(l,"/").concat(e)).replace("https://lp-playback.com/hls",l).replace("https://lp-playback.com","".concat(l,"/").concat(e)).replace("https://lp-playback.com",l):e};t.Z=s},54287:function(){}}]);