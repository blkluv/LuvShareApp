(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7687,3463],{23208:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/[id]",function(){return l(32645)}])},36595:function(e,t,l){"use strict";l.d(t,{Z:function(){return y}});var s=l(85893),n=l(41664),i=l.n(n),r=l(92882),a=l(67294),o=l(73359),d=l(50319),c=l(76781),u=l(34625),v=l(31618),m=l(86501);let h=()=>{let e=(0,r.qr)(e=>e.setProfiles),t=(0,r.qr)(e=>e.setCurrentProfile),l=(0,r.Fc)(e=>e.setProfileId),[n,i]=(0,a.useState)(!1),{chain:h}=(0,v.LN)(),{switchNetwork:x}=(0,v.g0)(),[p,g]=(0,a.useState)(!1),{address:f,connector:w}=(0,v.mA)(),{connectors:j,error:b,connectAsync:M}=(0,v.$4)(),{signMessageAsync:N,isLoading:y}=(0,v.QW)(),[C,{error:k,loading:A}]=(0,o.t)(c.bT,{fetchPolicy:"no-cache"}),[Z,{error:S,loading:P}]=(0,d.D)(c.bs),[T,{error:I,loading:O}]=(0,o.t)(c.$);(0,a.useEffect)(()=>{i(!0)},[]);let _=async()=>{try{var s,n,i,r,a,o,d,c,u;let v=await C({variables:{request:{address:f}}});if(!(null==v?void 0:null===(s=v.data)||void 0===s?void 0:null===(n=s.challenge)||void 0===n?void 0:n.text))return m.ZP.error("ERROR_MESSAGE");let h=await N({message:null==v?void 0:null===(i=v.data)||void 0===i?void 0:null===(r=i.challenge)||void 0===r?void 0:r.text}),x=await Z({variables:{request:{address:f,signature:h}}});localStorage.setItem("accessToken",null===(a=x.data)||void 0===a?void 0:a.authenticate.accessToken),localStorage.setItem("refreshToken",null===(o=x.data)||void 0===o?void 0:o.authenticate.refreshToken);let{data:p}=await T({variables:{request:{ownedBy:[f]}}});if((null==p?void 0:null===(d=p.profiles)||void 0===d?void 0:null===(c=d.items)||void 0===c?void 0:c.length)===0)return m.ZP.error("You have no lens profile yet, please create one");{let g=null==p?void 0:null===(u=p.profiles)||void 0===u?void 0:u.items,w=g[0];e(g),t(w),l(w.id)}}catch(j){}};return(null==w?void 0:w.id)?(0,s.jsx)("div",{children:(null==h?void 0:h.id)===u.Kj?(0,s.jsx)("button",{className:"flex-1 text-blue-700",onClick:()=>_(),children:n?"Log In":""}):(0,s.jsx)("button",{className:"flex-1 text-blue-700",onClick:()=>{x?x(u.Kj):m.ZP.error("Please change your network!")},children:"Switch Network"})}):(0,s.jsx)("button",{onClick:()=>{m.ZP.error("Log in to view profile",{duration:1e3})},className:"border-gray-800 text-blue-700 hover:text-gray-600 focus:text-black focus:outline-none",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})};var x=l(93832),p=l(28166),g=l(5434),f=l(14382),w=l(61998),j=l(1257),b=l(10116);let M=()=>{let e=(0,r.qr)(e=>e.currentProfile),t=(0,b.N)(e=>e.clearMessagesBadge),l=(0,b.N)(e=>e.viewedMessagesAtNs),n=(0,b.N)(e=>e.showMessagesBadge),o=(0,b.N)(e=>e.setShowMessagesBadge),{client:d}=(0,f.Z)(!0),c=(e,t)=>{if(!t)return!1;let l=(0,j.nB)(e);return!l||l.getTime()<t.getTime()&&t.getTime()<new Date().getTime()};return(0,a.useEffect)(()=>{let t;if(!d||!e)return;let s=async()=>{let t=await d.conversations.list();if(t.length<=0)return;let s=t.map(e=>e.topic),i=await d.apiClient.batchQuery(s.map(e=>({contentTopic:e,pageSize:1,direction:j.Sr.SORT_DIRECTION_DESCENDING}))),r=i.reduce((e,t)=>{var l,s;return t.length&&(null===(l=t[0])||void 0===l?void 0:l.timestampNs)&&(!e||(null===(s=t[0])||void 0===s?void 0:s.timestampNs)>e)?t[0].timestampNs:e},null),a=(0,j.nB)(null!=r?r:void 0),u=c(l.get(e.id),a);n.set(e.id,u),o(new Map(n))},i=async()=>{t&&await t.return(void 0)},r=t=>!window.location.pathname.startsWith("/messages")&&e.id===t,a=async s=>{for await(let i of t=await d.conversations.streamAllMessages())if(s(e.id)){let r=e.ownedBy!==i.senderAddress;if(r){let a=c(l.get(e.id),i.sent);n.set(e.id,a),o(new Map(n))}}};return s(),a(r),()=>{i()}},[d,null==e?void 0:e.id]),(0,s.jsxs)(i(),{href:"/messages",className:" min-w-[40px] items-start justify-center rounded-md md:flex",onClick:()=>{e&&t(e.id)},children:[(0,s.jsx)(w.Z,{className:"h-6 w-6 pb-1 text-blue-500 "}),n.get(null==e?void 0:e.id)?(0,s.jsx)("span",{className:"z-[6] h-2 w-2 rounded-full bg-red-500 text-red-500"}):null]})},N=()=>{let e=(0,r.qr)(e=>e.currentProfile),[t,l]=(0,a.useState)(!0);return(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"z-999 fixed bottom-0 left-0 right-0 z-[5] m-auto flex h-[70px] items-center justify-around overflow-hidden rounded-lg border-2 border-b-0 border-l border-r border-t border-blue-700 bg-white bg-gradient-to-b from-blue-100 to-transparent px-4 py-3 lg:w-[1100px] xl:w-[1200px]",children:[t?(0,s.jsx)(i(),{href:"/",children:(0,s.jsx)("button",{onClick:()=>{l(!1)},className:"border-gray-800 text-blue-500 hover:text-gray-100 focus:text-gray-100 focus:outline-none",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})}):(0,s.jsx)(i(),{href:"/",children:(0,s.jsx)("button",{onClick:()=>{l(!0)},className:"border-gray-800 text-blue-500 hover:text-gray-100 focus:text-gray-100 focus:outline-none",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})}),(0,s.jsx)("div",{children:(0,s.jsxs)(i(),{href:"/feed",children:[(0,s.jsx)(g.dnC,{className:"h-6 w-6 pb-1 text-blue-500"})," "]})}),(0,s.jsx)("div",{children:(0,s.jsxs)(i(),{href:"/latest",children:[(0,s.jsx)(x.Z,{className:"h-6 w-6 pb-1 text-blue-500"})," "]})}),(0,s.jsx)("div",{children:(0,s.jsxs)(i(),{href:"/listen",children:[(0,s.jsx)(p.Z,{className:"h-6 w-6 pb-1 text-blue-500"})," "]})}),(0,s.jsx)("div",{children:(0,s.jsx)(M,{})}),e?(0,s.jsx)(i(),{href:"/u/".concat(e.id),children:(0,s.jsx)("button",{className:"border-gray-800 text-blue-500 hover:text-gray-100 focus:text-gray-100 focus:outline-none",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})},e.id):(0,s.jsx)(h,{})]})})};var y=N},35827:function(e,t,l){"use strict";var s=l(85893),n=l(41366);l(67294);let i=()=>(0,s.jsxs)("div",{className:"mt-6 hidden xl:block",children:[(0,s.jsx)("p",{className:"mt-5 text-sm text-gray-400",children:"\xa9 2022 LensShare"}),(0,s.jsx)(n.rU,{href:"/terms",children:(0,s.jsx)("p",{className:"mt-1 cursor-pointer text-sm text-black hover:underline",children:"Terms of Service"})}),(0,s.jsx)(n.rU,{href:"/privacy",children:(0,s.jsx)("p",{className:"mt-1 cursor-pointer text-sm text-black hover:underline",children:"Privacy Policy"})})]});t.Z=i},21094:function(e,t,l){"use strict";l.d(t,{Me:function(){return n},ST:function(){return i},VK:function(){return r}});var s=l(85893);let n=e=>{let{children:t,className:l="",classNameChild:n=""}=e;return(0,s.jsx)("div",{className:"container mx-auto max-w-screen-xl grow px-0 pb-2 pt-8 sm:px-5 ".concat(l),children:(0,s.jsx)("div",{className:"grid grid-cols-12 lg:gap-8 ".concat(n),children:t})})},i=e=>{let{children:t,className:l=""}=e;return(0,s.jsx)("div",{className:"col-span-12 md:col-span-12 lg:col-span-4 ".concat(l),children:t})},r=e=>{let{children:t,className:l=""}=e;return(0,s.jsx)("div",{className:"col-span-12 mb-5 md:col-span-12 lg:col-span-8 ".concat(l),children:t})}},50680:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return c}});var s=l(85893),n=l(29780),i=l(9008),r=l.n(i),a=l(41664),o=l.n(a);l(67294);var d=l(34625);function c(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r(),{children:(0,s.jsx)("title",{children:"404"})}),(0,s.jsxs)("div",{className:"mt-10 flex h-full flex-col items-center justify-start md:mt-20",children:[(0,s.jsx)("img",{src:"".concat(d.Fv,"/images/icon.png"),alt:d.iC,draggable:!1,height:200,width:200}),(0,s.jsxs)("div",{className:"py-10 text-center",children:[(0,s.jsx)("h1",{className:"mb-4 text-3xl font-bold",children:"404"}),(0,s.jsx)("div",{className:"mb-6",children:"This page could not be found."}),(0,s.jsx)(o(),{href:"/",children:(0,s.jsx)(n.z,{children:"Go Home"})})]})]})]})}},32645:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return en}});var s=l(85893),n=l(92882),i=l(11163),r=l(68980),a=l(50680),o=l(21094),d=l(11281),c=l(29451),u=l(34625),v=l(11761),m=l(27484),h=l.n(m),x=l(89454),p=l(4108),g=l(50063),f=l(67294),w=l(64208),j=l(58806),b=l(5434),M=l(13377),N=l(44318),y=l(21273),C=l(25675),k=l.n(C),A=l(9747),Z=l(22257),S=l(47445),P=l(58533),T=l(41664),I=l.n(T);let O=e=>{var t,l,n;let{publicationId:i}=e,r={publicationId:i,limit:10},{data:a,loading:o,error:d,fetchMore:u}=(0,y.BI)({variables:{request:r},skip:!i}),v=null==a?void 0:null===(t=a.whoCollectedPublication)||void 0===t?void 0:t.items,m=null==a?void 0:null===(l=a.whoCollectedPublication)||void 0===l?void 0:l.pageInfo,h=(null==m?void 0:m.next)&&(null==v?void 0:v.length)!==m.totalCount,x=async()=>{await u({variables:{request:{...r,cursor:null==m?void 0:m.next}}})};return o?(0,s.jsx)(A.Z,{message:"Loading collectors"}):(null==v?void 0:v.length)===0?(0,s.jsx)("div",{className:"p-5",children:"No Collectors"}):(0,s.jsx)("div",{className:"display:absolute max-h-[80vh] overflow-auto overflow-y-auto",id:"scrollableDiv",children:(0,s.jsx)(P.Z,{dataLength:null!==(n=null==v?void 0:v.length)&&void 0!==n?n:0,scrollThreshold:.5,hasMore:h,next:x,loader:(0,s.jsx)(S.Z,{}),scrollableTarget:"scrollableDiv",children:(0,s.jsx)("div",{className:"divide-y",children:null==v?void 0:v.map(e=>{var t,l,n,i,r;return(0,s.jsx)(I(),{href:"/u/".concat(null==e?void 0:null===(t=e.defaultProfile)||void 0===t?void 0:t.id),children:(0,s.jsx)("div",{className:"p-5",children:(null==e?void 0:e.defaultProfile)?(0,s.jsxs)("div",{className:"flex cursor-pointer items-center gap-3 rounded p-2 font-semibold",children:[(0,s.jsx)("div",{children:(0,s.jsx)(k(),{width:40,height:40,className:"cursor-pointer rounded-full",src:(0,Z.Z)(null==e?void 0:e.defaultProfile),alt:null==e?void 0:null===(l=e.defaultProfile)||void 0===l?void 0:l.handle})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-md flex items-center gap-1 font-bold lowercase text-primary",children:null==e?void 0:null===(n=e.defaultProfile)||void 0===n?void 0:n.name}),(0,s.jsxs)("p",{className:"text-xs capitalize text-gray-400",children:[(0,c.Z)(null==e?void 0:null===(i=e.defaultProfile)||void 0===i?void 0:i.handle)," ",""]})]})]}):null},null==e?void 0:e.address)},null==e?void 0:null===(r=e.defaultProfile)||void 0===r?void 0:r.id)})})})})},_=e=>{var t,l,n,i,r,a,o,d,c,u,v,m,h;let{publication:x}=e,[y,C]=(0,f.useState)(!1),[k,A]=(0,f.useState)(!1),[Z,S]=(0,f.useState)(!1),P="Mirror"===x.__typename,T=P?null==x?void 0:null===(t=x.mirrorOf)||void 0===t?void 0:null===(l=t.stats)||void 0===l?void 0:l.commentsTotal:null==x?void 0:null===(n=x.stats)||void 0===n?void 0:n.commentsTotal,I=P?null==x?void 0:null===(i=x.mirrorOf)||void 0===i?void 0:null===(r=i.stats)||void 0===r?void 0:r.totalAmountOfMirrors:null==x?void 0:null===(a=x.stats)||void 0===a?void 0:a.totalAmountOfMirrors,_=P?null==x?void 0:null===(o=x.mirrorOf)||void 0===o?void 0:null===(d=o.stats)||void 0===d?void 0:d.totalUpvotes:null==x?void 0:null===(c=x.stats)||void 0===c?void 0:c.totalUpvotes,F=P?null==x?void 0:null===(u=x.mirrorOf)||void 0===u?void 0:null===(v=u.stats)||void 0===v?void 0:v.totalAmountOfCollects:null==x?void 0:null===(m=x.stats)||void 0===m?void 0:m.totalAmountOfCollects,B=P?null==x?void 0:null===(h=x.mirrorOf)||void 0===h?void 0:h.id:null==x?void 0:x.id;return(0,s.jsxs)("div",{className:"lt-text-gray-500 flex flex-wrap items-center gap-6 py-3 text-sm sm:gap-8",children:[I>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{"data-testid":"comment-stats",children:[(0,s.jsx)("b",{className:"text-black dark:text-blue-700",children:(0,p.Z)(T)})," "]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{C(!0)},"data-testid":"mirror-stats",children:[(0,s.jsx)("b",{className:"text-black dark:text-blue-700",children:(0,p.Z)(I)})," "]}),(0,s.jsx)(w.u,{title:"Mirrored by",icon:(0,s.jsx)(N.Z,{className:"text-brand h-5 w-5"}),show:y,onClose:()=>C(!1),children:(0,s.jsx)(O,{publicationId:B})})]}),_>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{A(!0)},"data-testid":"like-stats",children:[(0,s.jsx)("b",{className:"text-black dark:text-blue-700",children:(0,p.Z)(_)})," "]}),(0,s.jsx)(w.u,{title:"Liked by",icon:(0,s.jsx)(g.Z,{className:"text-brand h-5 w-5"}),show:k,onClose:()=>A(!1),children:(0,s.jsx)(M.Z,{showCount:!0,publication:B})})]}),F>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{S(!0)},"data-testid":"collect-stats",children:[(0,s.jsx)("b",{className:"text-black dark:text-blue-700",children:(0,p.Z)(F)})," "]}),(0,s.jsx)(w.u,{title:"Collected by",icon:(0,s.jsx)(b.m4,{className:"text-brand h-5 w-5"}),show:Z,onClose:()=>S(!1),children:(0,s.jsx)(j.Z,{publicationId:B})})]})]})};var F=l(49167),B=l(49117),E=l(92304);let L=e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);return t.replace(/-/g," ")};var q=l(87890);let R=e=>{var t,l,n,i,r,a,o,d,c,u;let{publication:v,profile:m}=e,p="Mirror"===v.__typename,g=p?null==v?void 0:null===(t=v.mirrorOf)||void 0===t?void 0:t.createdAt:null==v?void 0:v.createdAt,f=p?null==v?void 0:null===(l=v.mirrorOf)||void 0===l?void 0:null===(n=l.stats)||void 0===n?void 0:n.totalAmountOfMirrors:null==v?void 0:null===(i=v.stats)||void 0===i?void 0:i.totalAmountOfMirrors,w=p?null==v?void 0:null===(r=v.mirrorOf)||void 0===r?void 0:null===(a=r.stats)||void 0===a?void 0:a.totalUpvotes:null==v?void 0:null===(o=v.stats)||void 0===o?void 0:o.totalUpvotes,j=p?null==v?void 0:null===(d=v.mirrorOf)||void 0===d?void 0:null===(c=d.stats)||void 0===c?void 0:c.totalAmountOfCollects:null==v?void 0:null===(u=v.stats)||void 0===u?void 0:u.totalAmountOfCollects;return(0,s.jsxs)("article",{className:"p-5","data-testid":"publication-".concat(v.id),children:[(0,s.jsx)(q.Z,{profile:m,publication:v,showType:!0}),(0,s.jsxs)("div",{children:[(0,s.jsx)(F.Z,{profile:m,publication:v}),(0,s.jsx)("div",{className:"ml-[53px]",children:(null==v?void 0:v.hidden)?(0,s.jsx)(B.Z,{type:v.__typename}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.Z,{profile:m,publication:v}),(0,s.jsxs)("div",{className:"lt-text-blue-500 my-3 text-sm",children:[(0,s.jsx)("span",{children:h()(new Date(g)).format("hh:mm A \xb7 MMM D, YYYY")}),(null==v?void 0:v.appId)?(0,s.jsxs)("span",{children:[" \xb7 Posted via ",L(null==v?void 0:v.appId)]}):null]}),(f>0||w>0||j>0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"divider"}),(0,s.jsx)(_,{publication:v})]}),(0,s.jsx)("div",{className:"divider"}),(0,s.jsx)(x.Z,{publication:v,showCount:!0})]})})]})]})};var U=l(52363),z=l(40703),D=l(5276),W=l(74872);let G=e=>{var t,l,i,a,o;let{publication:d}=e,c=(null==d?void 0:d.__typename)==="Mirror"?null==d?void 0:null===(t=d.mirrorOf)||void 0===t?void 0:t.id:null==d?void 0:d.id,u=(0,n.qr)(e=>e.currentProfile),[m,h]=(0,f.useState)(!0),[x,p]=(0,f.useState)(!1),g={commentsOf:c,customFilters:[r.U9Q.Gardeners],commentsOfOrdering:r.yHu.Ranking,commentsRankingFilter:r.Ajz.NoneRelevant,limit:30},w=u?{profileId:null==u?void 0:u.id}:null,j=null!==(a=null==u?void 0:u.id)&&void 0!==a?a:null,{data:b,fetchMore:M}=(0,r.WOi)({variables:{request:g,reactionRequest:w,profileId:j},skip:!c}),N=null!==(o=null==b?void 0:null===(l=b.publications)||void 0===l?void 0:l.items)&&void 0!==o?o:[],y=null==b?void 0:null===(i=b.publications)||void 0===i?void 0:i.pageInfo,C=null==N?void 0:N.length,{observe:k}=(0,D.Y)({onChange:async e=>{let{inView:t}=e;t&&m&&await M({variables:{request:{...g,cursor:null==y?void 0:y.next},reactionRequest:w,profileId:j}}).then(e=>{var t,l;let{data:s}=e;h((null==s?void 0:null===(t=s.publications)||void 0===t?void 0:null===(l=t.items)||void 0===l?void 0:l.length)>0)})}});return 0===C?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"cursor-pointer p-5 text-center",onClick:()=>{p(!x)},dataTestId:"none-relevant-feed",children:x?"Hide more comments":"Show more comments"}),x?(0,s.jsxs)(v.Z,{className:"divide-y-[2px] divide-blue-700",children:[null==N?void 0:N.map((e,t)=>(null==e?void 0:e.__typename)==="Comment"&&e.hidden?null:(0,s.jsx)(W.Z,{isFirst:0===t,profile:j,isLast:t===N.length-1,publication:e,showType:!1},"".concat(c,"_").concat(t))),m&&(0,s.jsx)("span",{ref:k})]}):null]})};var K=l(38064),H=l(61896),J=l(66167),V=l(67909);let Q=e=>{var t,l,n,i,a,o,d;let{publication:u}=e,m=null!==(d=null==u?void 0:null===(t=u.metadata)||void 0===t?void 0:null===(l=t.content)||void 0===l?void 0:l.match(K.i.allHandles,"$1[~$2]"))&&void 0!==d?d:[],h=m.map(e=>{var t;let l=e.trim().replace("@","").replace("'s","");return l.length>9?e.trim().replace("'s","").replace(K.i.santiizeHandle,""):(0,c.Z)(null==u?void 0:null===(t=u.profile)||void 0===t?void 0:t.handle)}),x=h.reduce((e,t)=>(e.includes(t)||e.push(t),e),[]),{data:p,loading:g,error:f}=(0,r.zip)({variables:{request:{handles:x.slice(0,5)}},skip:m.length<=0});return m.length<=0?null:g?(0,s.jsxs)(v.Z,{as:"aside",className:"space-y-4 rounded-3xl p-5",children:[(0,s.jsx)(H.Z,{showFollow:!0}),(0,s.jsx)(H.Z,{showFollow:!0}),(0,s.jsx)(H.Z,{showFollow:!0}),(0,s.jsx)(H.Z,{showFollow:!0}),(0,s.jsx)(H.Z,{showFollow:!0})]}):(null==p?void 0:null===(n=p.profiles)||void 0===n?void 0:null===(i=n.items)||void 0===i?void 0:i.length)===0?null:(0,s.jsxs)(v.Z,{as:"aside",className:"space-y-4 rounded-3xl bg-[#F2F6F9] p-5",dataTestId:"relevant-profiles",children:[(0,s.jsx)(J.B,{title:"Failed to load relevant people",error:f}),null==p?void 0:null===(a=p.profiles)||void 0===a?void 0:null===(o=a.items)||void 0===o?void 0:o.map((e,t)=>(0,s.jsx)("div",{className:"truncate",children:(0,s.jsx)(V.Z,{profile:e,isFollowing:e.isFollowedByMe,followUnfollowPosition:t+1,showUserPreview:!1,showFollow:!0})},null==e?void 0:e.id))]})};var Y=l(23);let $=e=>{let{name:t,uri:l,hash:n}=e;return(0,s.jsx)("div",{className:"px-5 py-3",children:(0,s.jsxs)(I(),{href:l,className:"space-y-1",target:"_blank",rel:"noreferrer noopener",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"text-[10px]",children:t}),(0,s.jsx)(Y.Z,{className:"h-4 w-4"})]}),(0,s.jsx)("div",{className:"truncate text-xs",children:n})]})})},X=e=>{var t,l,n,i,r;let{publication:a}=e,o=(null==a?void 0:a.__typename)==="Mirror"?null===(t=a.mirrorOf.onChainContentURI)||void 0===t?void 0:t.split("/").pop():null===(l=a.onChainContentURI)||void 0===l?void 0:l.split("/").pop(),d=(null==a?void 0:a.__typename)==="Mirror"?null===(n=a.mirrorOf)||void 0===n?void 0:n.collectNftAddress:null==a?void 0:a.collectNftAddress,c=(null==o?void 0:o.length)===43,m=(null==o?void 0:o.length)===46||(null==o?void 0:o.length)===59;return c||m||d?(0,s.jsx)(v.Z,{as:"aside",dataTestId:"onchain-meta",children:(0,s.jsxs)("div",{className:"lt-text-gray-500 divide-y rounded-xl border-2 border-blue-700 bg-[#F2F6F9] dark:divide-blue-700",children:[c?(0,s.jsx)($,{name:"ARWEAVE TRANSACTION",uri:"https://arweave.app/tx/".concat(o),hash:o}):null,(null==a?void 0:a.isDataAvailability)?(0,s.jsx)($,{name:"MOMOKA PROOF",uri:"https://momoka.lens.xyz/tx/".concat(null===(i=a.dataAvailabilityProofs)||void 0===i?void 0:i.split("/").pop()),hash:null===(r=a.dataAvailabilityProofs)||void 0===r?void 0:r.split("/").pop()}):null,m?(0,s.jsx)($,{name:"IPFS TRANSACTION",uri:"".concat(u.Gs).concat(o),hash:o}):null,d?(0,s.jsx)($,{name:"NFT ADDRESS",uri:"".concat(u.Bq,"/token/").concat(d),hash:d}):null]})}):null};var ee=l(35827),et=l(36595),el=l(9507);let es=e=>{var t,l,m;let h=(0,n.qr)(e=>e.currentProfile),{query:{id:x}}=(0,i.useRouter)(),{data:p,loading:g,error:f}=(0,r.Kwl)({variables:{request:{publicationId:x},reactionRequest:h?{profileId:null==h?void 0:h.id}:null,profileId:null!==(m=null==h?void 0:h.id)&&void 0!==m?m:null},skip:!x});if(f)return(0,s.jsx)(a.default,{});if(g||!p)return(0,s.jsx)(el.Z,{});if(!p.publication)return(0,s.jsx)(a.default,{});let{publication:w}=p;return null==w||null===(t=w.canComment)||void 0===t||t.result,(0,s.jsxs)("div",{children:[(0,s.jsxs)(o.Me,{children:[(0,s.jsx)(d.Z,{title:w.__typename&&(null==w?void 0:null===(l=w.profile)||void 0===l?void 0:l.handle)?"".concat(w.__typename," by @").concat((0,c.Z)(w.profile.handle)," • ").concat(u.iC):u.iC}),(0,s.jsxs)(o.VK,{className:"h-[vh-80] space-y-5 rounded-xl bg-[#F2F6F9]",children:[(0,s.jsx)(v.Z,{children:(0,s.jsx)(R,{profile:e,publication:w})}),h&&!(null==w?void 0:w.hidden),(0,s.jsx)(U.Z,{publication:w}),(0,s.jsx)(z.Z,{publication:w}),(0,s.jsx)(G,{publication:w})]}),(0,s.jsxs)(o.ST,{className:"space-y-5",children:[(0,s.jsx)(Q,{publication:w}),(0,s.jsx)(X,{publication:w}),(0,s.jsx)(ee.Z,{})]})]}),(0,s.jsx)(et.Z,{})]})};var en=es},10116:function(e,t,l){"use strict";l.d(t,{N:function(){return c},G:function(){return d}});let s=e=>{let t=[...Array.from(new Map(e.map(e=>[e.id,e])).values())];return t.sort((e,t)=>{var l,s,n,i;return(null!==(n=null===(l=t.sent)||void 0===l?void 0:l.getTime())&&void 0!==n?n:0)-(null!==(i=null===(s=e.sent)||void 0===s?void 0:s.getTime())&&void 0!==i?i:0)}),null!=t?t:[]};var n=l(1257),i=l(73445),r=l(782),a=l(45341),o=l(34625);let d=(0,i.Ue)(e=>({client:void 0,setClient:t=>e(()=>({client:t})),conversations:new Map,setConversations:t=>e(()=>({conversations:t})),addConversation:(t,l)=>{e(e=>{let s=new Map(e.conversations);return s.set(t,l),{conversations:s}})},chatProvider:o.N5.PUSH,setChatProvider:t=>e(()=>({chatProvider:t})),queuedMessages:new Map,addQueuedMessage:(t,l)=>{e(e=>{let s=new Map(e.queuedMessages),n=e.queuedMessages.get(t)||[],i=[...n,l];return i.sort((e,t)=>t.sent.getTime()-e.sent.getTime()),s.set(t,i),{queuedMessages:s}})},removeQueuedMessage:(t,l)=>{e(e=>{let s=new Map(e.queuedMessages),n=e.queuedMessages.get(t)||[],i=n.filter(e=>e.id!==l);return s.set(t,i),{queuedMessages:s}})},updateQueuedMessage:(t,l,s)=>{e(e=>{let n=new Map(e.queuedMessages),i=e.queuedMessages.get(t)||[],r=i.filter(e=>e.id!==l);return i.length!==r.length?(r.push(s),r.sort((e,t)=>t.sent.getTime()-e.sent.getTime()),n.set(t,r),{queuedMessages:n}):{queuedMessages:e.queuedMessages}})},messages:new Map,addMessages:(t,l)=>{let n=0;return e(e=>{let i=new Map(e.messages),r=e.messages.get(t)||[],a=s([...r,...l]);return(n=a.length-r.length)?(i.set(t,a),{messages:i}):{messages:e.messages}}),n},hasSyncedMessages:!1,setHasSyncedMessages:t=>e(()=>({hasSyncedMessages:t})),previewMessages:new Map,setPreviewMessages:t=>e(()=>({previewMessages:t})),ensNames:new Map,setEnsNames:t=>e(()=>({ensNames:t})),previewMessagesNonLens:new Map,setPreviewMessagesNonLens:t=>e(()=>({previewMessagesNonLens:t})),selectedProfileId:"",setSelectedProfileId:t=>e(()=>({selectedProfileId:t})),selectedTab:"All",setSelectedTab:t=>e(()=>({selectedTab:t})),syncedProfiles:new Set,addSyncedProfiles:t=>e(e=>{let{syncedProfiles:l}=e;return{syncedProfiles:new Set([...l,...t])}}),unsyncProfile:t=>e(e=>{let{syncedProfiles:l}=e;return{syncedProfiles:new Set([...l].filter(e=>e!==t))}}),reset:()=>e(e=>({...e,conversations:new Map,messages:new Map,messageProfiles:new Map,previewMessages:new Map,selectedTab:"All",previewMessagesNonLens:new Map,ensNames:new Map}))})),c=(0,i.Ue)((0,r.tJ)(e=>({viewedMessagesAtNs:new Map,showMessagesBadge:new Map,setShowMessagesBadge:t=>e(()=>({showMessagesBadge:t})),clearMessagesBadge:t=>{e(e=>{let l=new Map(e.viewedMessagesAtNs);if(l.set(t,(0,n.$)(new Date)),!e.showMessagesBadge.get(t))return{viewedMessagesAtNs:l};let s=new Map(e.showMessagesBadge);return s.set(t,!1),{viewedMessagesAtNs:l,showMessagesBadge:s}})},unsentMessages:new Map,setUnsentMessage:(t,l)=>e(e=>{let s=new Map(e.unsentMessages);return l?s.set(t,l):s.delete(t),{unsentMessages:s}}),setUnsentMessages:t=>e(()=>({unsentMessages:t}))}),{name:a.d.MessageStore,storage:{setItem(e,t){let l=JSON.stringify({...t,state:{...t.state,viewedMessagesAtNs:Array.from(t.state.viewedMessagesAtNs),showMessagesBadge:Array.from(t.state.showMessagesBadge),unsentMessages:Array.from(t.state.unsentMessages)}});localStorage.setItem(e,l)},getItem:e=>{let t=localStorage.getItem(e);if(!t)return null;let l=JSON.parse(t);return l.state.viewedMessagesAtNs=new Map(l.state.viewedMessagesAtNs),l.state.showMessagesBadge=new Map(l.state.showMessagesBadge),l.state.unsentMessages=new Map(l.state.unsentMessages),l},removeItem(e){localStorage.removeItem(e)}}}))},14382:function(e,t,l){"use strict";l.d(t,{T:function(){return g}});var s=l(45341),n=l(34625),i=l(1257),r=l(67294),a=l(92882),o=l(10116),d=l(88559),c=l(52942),u=l(48764).Buffer;let v="binary",m=e=>"xmtp:".concat(n.Jy,":keys:").concat(e),h=e=>{let t=localStorage.getItem(m(e));return t?u.from(t,v):null},x=(e,t)=>{localStorage.setItem(m(e),u.from(t).toString(v))},p=e=>{localStorage.removeItem(m(e))},g=()=>{let{data:e}=(0,c.Z)(),t=(0,o.G)(e=>e.client),l=(0,o.G)(e=>e.setClient),n=(0,r.useCallback)(async()=>{e&&p(await e.getAddress()),t&&l(void 0),localStorage.removeItem(s.d.MessageStore),localStorage.removeItem(s.d.AttachmentCache),localStorage.removeItem(s.d.AttachmentStore)},[e,t]);return n};t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.qr)(e=>e.currentProfile),l=(0,o.G)(e=>e.client),s=(0,o.G)(e=>e.setClient),[u,v]=(0,r.useState)(),{data:m,isLoading:p}=(0,c.Z)();return(0,r.useEffect)(()=>{let r=async()=>{if(m&&!l&&t){let r=h(await m.getAddress());if(!r){if(e)return;v(!0),r=await i.KU.getKeys(m,{env:n.Jy,appVersion:n.iC+"/"+n.Ji,persistConversations:!1,skipContactPublishing:!0}),x(await m.getAddress(),r)}let a=await i.KU.create(null,{env:n.Jy,appVersion:n.iC+"/"+n.Ji,privateKeyOverride:r,persistConversations:!0});a.registerCodec(new d.AttachmentCodec),a.registerCodec(new d.RemoteAttachmentCodec),s(a),v(!1)}else v(!1)};r(),m&&t||s(void 0)},[t]),{client:l,loading:p||u}}},95856:function(){},61998:function(e,t,l){"use strict";var s=l(67294);let n=s.forwardRef(function({title:e,titleId:t,...l},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},l),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))});t.Z=n},93832:function(e,t,l){"use strict";var s=l(67294);let n=s.forwardRef(function({title:e,titleId:t,...l},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},l),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"}))});t.Z=n},28166:function(e,t,l){"use strict";var s=l(67294);let n=s.forwardRef(function({title:e,titleId:t,...l},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},l),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))});t.Z=n}},function(e){e.O(0,[9498,1228,6556,8179,4355,5937,9412,1664,1618,1098,1257,5675,2697,8451,1889,3775,2438,7536,5678,1318,8476,4156,23,5331,6781,7635,7331,8439,4638,1488,3261,8151,9774,2888,179],function(){return e(e.s=23208)}),_N_E=e.O()}]);