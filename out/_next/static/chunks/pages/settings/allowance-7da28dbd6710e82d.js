(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{92587:function(e,l,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/allowance",function(){return o(47252)}])},47252:function(e,l,o){"use strict";o.r(l),o.d(l,{default:function(){return R}});var n=o(85893),r=o(67294),t=o(50680),s=o(92882),a=o(741),d=o(41664),i=o.n(d),c=o(29780),u=o(64208),m=o(33962),h=o(49174),v=o(68980);let w=e=>{switch(e){case v.pYo.MultirecipientFeeCollectModule:return{name:"Multirecipient Paid Collect",field:"collectModule"};case v.pYo.SimpleCollectModule:return{name:"Basic Collect",field:"collectModule"};case v.pYo.RevertCollectModule:return{name:"No Collect",field:"collectModule"};case v.wKL.FeeFollowModule:return{name:"Fee Follow",field:"followModule"};case v._9N.FollowerOnlyReferenceModule:return{name:"Follower Only Reference",field:"referenceModule"};default:return{name:e,field:"collectModule"}}},x=r.forwardRef(function({title:e,titleId:l,...o},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":l},o),e?r.createElement("title",{id:l},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))});var f=o(78680),j=o(86501),p=o(63750),b=o(31618);let g=e=>{let{title:l="Allow",module:o,allowed:t,setAllowed:s}=e,[a,d]=(0,r.useState)(!1),[i,{loading:g}]=(0,v.Dwi)(),M=e=>{},{data:y,isLoading:N,sendTransaction:C}=(0,b.pQ)({onError:M}),{isLoading:k}=(0,b.BX)({hash:null==y?void 0:y.hash,onSuccess:()=>{j.ZP.success(t?"Module disabled successfully!":"Module enabled successfully!"),d(!1),s(!t)},onError:M}),_=(e,l,n)=>{i({variables:{request:{currency:e,value:l,[w(o.module).field]:n}}}).then(e=>{var l;let o=null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.generateModuleCurrencyApprovalData;null==C||C({account:null==o?void 0:o.from,to:null==o?void 0:o.to,data:null==o?void 0:o.data})})};return t?(0,n.jsx)(c.z,{variant:"warning",icon:g||N||k?(0,n.jsx)(m.$,{variant:"warning",size:"xs"}):(0,n.jsx)(x,{className:"h-4 w-4"}),onClick:()=>_(o.currency,"0",o.module),children:"Revoke"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.z,{icon:(0,n.jsx)(f.Z,{className:"h-4 w-4"}),onClick:()=>d(!a),children:l}),(0,n.jsx)(u.u,{title:"Warning",icon:(0,n.jsx)(p.Vgl,{className:"h-5 w-5 text-yellow-500"}),show:a,onClose:()=>d(!1),children:(0,n.jsxs)("div",{className:"space-y-3 p-5",children:[(0,n.jsx)(h.j,{title:"Handle with care!",message:(0,n.jsxs)("div",{className:"leading-6",children:["Please be aware that by allowing this module, the amount indicated will be automatically deducted when you ",(0,n.jsx)("b",{children:"collect"})," ","and ",(0,n.jsx)("b",{children:"super follow"}),"."]})}),(0,n.jsx)(c.z,{icon:g||N||k?(0,n.jsx)(m.$,{size:"xs"}):(0,n.jsx)(f.Z,{className:"h-4 w-4"}),onClick:()=>_(o.currency,Number.MAX_SAFE_INTEGER.toString(),o.module),children:l})]})})]})};var M=o(11761),y=o(34625);let N=e=>{let{module:l}=e,[o,t]=(0,r.useState)((null==l?void 0:l.allowance)!=="0x00");return(0,n.jsxs)(M.Z,{className:"block items-center justify-between p-5 sm:flex",forceRounded:!0,children:[(0,n.jsxs)("div",{className:"mb-3 mr-1.5 overflow-hidden sm:mb-0",children:[(0,n.jsx)("div",{className:"whitespace-nowrap font-bold",children:w(null==l?void 0:l.module).name}),(0,n.jsx)(i(),{href:"".concat(y.Bq,"/address/").concat(null==l?void 0:l.contractAddress),className:"lt-text-gray-500 truncate text-sm",target:"_blank",rel:"noreferrer noopener",children:null==l?void 0:l.contractAddress})]}),(0,n.jsx)(g,{module:l,allowed:o,setAllowed:t})]},null==l?void 0:l.module)},C=e=>{var l;let{allowance:o}=e;return(0,n.jsx)("div",{className:"space-y-4 p-5",children:null==o?void 0:null===(l=o.approvedModuleAllowanceAmount)||void 0===l?void 0:l.map(e=>(null==e?void 0:e.module)===v.pYo.RevertCollectModule?"":(0,n.jsx)(N,{module:e},null==e?void 0:e.contractAddress))})};var k=o(21094),_=o(11281),E=o(9747);let F=e=>({currencies:[e],collectModules:[v.pYo.SimpleCollectModule,v.pYo.RevertCollectModule,v.pYo.MultirecipientFeeCollectModule],followModules:[v.wKL.FeeFollowModule],referenceModules:[v._9N.FollowerOnlyReferenceModule]}),A=()=>{let e=(0,s.qr)(e=>e.currentProfile),[l,o]=(0,r.useState)(!1),{data:d,loading:i,error:c}=(0,v.u64)(),{data:u,loading:m,error:h,refetch:w}=(0,v.Ort)({variables:{request:F(y.tP)},skip:!(null==e?void 0:e.id)||i});return h||c||!e?(0,n.jsx)(t.default,{}):(0,n.jsxs)(k.Me,{children:[(0,n.jsx)(_.Z,{title:"Allowance settings â€¢ ".concat(y.iC)}),(0,n.jsx)(k.ST,{children:(0,n.jsx)(a.Z,{})}),(0,n.jsx)(k.VK,{children:(0,n.jsxs)(M.Z,{children:[(0,n.jsxs)("div",{className:"mx-5 mt-5",children:[(0,n.jsxs)("div",{className:"space-y-5",children:[(0,n.jsx)("div",{className:"text-lg font-bold",children:"Allow / Revoke modules"}),(0,n.jsx)("p",{children:"In order to use collect feature you need to allow the module you use, you can allow and revoke the module anytime."})]}),(0,n.jsx)("div",{className:"divider my-5"}),(0,n.jsx)("div",{className:"label mt-6",children:"Select Currency"}),(0,n.jsx)("select",{className:"focus:border-brand-500 focus:ring-brand-400 w-full rounded-xl border border-gray-300 bg-white outline-none dark:border-gray-700 ",onChange:e=>{o(!0),w({request:F(e.target.value)}).finally(()=>o(!1))},children:i?(0,n.jsx)("option",{children:"Loading..."}):null==d?void 0:d.enabledModuleCurrencies.map(e=>(0,n.jsx)("option",{value:e.address,children:e.name},e.address))})]}),m||i||l?(0,n.jsx)("div",{className:"py-5",children:(0,n.jsx)(E.Z,{})}):(0,n.jsx)(C,{allowance:u})]})})]})};var R=A},78680:function(e,l,o){"use strict";var n=o(67294);let r=n.forwardRef(function({title:e,titleId:l,...o},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":l},o),e?n.createElement("title",{id:l},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});l.Z=r}},function(e){e.O(0,[9498,1228,1664,1618,1098,1257,5675,2697,8451,1889,3775,2438,6781,7635,3463,8413,9774,2888,179],function(){return e(e.s=92587)}),_N_E=e.O()}]);