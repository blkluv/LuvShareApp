(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{73406:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return r(27600)}])},66167:function(e,t,r){"use strict";r.d(t,{B:function(){return n}});var a=r(85893);let n=e=>{let{title:t,error:r,className:n=""}=e;return r?(0,a.jsxs)("div",{className:"space-y-1 rounded-xl border-2 border-red-500/50 bg-red-50 p-4 dark:bg-red-900/10 ".concat(n),children:[t&&(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:t}),(0,a.jsx)("div",{className:"text-sm text-red-700 dark:text-red-200",children:null==r?void 0:r.message})]}):null}},16769:function(e,t,r){"use strict";var a=r(85893),n=r(86010),s=r(11163);let l=e=>{let{name:t,icon:r,active:l,type:i,count:o,showOnSm:c=!1,className:d="",onClick:u}=e,m=(0,s.useRouter)();return(0,a.jsxs)("button",{type:"button",onClick:()=>{i&&m.replace({query:{...m.query,type:i}},void 0,{shallow:!0}),u()},className:(0,n.Z)({"text-brand bg-brand-100 dark:bg-brand-300/20":l},"flex items-center space-x-2 rounded-lg border-2 border-blue-500 px-4 py-2 text-sm font-medium text-blue-500/90 sm:px-3 sm:py-1.5","hover:bg-brand-100/80 dark:hover:bg-brand-300/30 justify-center",d),"data-testid":"tab-button-".concat(t.toLowerCase()),"aria-label":t,children:[r,(0,a.jsx)("span",{className:(0,n.Z)({"hidden sm:block":!c}),children:t}),o&&(0,a.jsx)("span",{className:(0,n.Z)(l?"bg-brand-500 dark:bg-brand-500/80 text-white dark:text-white":"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-blue-600/50","ml-2 rounded-2xl px-2 py-0.5 text-xs font-bold"),children:o})]})};t.Z=l},741:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var a=r(85893),n=r(92882),s=r(67909),l=r(41113),i=r(67294);let o=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"}))}),c=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"}))}),d=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33"}))});var u=r(28771);let m=i.forwardRef(function({title:e,titleId:t,...r},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"}))});var v=r(63750),p=r(86010),h=r(41664),f=r.n(h),x=r(11163);let b=e=>{let{children:t,current:r,url:n}=e;return(0,a.jsx)(f(),{href:n,className:(0,p.Z)({"bg-brand-100 dark:bg-brand-300/20 text-brand font-bold":r},"hover:bg-brand-100/80 dark:hover:bg-brand-300/30","flex items-center space-x-2 rounded-lg px-3 py-2"),children:t})},g=e=>{var t;let{items:r}=e,{pathname:n}=(0,x.useRouter)(),s=r.map(e=>({...e,enabled:null===(t=e.enabled)||void 0===t||t}));return(0,a.jsx)("div",{className:"mb-4 space-y-1.5 px-3 sm:px-0",children:s.map(e=>(null==e?void 0:e.enabled)?(0,a.jsxs)(b,{current:n===e.url||e.active,url:e.url,children:[e.icon,(0,a.jsx)("div",{children:e.title})]},e.title):null)})};var w=r(36595);let j=()=>{let e=(0,n.qr)(e=>e.currentProfile);return(0,a.jsxs)("div",{className:"mb-4 space-y-1.5 px-3 sm:px-0",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{className:"pb-3",children:(0,a.jsx)(s.Z,{profile:e,showUserPreview:!1})}),(0,a.jsx)(g,{items:[{title:"Profile",icon:(0,a.jsx)(l.Z,{className:"h-4 w-4"}),url:"/settings"},{title:"Account",icon:(0,a.jsx)(o,{className:"h-4 w-4"}),url:"/settings/account"},{title:"Interests",icon:(0,a.jsx)(c,{className:"h-4 w-4"}),url:"/settings/interests"},{title:"Dispatcher",icon:(0,a.jsx)(d,{className:"h-4 w-4"}),url:"/settings/dispatcher"},{title:"Allowance",icon:(0,a.jsx)(u.Z,{className:"h-4 w-4"}),url:"/settings/allowance"},{title:"Cleanup",icon:(0,a.jsx)(m,{className:"h-4 w-4"}),url:"/settings/cleanup"},{title:"Export",icon:(0,a.jsx)(v.oxP,{className:"h-4 w-4"}),url:"/settings/export"},{title:(0,a.jsx)("div",{className:"text-red-500",children:"Danger Zone"}),icon:(0,a.jsx)(v.Vgl,{className:"h-4 w-4 text-red-500"}),url:"/settings/delete"}]}),(0,a.jsx)("div",{children:(0,a.jsx)(w.Z,{})})]})};var y=j},39059:function(e,t,r){"use strict";r.d(t,{cp:function(){return i},l0:function(){return o},w5:function(){return l}});var a=r(85893),n=r(56312),s=r(87536);let l=e=>{let{schema:t,...r}=e;return(0,s.cI)({...r,resolver:(0,n.F)(t)})},i=e=>{let{name:t}=e,{formState:{errors:r}}=(0,s.Gc)();if(!t)return null;let n=r[t];return n?(0,a.jsx)("div",{className:"mt-1 text-sm font-bold text-red-500",children:n.message}):null},o=e=>{let{form:t,onSubmit:r,children:n,className:l=""}=e;return(0,a.jsx)(s.RV,{...t,children:(0,a.jsx)("form",{onSubmit:t.handleSubmit(r),children:(0,a.jsx)("fieldset",{className:"flex flex-col ".concat(l),disabled:t.formState.isSubmitting,children:n})})})}},21094:function(e,t,r){"use strict";r.d(t,{Me:function(){return n},ST:function(){return s},VK:function(){return l}});var a=r(85893);let n=e=>{let{children:t,className:r="",classNameChild:n=""}=e;return(0,a.jsx)("div",{className:"container mx-auto max-w-screen-xl grow px-0 pb-2 pt-8 sm:px-5 ".concat(r),children:(0,a.jsx)("div",{className:"grid grid-cols-12 lg:gap-8 ".concat(n),children:t})})},s=e=>{let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:"col-span-12 md:col-span-12 lg:col-span-4 ".concat(r),children:t})},l=e=>{let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:"col-span-12 mb-5 md:col-span-12 lg:col-span-8 ".concat(r),children:t})}},61286:function(e,t,r){"use strict";r.d(t,{I:function(){return d}});var a=r(85893),n=r(86010),s=r(5152),l=r.n(s),i=r(67294),o=r(39059);let c=l()(()=>Promise.all([r.e(2697),r.e(2252)]).then(r.bind(r,22252)),{loadableGenerated:{webpack:()=>[22252]}}),d=(0,i.forwardRef)(function(e,t){let{label:r,prefix:s,type:l="text",iconLeft:d,iconRight:u,error:m,className:v="",helper:p,...h}=e,f=(0,i.useId)(),x=["text-zinc-500 [&>*]:peer-focus:text-brand [&>*]:h-5",{"!text-red-500 [&>*]:peer-focus:!text-red-500":m}];return(0,a.jsxs)("label",{className:"w-full",htmlFor:f,children:[r&&(0,a.jsxs)("div",{className:"mb-1 flex items-center space-x-1.5",children:[(0,a.jsx)("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:r}),(0,a.jsx)(c,{content:p})]}),(0,a.jsxs)("div",{className:"flex",children:[s&&(0,a.jsx)("span",{className:"lt-text-gray-500 inline-flex items-center rounded-l-xl border border-r-0 border-gray-300 bg-gray-100 px-3 dark:border-gray-700",children:s}),(0,a.jsxs)("div",{className:(0,n.Z)({"bg-gray-500/20 opacity-60":h.disabled},m?"!border-red-500":"focus-within:ring-1",s?"rounded-r-xl":"rounded-xl","focus-within:border-brand-500 focus-within:ring-brand-400 flex w-full items-center border border-gray-300 bg-white p-3 dark:border-gray-700 dark:bg-gray-100"),children:[(0,a.jsx)("input",{id:f,className:(0,n.Z)({"placeholder:text-red-500":m},s?"rounded-r-xl":"rounded-xl","peer w-full border-none bg-transparent outline-none focus:ring-0",v),type:l,ref:t,...h}),(0,a.jsx)("span",{tabIndex:-1,className:(0,n.Z)({"order-first pl-3":d},x),children:d}),(0,a.jsx)("span",{tabIndex:-1,className:(0,n.Z)({"order-last pr-3":u},x),children:u})]})]}),h.name&&(0,a.jsx)(o.cp,{name:h.name})]})})},64208:function(e,t,r){"use strict";r.d(t,{u:function(){return c}});var a=r(85893),n=r(44080),s=r(92485),l=r(5362),i=r(86010),o=r(67294);let c=e=>{let{icon:t,title:r,size:c="sm",show:d,children:u,dataTestId:m="",onClose:v}=e;return(0,a.jsx)(n.u.Root,{show:d,as:o.Fragment,children:(0,a.jsx)(s.V,{as:"div",className:"fixed inset-0 z-[20] overflow-y-auto",onClose:()=>null==v?void 0:v(),"data-testid":m,children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:block sm:p-0",children:[(0,a.jsx)(n.u.Child,{as:o.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(s.V.Overlay,{className:"fixed inset-0 bg-gray-500/75 transition-opacity "})}),(0,a.jsx)("span",{className:" sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,a.jsx)(n.u.Child,{as:o.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)("div",{className:(0,i.Z)({"sm:max-w-5xl":"lg"===c},{"sm:max-w-3xl":"md"===c},{"sm:max-w-lg":"sm"===c},{"sm:max-w-sm":"xs"===c},"inline-block w-full scale-100 rounded-xl bg-blue-700/80 text-left align-bottom shadow-xl transition-all sm:my-8 sm:align-middle"),children:[r&&(0,a.jsxs)("div",{className:"divider flex items-center justify-between px-5 py-3.5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 font-bold",children:[t,(0,a.jsx)("div",{children:r})]}),v?(0,a.jsx)("button",{type:"button",className:"rounded-full p-1 text-gray-800 hover:bg-gray-200 dark:text-gray-100 dark:hover:bg-gray-500",onClick:v,children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}):null]}),u]})})]})})})}},41741:function(e,t,r){"use strict";var a,n;r.d(t,{D:function(){return a}}),(n=a||(a={})).SomethingWentWrong="Something went wrong!",n.SignWallet="Please sign in your wallet."},64911:function(e,t){"use strict";let r=(e,t)=>{let{[t]:r,...a}=e;return a},a=e=>{let{domain:t,types:a,value:n}=e;return{primaryType:Object.keys(r(a,"__typename"))[0],domain:r(t,"__typename"),types:r(a,"__typename"),message:r(n,"__typename")}};t.Z=a},45706:function(e,t,r){"use strict";var a=r(34625);let n=(e,t)=>{if(!e)return"";if(e.includes(a.vC)){let r=e.split("/"),n=r[r.length-1];return t?"".concat(a.vC,"/").concat(t,"/").concat(n):e}return e};t.Z=n},10985:function(e,t,r){"use strict";var a=r(34625),n=r(6154),s=r(86501),l=r(41741);let i=async e=>{try{let t=await (0,n.Z)(a.wb,{method:"POST",headers:{"Content-Type":"application/json"},data:e}),{id:r}=null==t?void 0:t.data;return r}catch(i){throw console.error("Failed to upload to Arweave",i),s.ZP.error(l.D.SomethingWentWrong),Error(l.D.SomethingWentWrong)}};t.Z=i},50680:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(85893),n=r(29780),s=r(9008),l=r.n(s),i=r(41664),o=r.n(i);r(67294);var c=r(34625);function d(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"404"})}),(0,a.jsxs)("div",{className:"mt-10 flex h-full flex-col items-center justify-start md:mt-20",children:[(0,a.jsx)("img",{src:"".concat(c.Fv,"/images/icon.png"),alt:c.iC,draggable:!1,height:200,width:200}),(0,a.jsxs)("div",{className:"py-10 text-center",children:[(0,a.jsx)("h1",{className:"mb-4 text-3xl font-bold",children:"404"}),(0,a.jsx)("div",{className:"mb-6",children:"This page could not be found."}),(0,a.jsx)(o(),{href:"/",children:(0,a.jsx)(n.z,{children:"Go Home"})})]})]})]})}},27600:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var a=r(85893),n=r(67294),s=r(50680),l=r(92882),i=r(741),o=r(37331),c=r(66167),d=r(29780),u=r(39059),m=r(61286),v=r(33962),p=r(34625),h=r(41741),f=r(64911),x=r(68980),b=r(38064),g=r(48974),w=r(86501),j=r(70769),y=r(31618),N=r(31407),k=r(1604);let Z=(0,k.Ry)({contractAddress:(0,k.Z_)().max(42,{message:"Contract address should be within 42 characters"}).regex(b.i.ethereumAddress,{message:"Invalid Contract address"}),tokenId:(0,k.Z_)()}),E=e=>{var t,r,s,i,b;let{profile:k}=e,E=(0,j.p)(e=>e.userSigNonce),C=(0,j.p)(e=>e.setUserSigNonce),M=(0,l.qr)(e=>e.currentProfile),[_,L]=(0,n.useState)(!1),[A,S]=(0,n.useState)((null==k?void 0:null===(t=k.picture)||void 0===t?void 0:t.chainId)||N.RJ.id),{signMessageAsync:R}=(0,y.QW)(),I=(0,u.w5)({schema:Z,defaultValues:{contractAddress:null==k?void 0:null===(r=k.picture)||void 0===r?void 0:r.contractAddress,tokenId:null==k?void 0:null===(s=k.picture)||void 0===s?void 0:s.tokenId}}),P=null==M?void 0:null===(i=M.dispatcher)||void 0===i?void 0:i.canUseRelay,V=null==M?void 0:null===(b=M.dispatcher)||void 0===b?void 0:b.sponsor,z=e=>{"RelayError"!==e&&(L(!1),w.ZP.success("Avatar updated successfully!"))},T=e=>{L(!1)},{signTypedDataAsync:W}=(0,y.yw)({onError:T}),{error:O,write:F}=(0,y.GG)({address:p.Nm,abi:o.g,functionName:"setProfileImageURI",onSuccess:()=>z(),onError:T}),[B]=(0,x.E05)(),[U]=(0,x.lAu)({onCompleted:e=>{let{broadcast:t}=e;return z(t.__typename)}}),[D]=(0,x.jmX)({onCompleted:async e=>{let{createSetProfileImageURITypedData:t}=e,{id:r,typedData:a}=t,n=await W((0,f.Z)(a));C(E+1);let{data:s}=await U({variables:{request:{id:r,signature:n}}});if((null==s?void 0:s.broadcast.__typename)==="RelayError"){let{profileId:l,imageURI:i}=a.value;return null==F?void 0:F({args:[l,i]})}},onError:T}),[q]=(0,x.XQk)({onCompleted:e=>{let{createSetProfileImageURIViaDispatcher:t}=e;return z(t.__typename)},onError:T}),G=async e=>{var t;let{data:r}=await q({variables:{request:e}});if((null==r?void 0:null===(t=r.createSetProfileImageURIViaDispatcher)||void 0===t?void 0:t.__typename)==="RelayError")return await D({variables:{options:{overrideSigNonce:E},request:e}})},X=async(e,t)=>{if(!M)return w.ZP.error(h.D.SignWallet);try{var r,a,n,s;L(!0);let l=await B({variables:{request:{ethereumAddress:null==M?void 0:M.ownedBy,nfts:[{contractAddress:e,tokenId:t,chainId:A}]}}}),i=await R({message:null==l?void 0:null===(r=l.data)||void 0===r?void 0:null===(a=r.nftOwnershipChallenge)||void 0===a?void 0:a.text}),o={profileId:null==M?void 0:M.id,nftData:{id:null==l?void 0:null===(n=l.data)||void 0===n?void 0:null===(s=n.nftOwnershipChallenge)||void 0===s?void 0:s.id,signature:i}};if(P&&V)return await G(o);return await D({variables:{options:{overrideSigNonce:E},request:o}})}catch(c){T(c)}};return(0,a.jsxs)(u.l0,{form:I,className:"space-y-4",onSubmit:async e=>{let{contractAddress:t,tokenId:r}=e;await X(t,r)},children:[O&&(0,a.jsx)(c.B,{className:"mb-3",title:"Transaction failed!",error:O}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label",children:"Chain"}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{className:"focus:border-brand-500 focus:ring-brand-400 w-full rounded-xl border border-gray-300 bg-white outline-none dark:border-gray-700",onChange:e=>S(parseInt(e.target.value)),value:A,children:[p.M8&&(0,a.jsx)("option",{value:N.RJ.id,children:"Ethereum"}),(0,a.jsx)("option",{value:p.M8?N.yu.id:N.v8.id,children:p.M8?"Polygon":"Mumbai"})]})})]}),(0,a.jsx)(m.I,{label:"Contract Address",type:"text",placeholder:"0x277f5959e22f94d5bd4c2cc0a77c4c71f31da3ac",...I.register("contractAddress")}),(0,a.jsx)(m.I,{label:"Token Id",type:"text",placeholder:"1",...I.register("tokenId")}),(0,a.jsx)(d.z,{className:"ml-auto",type:"submit",disabled:_,icon:_?(0,a.jsx)(v.$,{size:"xs"}):(0,a.jsx)(g.Z,{className:"h-4 w-4"}),children:"Save"})]})};var C=r(21094),M=r(11281),_=r(9507),L=r(16769),A=r(11761),S=r(7814);let R=n.forwardRef(function({title:e,titleId:t,...r},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))});var I=r(64208);let P=(0,n.forwardRef)(function(e,t){let{label:r,...s}=e,l=(0,n.useId)();return(0,a.jsxs)("label",{htmlFor:l,children:[r&&(0,a.jsx)("div",{className:"mb-1 flex items-center space-x-1.5",children:(0,a.jsx)("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:r})}),(0,a.jsx)("textarea",{id:l,className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2 shadow-sm outline-none ring-0 focus-within:ring-0 focus:ring-0 focus-visible:ring-0 disabled:bg-gray-500 disabled:bg-opacity-20 disabled:opacity-60 dark:bg-gray-900",ref:t,...s}),s.name&&(0,a.jsx)(u.cp,{name:s.name})]})});var V=r(13633),z=r(45706),T=r(10985),W=r(92359),O=r(57632),F=r(30052);let B=(0,k.Ry)({name:(0,k.Z_)().max(100,{message:"Name should not exceed 100 characters"}).regex(b.i.profileNameValidator,{message:"Profile name must not contain restricted symbols"}),location:(0,k.Z_)().max(100,{message:"Location should not exceed 100 characters"}),website:(0,k.G0)([(0,k.Z_)().regex(b.i.url,{message:"Invalid website"}),(0,k.Z_)().max(0)]),twitter:(0,k.Z_)().max(100,{message:"Twitter should not exceed 100 characters"}),bio:(0,k.Z_)().max(260,{message:"Bio should not exceed 260 characters"})}),U=e=>{var t,r,s,i,b,j,N;let{profile:k}=e,Z=(0,l.qr)(e=>e.currentProfile),[E,C]=(0,n.useState)(""),[M,_]=(0,n.useState)(!1),[L,S]=(0,n.useState)(!1),[R,U]=(0,n.useState)(""),[D,q]=(0,n.useState)(!1),[G,X]=(0,n.useState)(""),H=null==Z?void 0:null===(t=Z.dispatcher)||void 0===t?void 0:t.canUseRelay,$=null==Z?void 0:null===(r=Z.dispatcher)||void 0===r?void 0:r.sponsor,J=e=>{"RelayError"!==e&&(_(!1),w.ZP.success("Profile updated successfully!"))},K=e=>{_(!1)},{signTypedDataAsync:Q}=(0,y.yw)({onError:K}),{error:Y,write:ee}=(0,y.GG)({address:p.Im,abi:o.g,functionName:"setProfileMetadataURI",onSuccess:()=>J(),onError:K}),[et]=(0,x.lAu)({onCompleted:e=>{let{broadcast:t}=e;return J(t.__typename)}}),[er]=(0,x.JZL)({onCompleted:async e=>{let{createSetProfileMetadataTypedData:t}=e,{id:r,typedData:a}=t,n=await Q((0,f.Z)(a)),{data:s}=await et({variables:{request:{id:r,signature:n}}});if((null==s?void 0:s.broadcast.__typename)==="RelayError"){let{profileId:l,metadata:i}=a.value;return null==ee?void 0:ee({args:[l,i]})}},onError:K}),[ea]=(0,x.u4o)({onCompleted:e=>{let{createSetProfileMetadataViaDispatcher:t}=e;return J(t.__typename)},onError:K}),en=async e=>{var t;let{data:r}=await ea({variables:{request:e}});if((null==r?void 0:null===(t=r.createSetProfileMetadataViaDispatcher)||void 0===t?void 0:t.__typename)==="RelayError")return await er({variables:{request:e}})},es=(0,u.w5)({schema:B,defaultValues:{name:null!==(j=null==k?void 0:k.name)&&void 0!==j?j:"",location:(0,V.Z)(null==k?void 0:k.attributes,"location"),website:(0,V.Z)(null==k?void 0:k.attributes,"website"),twitter:null===(s=(0,V.Z)(null==k?void 0:k.attributes,"twitter"))||void 0===s?void 0:s.replace(/(https:\/\/)?twitter\.com\//,""),bio:null!==(N=null==k?void 0:k.bio)&&void 0!==N?N:""}}),el=async(e,t,r,a,n)=>{if(!Z)return w.ZP.error(h.D.SignWallet);try{var s,l;_(!0);let i=await (0,T.Z)({name:e,bio:n,cover_picture:E||null,attributes:[...null!==(l=null==k?void 0:null===(s=k.attributes)||void 0===s?void 0:s.filter(e=>!["location","website","twitter","hasPrideLogo","statusEmoji","statusMessage","app"].includes(e.key)).map(e=>{let{key:t,value:r}=e;return{key:t,value:r}}))&&void 0!==l?l:[],{key:"location",value:t},{key:"website",value:r},{key:"twitter",value:a},{key:"statusEmoji",value:(0,V.Z)(null==k?void 0:k.attributes,"statusEmoji")},{key:"statusMessage",value:(0,V.Z)(null==k?void 0:k.attributes,"statusMessage")},{key:"app",value:p.iC}],version:"1.0.0",metadata_id:(0,O.Z)()}),o={profileId:null==Z?void 0:Z.id,metadata:"https://arweave.net/".concat(i)};if(H&&$)return await en(o);return await er({variables:{request:o}})}catch(c){K(c)}},ei=null==k?void 0:null===(i=k.coverPicture)||void 0===i?void 0:null===(b=i.original)||void 0===b?void 0:b.url,eo=ei?(0,z.Z)((0,W.Z)(ei),p.iD):"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"p-5",children:(0,a.jsxs)(u.l0,{form:es,className:"space-y-4",onSubmit:e=>{let{name:t,location:r,website:a,twitter:n,bio:s}=e;el(t,r,a,n,s)},children:[Y&&(0,a.jsx)(c.B,{className:"mb-3",title:"Transaction failed!",error:Y}),(0,a.jsx)(m.I,{label:"Profile Id",type:"text",value:null==Z?void 0:Z.id,disabled:!0}),(0,a.jsx)(m.I,{label:"Name",type:"text",placeholder:"Gavin",...es.register("name")}),(0,a.jsx)(m.I,{label:"Location",type:"text",placeholder:"Miami",...es.register("location")}),(0,a.jsx)(m.I,{label:"Website",type:"text",placeholder:"https://hooli.com",...es.register("website")}),(0,a.jsx)(m.I,{label:"Twitter",type:"text",prefix:"https://twitter.com",placeholder:"gavin",...es.register("twitter")}),(0,a.jsx)(P,{label:"Bio",placeholder:"Tell us something about you!",...es.register("bio")}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("div",{className:"label",children:"Cover"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{children:(0,a.jsx)(F.E,{className:"h-60 w-full rounded-lg object-cover",onError:e=>{let{currentTarget:t}=e;t.src=(0,W.Z)(E)},src:G||eo,alt:"Cover picture crop preview"})}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:L&&(0,a.jsx)(v.$,{size:"sm"})})]})]}),(0,a.jsx)("div",{className:"space-y-2 pt-4",children:(0,a.jsx)("div",{className:"flex items-center space-x-2"})}),(0,a.jsx)(d.z,{className:"ml-auto",type:"submit",disabled:M,icon:M?(0,a.jsx)(v.$,{size:"xs"}):(0,a.jsx)(g.Z,{className:"h-4 w-4"}),children:"Save"})]})}),(0,a.jsx)(I.u,{title:"Crop image",show:D,size:"md",onClose:M?void 0:()=>{U(""),q(!1)},children:(0,a.jsx)("div",{className:"p-5 text-right",children:(0,a.jsx)(d.z,{type:"submit",disabled:L||!R,icon:L?(0,a.jsx)(v.$,{size:"xs"}):(0,a.jsx)(g.Z,{className:"h-4 w-4"}),children:"Upload"})})})]})},D=()=>{let e=(0,l.qr)(e=>e.currentProfile),[t,r]=(0,n.useState)("AVATAR"),{data:o,loading:c,error:d}=(0,x.sVO)({variables:{request:{profileId:null==e?void 0:e.id}},skip:!(null==e?void 0:e.id),onCompleted:e=>{let{profile:t}=e,a=null==t?void 0:t.picture;r((null==a?void 0:a.hasOwnProperty("uri"))?"NFT":"AVATAR")}});if(d)return(0,a.jsx)(s.default,{});if(c)return(0,a.jsx)(_.Z,{});if(!e)return(0,a.jsx)(s.default,{});let u=null==o?void 0:o.profile;return(0,a.jsxs)(C.Me,{children:[(0,a.jsx)(M.Z,{title:"Profile settings • ".concat(p.iC)}),(0,a.jsx)(C.ST,{children:(0,a.jsx)(i.Z,{})}),(0,a.jsxs)(C.VK,{className:"space-y-5",children:[(0,a.jsx)(U,{profile:u}),(0,a.jsxs)(A.Z,{className:"space-y-5 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.Z,{name:"Upload avatar",icon:(0,a.jsx)(S.Z,{className:"h-5 w-5"}),active:"AVATAR"===t,onClick:()=>r("AVATAR")}),(0,a.jsx)(L.Z,{name:"NFT Avatar",icon:(0,a.jsx)(R,{className:"h-5 w-5"}),active:"NFT"===t,onClick:()=>r("NFT")})]}),"NFT"===t,(0,a.jsx)(E,{profile:u})]})]})]})};var q=D},70769:function(e,t,r){"use strict";r.d(t,{p:function(){return s}});var a=r(73445),n=r(782);let s=(0,a.Ue)((0,n.XR)(e=>({userSigNonce:0,setUserSigNonce:t=>e(()=>({userSigNonce:t}))})))},92359:function(e,t,r){"use strict";var a=r(34625),n=r(5996);let s=e=>{let t="".concat(n.Gs,"/"),r="".concat(a.C7,"/");return e?e.replace(/^Qm[1-9A-Za-z]{44}/gm,"".concat(t,"/").concat(e)).replace("https://ipfs.io/ipfs",t).replace("https://ipfs.infura.io/ipfs",t).replace("https://lens.ipfs.infura.io/ipfs",t).replace("https://ipfs-infura.io/ipfs",t).replace("https://lens.ipfs-infura.io/ipfs",t).replace("https://lenshareapp.ipfs-infura.io/ipfs",t).replace("https://lenshareapp.ipfs-infura.io",t).replace("ipfs://",t).replace("ipfs://ipfs/",t).replace("ipfs://ipfs",t).replace("ar://",r).replace("https://lp-playback.com/hls","".concat(r,"/").concat(e)).replace("https://lp-playback.com/hls",r).replace("https://lp-playback.com","".concat(r,"/").concat(e)).replace("https://lp-playback.com",r):e};t.Z=s},61998:function(e,t,r){"use strict";var a=r(67294);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"}))});t.Z=n},93832:function(e,t,r){"use strict";var a=r(67294);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"}))});t.Z=n},28166:function(e,t,r){"use strict";var a=r(67294);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))});t.Z=n},7814:function(e,t,r){"use strict";var a=r(67294);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))});t.Z=n},28771:function(e,t,r){"use strict";var a=r(67294);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"}))});t.Z=n},41113:function(e,t,r){"use strict";var a=r(67294);let n=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}))});t.Z=n},56312:function(e,t,r){"use strict";r.d(t,{F:function(){return o}});var a=r(87536),n=function(e,t,r){if(e&&"reportValidity"in e){var n=(0,a.U2)(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},s=function(e,t){var r=function(r){var a=t.fields[r];a&&a.ref&&"reportValidity"in a.ref?n(a.ref,r,e):a.refs&&a.refs.forEach(function(t){return n(t,r,e)})};for(var a in t.fields)r(a)},l=function(e,t){t.shouldUseNativeValidation&&s(e,t);var r={};for(var n in e){var l=(0,a.U2)(t.fields,n);(0,a.t8)(r,n,Object.assign(e[n],{ref:l&&l.ref}))}return r},i=function(e,t){for(var r={};e.length;){var n=e[0],s=n.code,l=n.message,i=n.path.join(".");if(!r[i]){if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[i]={message:o.message,type:o.code}}else r[i]={message:l,type:s}}if("unionErrors"in n&&n.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var c=r[i].types,d=c&&c[n.code];r[i]=(0,a.KN)(i,t,r,s,d?[].concat(d,n.message):n.message)}e.shift()}return r},o=function(e,t,r){return void 0===r&&(r={}),function(a,n,o){try{return Promise.resolve(function(n,l){try{var i=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](a,t)).then(function(e){return o.shouldUseNativeValidation&&s({},o),{errors:{},values:r.rawValues?a:e}})}catch(c){return l(c)}return i&&i.then?i.then(void 0,l):i}(0,function(e){return{values:{},errors:e.isEmpty?{}:l(i(e.errors,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)}}))}catch(c){return Promise.reject(c)}}}}},function(e){e.O(0,[9498,1228,1664,1618,1098,1257,5675,2697,8451,1889,3775,2438,7536,4156,6781,7635,7331,3463,9774,2888,179],function(){return e(e.s=73406)}),_N_E=e.O()}]);