(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1863],{57270:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/upload",function(){return l(56305)}])},95184:function(e,t,l){"use strict";l.d(t,{Z:function(){return p}});var o=l(85893),n={src:"/_next/static/media/Lenstoknewlogo.eec1ad02.png",height:240,width:680,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAADFBMVEUAAAAAAAAMDO4NDfJfvlLJAAAABHRSTlMBGQkc3Rt+BgAAAAlwSFlzAAAuIwAALiMBeKU/dgAAABhJREFUeJxjYAABJiYGBkYQYGZmAguARAABGwAWcJJdQQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3},r=l(41664),i=l.n(r),s=l(25675),a=l.n(s),d=l(15209),c=l(23286),u=l(33193),x=l(79494),m=l(12313);let h=()=>{var e;let t=(0,d.qr)(e=>e.currentProfile),l=null==t?void 0:t.picture;return console.log("CURRENT PROFILE",null==t?void 0:t.picture),(0,o.jsxs)("div",{className:"w-full flex justify-between rounded-lg items-center border-4 border-blue-500 p-2 ",children:[(0,o.jsx)(i(),{href:"/",children:(0,o.jsx)("div",{className:"w-[100px] md:w-[129px]",children:(0,o.jsx)(a(),{className:"cursor-pointer",src:n,alt:"logo",layout:"responsive"})})}),(0,o.jsx)(x.Z,{}),(0,o.jsx)(i(),{href:"/discover",children:(0,o.jsx)("button",{className:"flex px-2 pt-3 py-2 md:px-4 text-md font-semibold lg:hidden xl:hidden items-center gap-2 cursor-pointer md:hidden rounded-full text-md border-[#57B8FF] text-[#000000] hover:bg-[#57B8FF]",children:(0,o.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"flex pl-2 centre-item gap-5 md:gap-10 ",children:[(0,o.jsx)(i(),{href:"/upload",children:(0,o.jsxs)("button",{className:"flex px-2 pt-3 py-2 md:px-4 text-md font-semibold items-center gap-2 cursor-pointer rounded-full text-md border-[#57B8FF] text-[#000000] hover:bg-[#57B8FF]",children:[(0,o.jsx)(u.Z,{className:"h-6 text-black"})," ",(0,o.jsx)("span",{className:"hidden ",children:"Upload "})]})}),(0,o.jsx)("div",{className:"flex",children:t?(0,o.jsx)("div",{className:"w-12 h-12",children:(0,o.jsx)(i(),{href:"/u/".concat(t.id),children:(null==l?void 0:l.__typename)==="MediaSet"?(null===(e=l.original)||void 0===e?void 0:e.url.includes("ipfs"))?(0,o.jsx)(a(),{src:(0,c.A)(null==l?void 0:l.original.url),width:40,height:40,className:"rounded-full cursor-pointer",alt:t.id.handle,layout:"responsive"}):(0,o.jsx)(a(),{src:null==l?void 0:l.original.url,width:40,height:40,className:"rounded-full cursor-pointer",alt:t.id.handle,layout:"responsive"}):(0,o.jsx)("div",{className:"bg-blue-900 w-8 h-8 rounded-full"})},t.id)}):(0,o.jsx)("div",{className:"block",children:(0,o.jsx)(m.NL,{})})})]})})]})};var p=h},62444:function(e,t,l){"use strict";l.d(t,{Z:function(){return w}});var o=l(85893),n=l(41664),r=l.n(n),i=l(15209),s=l(67294),a=l(73359),d=l(50319),c=l(76781),u=l(39321),x=l(54524),m=l(86501);let h=()=>{let e=(0,i.qr)(e=>e.setProfiles),t=(0,i.qr)(e=>e.setCurrentProfile),l=(0,i.Fc)(e=>e.setProfileId),[n,r]=(0,s.useState)(!1),{chain:h}=(0,x.LN)(),{switchNetwork:p}=(0,x.g0)(),[v,f]=(0,s.useState)(!1),{address:g,connector:j}=(0,x.mA)(),{connectors:b,error:w,connectAsync:y}=(0,x.$4)(),{signMessageAsync:N,isLoading:A}=(0,x.QW)(),[k,{error:C,loading:M}]=(0,a.t)(c.bT,{fetchPolicy:"no-cache"}),[S,{error:P,loading:E}]=(0,d.D)(c.bs),[U,{error:T,loading:B}]=(0,a.t)(c.$);(0,s.useEffect)(()=>{r(!0)},[]);let L=async()=>{try{var o,n,r,i,s,a,d,c,u;let x=await k({variables:{request:{address:g}}});if(!(null==x?void 0:null===(o=x.data)||void 0===o?void 0:null===(n=o.challenge)||void 0===n?void 0:n.text))return m.ZP.error("ERROR_MESSAGE");let h=await N({message:null==x?void 0:null===(r=x.data)||void 0===r?void 0:null===(i=r.challenge)||void 0===i?void 0:i.text}),p=await S({variables:{request:{address:g,signature:h}}});localStorage.setItem("accessToken",null===(s=p.data)||void 0===s?void 0:s.authenticate.accessToken),localStorage.setItem("refreshToken",null===(a=p.data)||void 0===a?void 0:a.authenticate.refreshToken);let{data:v}=await U({variables:{request:{ownedBy:[g]}}});if((null==v?void 0:null===(d=v.profiles)||void 0===d?void 0:null===(c=d.items)||void 0===c?void 0:c.length)===0)return m.ZP.error("You have no lens profile yet, please create one");{let f=null==v?void 0:null===(u=v.profiles)||void 0===u?void 0:u.items,j=f[0];e(f),t(j),l(j.id)}}catch(b){}};return(null==j?void 0:j.id)?(0,o.jsx)("div",{children:(null==h?void 0:h.id)===u.Kj?(0,o.jsx)("button",{className:"flex-1 text-white",onClick:()=>L(),children:n?"Log In":""}):(0,o.jsx)("button",{className:"flex-1",onClick:()=>{p?p(u.Kj):m.ZP.error("Please change your network!")},children:"Switch Network"})}):(0,o.jsx)("button",{onClick:()=>{m.ZP.error("Log in to view profile",{duration:1e3})},className:"text-white hover:text-gray-100 focus:outline-none focus:text-gray-100 border-gray-800",children:(0,o.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})};var p=l(93832),v=l(79111),f=l(64412),g=l(61998),j=l(5434);let b=()=>{let e=(0,i.qr)(e=>e.currentProfile),[t,l]=(0,s.useState)(!0);return(0,o.jsx)("div",{children:(0,o.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 h-[70px] rounded-lg border-2 border-grey-700 bg-blue-500 z-999 flex items-center justify-around px-4 py-3",children:[t?(0,o.jsx)(r(),{href:"/",children:(0,o.jsx)("button",{onClick:()=>{l(!1)},className:"text-black hover:text-gray-100 focus:outline-none focus:text-gray-100 border-gray-800",children:(0,o.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})}):(0,o.jsx)(r(),{href:"/",children:(0,o.jsx)("button",{onClick:()=>{l(!0)},className:"text-black hover:text-gray-100 focus:outline-none focus:text-gray-100 border-gray-800",children:(0,o.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})}),(0,o.jsx)("div",{children:(0,o.jsxs)(r(),{href:"/feed",children:[(0,o.jsx)(j.dnC,{className:"text-brand-500 pb-1 h-6 w-6"})," "]})}),(0,o.jsx)("div",{children:(0,o.jsxs)(r(),{href:"/latest",children:[(0,o.jsx)(p.Z,{className:"text-brand-500 pb-1 h-6 w-6"})," "]})}),(0,o.jsxs)(r(),{href:"/upload",children:[(0,o.jsx)(v.Z,{className:"pb-1 h-6 text-white-500"})," "]}),(0,o.jsx)("div",{children:(0,o.jsxs)(r(),{href:"/notifications",children:[(0,o.jsx)(f.Z,{className:"text-brand-500 pb-1 h-6 w-6"})," "]})}),(0,o.jsx)("div",{children:(0,o.jsxs)(r(),{href:"/messages",children:[(0,o.jsx)(g.Z,{className:"text-brand-500 pb-1 h-6 w-6"})," "]})}),e?(0,o.jsx)(r(),{href:"/u/".concat(e.id),children:(0,o.jsx)("button",{className:"text-black hover:text-gray-100 focus:outline-none focus:text-gray-100 border-gray-800",children:(0,o.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})},e.id):(0,o.jsx)(h,{})]})})};var w=b},79494:function(e,t,l){"use strict";var o=l(85893),n=l(21273),r=l(16175),i=l(11163),s=l(67294),a=l(47516),d=l(33962),c=l(72329),u=l(41664),x=l.n(u);let m=e=>{let{hideDropdown:t=!1}=e,{push:l,pathname:u,query:m}=(0,i.useRouter)(),[h,p]=(0,s.useState)(""),v=(0,s.useRef)(null),[f,{data:g,loading:j}]=(0,n.mp)(),b=e=>{let l=e.target.value;p(l),"/search"===u||t||f({variables:{request:{type:r.qkC.Profile,query:l,limit:8}}})},w=e=>{e.preventDefault(),"/search"===u?l("/search?q=".concat(h,"&type=").concat(m.type)):l("/search?q=".concat(h,"&type=profiles")),p(""),console.log(h)},y=null==g?void 0:g.search,N=y&&y.hasOwnProperty("items"),A=N?y.items:[];return(0,o.jsxs)("div",{className:"relative items-center hidden md:hidden",children:[(0,o.jsxs)("form",{className:"absolute md:static top-10 -left-20 max-w-md",onSubmit:w,children:[(0,o.jsx)("input",{className:"justify-content bg-primary p-3 md:text-md font-medium border-2 border-gray-100 focus:outline-none focus:border-2 focus:border-gray-300 w-[300px] md:w-[350px] rounded-full md:top-0",placeholder:"Search accounts and videos",value:h,onChange:b}),(0,o.jsx)("button",{className:"absolute md:right-5 right-6 top-4 border-l-2 border-gray-300 pl-4 text-2xl text-gray-400",children:(0,o.jsx)(a.Goc,{})})]}),"/search"!==u&&!t&&h.length>0&&(0,o.jsx)("div",{className:"flex absolute flex-col mt-2 w-[94%] z-50",ref:v,children:(0,o.jsx)("div",{className:"overflow-y-auto py-2 max-h-[80vh] rounded-none border bg-white",children:j?(0,o.jsxs)("div",{className:"py-2 px-4 space-y-2 text-sm font-bold text-center",children:[(0,o.jsx)(d.$,{size:"sm",className:"mx-auto"}),(0,o.jsx)("div",{children:"Searching..."})]}):(0,o.jsxs)(o.Fragment,{children:[A.map(e=>(0,o.jsx)("div",{className:"p-5",children:(0,o.jsx)(x(),{href:"/u/".concat(null==e?void 0:e.id),children:(0,o.jsxs)("div",{className:"flex gap-3 hover:bg-primary p-2 cursor-pointer font-semibold rounded items-center",children:[(0,o.jsx)("div",{children:(0,o.jsx)("img",{width:40,height:40,className:"rounded-full cursro-pointer",src:(0,c.Z)(e),alt:null==e?void 0:e.handle})}),(0,o.jsx)("div",{className:"hidden lg:block",children:(0,o.jsx)("p",{className:"flex gap-1 items-center text-md font-bold text-primary lowercase",children:null==e?void 0:e.handle})})]})})},null==e?void 0:e.id)),0===A.length&&(0,o.jsx)("div",{children:"No matching Profiles"})]})})})]})};t.Z=m},56305:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return Z}});var o=l(85893),n=l(95184),r=l(67294),i=l(72227),s=l(89583),a=l(33787),d=l.n(a),c=l(65561),u=l(15209),x=l(50319),m=l(76781),h=l(65475);let p=()=>{var e;return(null==navigator?void 0:null===(e=navigator.languages)||void 0===e?void 0:e.length)?navigator.languages[0]:navigator.language};var v=l(56371),f=l(37331),g=l(39321),j=l(54524),b=l(86501),w=l(9187),y=l(57632);let N=e=>{if(e.isRevertCollect)return{revertCollectModule:!0};if(e.isFeeCollect){var t,l;return{feeCollectModule:{amount:{currency:null===(t=e.amount)||void 0===t?void 0:t.currency,value:null===(l=e.amount)||void 0===l?void 0:l.value},recipient:e.recipient,referralFee:e.referralFee,followerOnly:e.followerOnlyCollect}}}return{freeCollectModule:{followerOnly:e.followerOnlyCollect}}},A=()=>{let e=(0,u.qr)(e=>e.uploadedVideo),t=(0,u.qr)(e=>e.setUploadedVideo),l=(0,u.qr)(e=>e.currentProfile),n=(0,u.qr)(e=>e.bundlrData);(0,u.qr)(e=>e.setBundlrData),(0,u.qr)(e=>e.getBundlrInstance),(0,r.useEffect)(()=>{e.videoSource&&t(u.sr)},[]);let[i,{error:s,loading:a}]=(0,x.D)(m.yk),{isLoading:d,signTypedDataAsync:c}=(0,j.yw)({onError:w.Z}),A=()=>{b.ZP.success("Successfully post video"),t({isIndexed:!0})},{data:k,isLoading:C,isSuccess:M,write:S}=(0,j.GG)({address:g.Nm,abi:f.g,functionName:"postWithSig",mode:"recklesslyUnprepared",onSuccess:A,onError(e){b.ZP.error("You should be logged in with your Lens account to Lens")}}),P=async()=>{try{if(n.instance||console.log("Bundlr instance is undefined"),n.balance>n.estimatedPrice){var l,o;console.log("BUNDLR INSTANCE",null===(l=n.instance)||void 0===l?void 0:l.uploader.chunkedUploader),console.log("video stream:",e.stream),t({loading:!0,buttonText:"Uploading to Arweave"});let r=null===(o=n.instance)||void 0===o?void 0:o.uploader.chunkedUploader;null==r||r.setBatchSize(4),null==r||r.setChunkSize(1e7),null==r||r.on("chunkUpload",l=>{var o;let n=null==e?void 0:null===(o=e.file)||void 0===o?void 0:o.size,r=Math.round(100*l.totalUploaded/n);t({percent:r})}),console.log("UPLOADER ",r);let i=[{name:"Content-Type",value:e.videoType||"video/mp4"},{name:"App-Name",value:"LensShare"}],s=await (null==r?void 0:r.uploadData(e.stream,{tags:i}));console.log("Upload",s);let a="".concat(g.C7,"/").concat(null==s?void 0:s.data.id);return t({loading:!1,videoSource:a,isUploadToAr:!0}),U(a)}b.ZP.error("Insuffisant balance on your account. Please fund it to reach the estimated price.")}catch(d){b.ZP.error("Failed to upload video to bundlr."),console.log("Failed to upload video to bundlr: ",d),t({loading:!1,buttonText:"Post Video"})}},E=async l=>{try{console.log("Arweave Url back from uploadToBundlr function",l),e.videoSource=l,t({buttonText:"Storing metadata...",loading:!0});let o={version:"2.0.0",metadata_id:(0,y.Z)(),description:e.description.trim(),content:"".concat(e.title,"\n\n").concat(e.description).trim(),locale:p(),tags:[""],mainContentFocus:m.D2.Video,animation_url:e.videoSource,image:e.thumbnail,imageMimeType:e.thumbnailType,name:e.title,attributes:[],media:[{item:e.videoSource,type:e.videoType}],appId:"LensShare"},n=await fetch("".concat(g.Tq,"/api/meta-to-ipfs"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(o)});if(200!==n.status)console.log("Something wrong while trying storing to IPFS");else{let r=await n.json(),i="https://infura-ipfs.io/ipfs/".concat(r.cid);return i}}catch(s){console.log(s)}},U=async o=>{try{var n;let r=await E(o);console.log("Metadata content uri ",r),console.log("Current User id",null==l?void 0:l.id),s&&console.log("AUTHENTICATION ERROR",s),t({buttonText:"Post on Lens"});let a=await i({variables:{request:{profileId:null==l?void 0:l.id,contentURI:r,collectModule:N(e.collectModule),referenceModule:{followerOnlyReferenceModule:!1}}}});t({buttonText:"Posting on Lens"});let d=null===(n=a.data)||void 0===n?void 0:n.createPostTypedData.typedData,u=null==d?void 0:d.value.deadline,x=await c((0,h.Z)(d)),{v:m,r:p,s:f}=(0,v.splitSignature)(x);console.log("TypedData",d);let g={profileId:null==d?void 0:d.value.profileId,contentURI:null==d?void 0:d.value.contentURI,referenceModuleData:null==d?void 0:d.value.referenceModule,collectModule:null==d?void 0:d.value.collectModule,collectModuleInitData:null==d?void 0:d.value.collectModuleInitData,referenceModule:null==d?void 0:d.value.referenceModule,referenceModuleInitData:null==d?void 0:d.value.referenceModuleInitData,sig:{v:m,r:p,s:f,deadline:u}},j=await (null==S?void 0:S({recklesslySetUnpreparedArgs:[g]}));console.log("TX",j)}catch(b){console.log("Error while posting on lens:",b)}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{onClick:P,children:e.buttonText})})};var k=l(61744);function C(){let{address:e,isConnected:t}=(0,j.mA)(),{data:l}=(0,j.mx)({onError(e){b.ZP.error(null==e?void 0:e.message)}}),{data:n}=(0,j.KQ)({address:e,chainId:g.Kj}),i=(0,u.qr)(e=>e.bundlrData),s=(0,u.qr)(e=>e.setBundlrData),a=(0,u.qr)(e=>e.getBundlrInstance),d=(0,u.qr)(e=>e.uploadedVideo);(0,u.qr)(e=>e.setUploadedVideo);let[c,x]=(0,r.useState)(0),[m,h]=(0,r.useState)(!1);console.log("Bundlr Data",i);let p=async t=>{let l=t||i.instance;if(e&&l){let o=await l.getBalance(e);s({balance:k.formatEther(o.toString())})}},v=async e=>{var t;if(console.log("Stream",d.stream),!d.stream)return b.ZP.error("Upload cost estimation failed!");let l=await e.getPrice(null===(t=d.stream)||void 0===t?void 0:t.size);s({estimatedPrice:k.formatEther(l.toString())})},f=async()=>{if((null==l?void 0:l.provider)&&e&&!i.instance){(0,b.ZP)("Sign to initialize & estimate upload...");let t=await a(l);t&&(await p(t),await v(t),s({instance:t}))}};(0,r.useEffect)(()=>{h(!0)},[]),(0,r.useEffect)(()=>{(null==l?void 0:l.provider)&&m&&(console.log("INIT BUNDLR INSTANCE"),f().catch(e=>(0,b.ZP)("[Error Init Bundlr]",e)))},[null==l?void 0:l.provider,m]),(0,r.useEffect)(()=>{i.instance&&m&&(p(i.instance).catch(e=>console.log("[Error Fetch Bundlr Balance]",e)),v(i.instance).catch(e=>console.log("[Error Estimate Video Price ]",e)))},[i.instance]);let w=async()=>{if(!i.instance)return await f();if(!i.deposit)return b.ZP.error("Enter deposit amount");let e=parseFloat(i.deposit),t=k.parseUnits(e.toString())._hex;if(!t||1>Number(t))return b.ZP.error("Invalid deposit amount");if((null==n?void 0:n.formatted)&&parseFloat(null==n?void 0:n.formatted)<e)return b.ZP.error("Insufficient funds in your wallet");s({depositing:!0});try{let l=await i.instance.fund(t);l&&b.ZP.success("Deposit of ".concat(k.formatEther(null==l?void 0:l.quantity)," is done and it will be reflected in few seconds."))}catch(o){b.ZP.error("Failed to deposit"),console.log("[Error Bundlr Deposit]",o)}finally{await p(),s({deposit:null,showDeposit:!1,depositing:!1})}};return(0,o.jsxs)("div",{className:"w-full mt-4 space-y-2",children:[(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("div",{className:"inline-flex items-center justify-between text-xs font-semibold rounded opacity-70",children:(0,o.jsx)("span",{className:"flex items-center space-x-1.5",children:(0,o.jsx)("span",{children:"Your Storage Balance"})})}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-md font-medium",children:i.balance}),(0,o.jsx)("span",{children:(0,o.jsx)("button",{type:"button",onClick:()=>s({showDeposit:!i.showDeposit}),className:"inline-flex py-0.5 items-center pl-1.5 pr-0.5 bg-blue-700 text-white rounded-full focus:outline-none dark:bg-gray-800",children:(0,o.jsx)("span",{className:"text-xs px-0.5",children:"Top-Up"})})})]})]}),i.showDeposit&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"inline-flex flex-col text-xs font-medium opacity-70",children:"Amount to deposit"}),(0,o.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,o.jsx)("input",{type:"number",placeholder:"ENTER AMOUNT IN MATIC",className:"!p-1.5 border border-gray-500 inline-flex items-center w-full justify-between text-xs font-semibold rounded opacity-70",autoComplete:"off",min:0,value:i.deposit||"",onChange:e=>{s({deposit:e.target.value})}}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"button",disabled:i.depositing,onClick:()=>w(),className:"text-xs mb-0.5 !p-1.5 inline-flex items-center pl-1.5 pr-0.5 bg-blue-700 text-white rounded-full focus:outline-none dark:bg-gray-800",children:"Deposit"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"inline-flex flex-col text-xs font-semibold opacity-70",children:"Estimated Cost to Upload"}),(0,o.jsx)("div",{className:"text-md font-medium",children:i.estimatedPrice})]})]})}var M=l(75131),S=l(86010);let P=()=>{let e=(0,u.qr)(e=>e.currentProfile),t=(0,u.qr)(e=>e.uploadedVideo),l=["Anyone","Followers"],n=["Free","0.1","0.5","1","5","10","20"],[i,s]=(0,r.useState)(l[0]),[a,d]=(0,r.useState)(n[0]);return(0,r.useEffect)(()=>{t.collectModule.recipient=null==e?void 0:e.ownedBy,"Free"===a?(t.collectModule.isFreeCollect=!0,t.collectModule.isFeeCollect=!1,t.collectModule.amount.value="0","Anyone"===i?t.collectModule.followerOnlyCollect=!1:t.collectModule.followerOnlyCollect=!0):(t.collectModule.isFreeCollect=!1,t.collectModule.isFeeCollect=!0,t.collectModule.amount.value=a,"Anyone"===i?t.collectModule.followerOnlyCollect=!1:t.collectModule.followerOnlyCollect=!0)},[i,a]),console.log("Collect value",i),console.log("Prize",a),(0,o.jsxs)("div",{className:"rounded-xl lg:after:w-650 outline-none text-md border-2 border-gray-200 p-4 mb-4",children:[" ",(0,o.jsxs)(M.E,{value:i,onChange:s,children:[(0,o.jsx)(M.E.Label,{as:"div",className:"text-md rounded-xl font-medium",children:"Who can collect your video?"}),(0,o.jsx)("div",{children:l.map(e=>(0,o.jsx)(M.E.Option,{value:e,children:t=>{let{active:l,checked:n}=t;return(0,o.jsx)("div",{className:(0,S.Z)("p-2 cursor-pointer rounded-xl",{"bg-blue-700 text-white":n,"bg-white text-black":!n}),children:e})}},e))})]}),(0,o.jsxs)(M.E,{value:a,onChange:d,children:[(0,o.jsx)(M.E.Label,{as:"div",className:"text-md rounded-xl font-medium",children:"Price (in wMatic):"}),(0,o.jsx)("div",{className:"flex flex-row ",children:n.map(e=>(0,o.jsx)(M.E.Option,{value:e,children:t=>{let{active:l,checked:n}=t;return(0,o.jsx)("div",{className:(0,S.Z)("p-2 cursor-pointer rounded-xl",{"bg-blue-700 text-white":n,"bg-white text-black":!n}),children:e})}},e))})]})]})};var E=l(33962),U=l(11281);let T=()=>{let e=(0,r.useRef)(null),[t,l]=(0,r.useState)(!1),[n,a]=(0,r.useState)(null),[x,m]=(0,r.useState)(!1),h=(0,u.qr)(e=>e.currentProfile),p=(0,u.qr)(e=>e.uploadedVideo),v=(0,u.qr)(e=>e.setUploadedVideo),f=(0,u.qr)(e=>e.setBundlrData),[j,w]=(0,r.useState)(""),[y,k]=(0,r.useState)(""),[M,S]=(0,r.useState)(c.F5[0].name),{mutate:T,data:B,progress:L,isSuccess:Z,error:D}=(0,i.b)(n?{sources:[{name:n.name,file:n}]}:null);console.log("Current User is",h),console.log("COLLECT MODULE",p.collectModule),(0,r.useEffect)(()=>{console.log(N(p.collectModule))});let F=()=>{v(u.sr),f(u.Ju),k(""),w(""),a(null)};(0,r.useEffect)(()=>{p.isIndexed&&F()},[p.isIndexed]);let I=e=>{if(e.target.files){let t=e.target.files[0],l=URL.createObjectURL(t);a(t),v({preview:l})}},q=e=>{if(e.preventDefault(),console.log("Video File",n),!n){b.ZP.error("Please select a video!");return}if(n){let t=URL.createObjectURL(n),l=d()(n);console.log("Stream",l),v({stream:l,preview:t,videoType:n.type||"video/mp4",title:y,description:j,category:M,isUploadToAr:!0,buttonText:"Upload Video"}),b.ZP.success("Please sign with your wallet to check you storage balance on Bundlr and if necessary fund it with some Matic.")}D&&console.log("Error",D)};return(0,o.jsxs)("div",{className:"flex w-full absolute left-0 pt-10 lg:pt-5 bg-[#d9dff1f6] justify-center",children:[(0,o.jsx)(U.Z,{title:"Upload Video • ".concat(g.iC),description:"Upload Video to ".concat(g.iC,' using the Livepeer.com network"'),image:"/images/icon.png"}),(0,o.jsxs)("div",{className:" bg-white rounded-xl flex gap-6 flex-wrap justify-center items-center p-14 pt-6 md:mb-10 ",children:[(0,o.jsxs)("div",{className:"md:object-contain md:h-full",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-2xl font-bold",children:"Upload Video"}),(0,o.jsx)("p",{className:"text-md text-gray-400 mt-1",children:"Post a video to your account"})]}),(0,o.jsxs)("div",{className:"w-[250px] flex-shrink-0 border-2 border-gray-300 rounded border-dashed flex flex-col justify-center items-center p-8 mt-8 transition cursor-pointer hover:border-red-300 hover:bg-gray-100",children:[t?(0,o.jsx)("p",{children:"Uploading...."}):(0,o.jsx)("div",{children:n?(0,o.jsx)("div",{children:p.preview&&(0,o.jsx)("video",{className:"w-[250px] h-[240px] border-2 border-black",muted:!0,autoPlay:!0,controls:!0,title:null==n?void 0:n.name,src:p.preview})}):(0,o.jsxs)("label",{className:"cursor-pointer rounded-xl",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,o.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,o.jsx)("p",{className:"font-bold text-xl",children:(0,o.jsx)(s.Qvc,{className:"text-gray-300 text-6xl"})}),(0,o.jsx)("p",{className:"text-xl rounded-full font-semibold",children:"Upload Video"})]}),(0,o.jsxs)("p",{className:"text-gray-400 text-center mt-10 text-sm leading-10",children:["MP4 or WebM or ogg ",(0,o.jsx)("br",{}),"Make it short ",(0,o.jsx)("br",{})]}),(0,o.jsx)("p",{className:"w-full rounded-xl bg-blue-700 text-white p-2 text-center",children:"Select File"})]}),(0,o.jsx)("input",{ref:e,type:"file",accept:"video/mp4",name:"upload-video",className:"hidden",onChange:I,required:!0})]})}),x&&(0,o.jsx)("p",{className:"text-center text-xl text-red-400 font-semibold mt-4 w-[250px]",children:"Please select a video file"})]}),(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)(P,{})})]}),(0,o.jsx)("form",{onSubmit:q,children:(0,o.jsxs)("div",{className:"flex flex-col gap-3 pb-10",children:[(0,o.jsx)("label",{className:"text-md font-medium",children:"Title"}),(0,o.jsx)("input",{type:"text",value:y,onChange:e=>k(e.target.value),className:"rounded-xl lg:after:w-650 outline-none text-md border-2 border-gray-200 p-2"}),(0,o.jsx)("label",{className:"text-md font-medium",children:"Description"}),(0,o.jsx)("input",{type:"text",value:j,onChange:e=>w(e.target.value),className:"rounded-xl lg:after:w-650 outline-none text-md border-2 border-gray-200 p-2"}),(0,o.jsx)("label",{className:"text-md rounded-xl font-medium",children:"Choose a Category"}),(0,o.jsxs)("select",{onChange:e=>S(e.target.value),className:"outline-none border-2 border-gray-200 text-md capitalize lg:p-4 p-2 rounded cursor-pointer",children:[c.F5.map(e=>(0,o.jsx)("option",{className:"outline-none capitalize bg-white text-gray-700 text-md p-2 hover:bg-slate-300",value:e.name,children:e.name},e.name)),";"]}),p.stream&&(0,o.jsx)(C,{}),(0,o.jsxs)("div",{className:"flex gap-6 mt-10",children:[(0,o.jsxs)("button",{onClick:F,type:"button",className:"border-gray-300 border-2 text-md font-medium p-2 rounded-xl w-28 lg:w-44 outline-none",children:[" ","Discard"]}),p.title&&p.description&&p.stream?(0,o.jsx)("button",{type:"button",className:"bg-blue-700 text-white text-md font-medium p-2 rounded-xl w-28 lg:w-44 outline-none",disabled:p.loading,children:(0,o.jsxs)("div",{className:"flex justify-around",children:[(0,o.jsx)("div",{children:(0,o.jsx)(A,{})}),p.loading&&(0,o.jsx)("div",{children:(0,o.jsx)(E.$,{})})]})}):(0,o.jsx)("div",{children:(0,o.jsx)("button",{type:"submit",className:"bg-blue-700 text-white text-md font-medium p-2 rounded-xl w-28 lg:w-44 outline-none",children:"Connect to Bundlr"})})]})]})})]})]})};var B=l(62444);let L=()=>(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)(n.Z,{})}),(0,o.jsx)("div",{children:(0,o.jsx)(T,{})}),(0,o.jsx)("div",{children:(0,o.jsx)(B.Z,{})})]});var Z=L},28289:function(){},52215:function(){}},function(e){e.O(0,[3714,8766,7025,2692,4980,2013,5445,9866,3874,1228,7856,6552,8179,3987,1664,9869,6526,7871,3275,7410,9717,9774,2888,179],function(){return e(e.s=57270)}),_N_E=e.O()}]);