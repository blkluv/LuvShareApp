(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4638],{84831:function(e,l,t){"use strict";t.d(l,{Z:function(){return L}});var a=t(85893),n=t(86010),s=t(67294),r=t(48113),i=t(5678),o=t(92321),d=t(34625),c=t(92359),u=t(59355),x=t(29780),m=t(86501);let h=(e,l,t)=>{let a=new Image;a.crossOrigin="Anonymous",a.src=e,a.onload=()=>{let e=document.createElement("canvas"),n=e.getContext("2d");e.width=a.width,e.height=a.height,null==n||n.drawImage(a,0,0,a.width,a.height),e.toBlob(e=>{if(e){let a=new File([e],l,{type:e.type});t(a)}})},a.onerror=()=>{t(null)}};var p=t(6154);let v=(e,l)=>{d.M8&&d.Mw&&p.Z.post(d.GA,{source:"web",level:e,message:l}).catch(e=>{console.error(e)})},f={log:(e,l)=>{console.log(e,l)},warn:function(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];console.warn(...l)},error:(e,l)=>{v("error","".concat(e," ").concat(JSON.stringify(l))),console.error(e,l)}},b=(e,l)=>new Promise(t=>{let a=document.createElement("video"),n=document.createElement("canvas");a.autoplay=!0,a.muted=!0,a.src=URL.createObjectURL(e),a.onloadedmetadata=()=>{a.currentTime=l},a.oncanplay=()=>{setTimeout(()=>{let e=n.getContext("2d");return n.width=a.videoWidth,n.height=a.videoHeight,null==e||e.drawImage(a,0,0,a.videoWidth,a.videoHeight),t(n.toDataURL("image/png"))},100)}}),g=(e,l)=>new Promise(t=>{try{if(!e.size)return[];let a=document.createElement("video");a.autoplay=!0,a.muted=!0,a.src=URL.createObjectURL(e),a.onloadeddata=async()=>{let n=[],s=Math.floor(a.duration/l);for(let r=0;r<l;r++){let i=s*r,o=await b(e,i);n.push(o)}t(n)}}catch(n){f.error("[Error Generate Video Thumbnails]",n),t([])}});var j=t(33962),y=t(92882);t(9747);var w=t(62641);let N=()=>{let e=(0,s.useMemo)(()=>Array(8).fill(1),[]);return(0,a.jsx)(a.Fragment,{children:e.map((e,l)=>(0,a.jsx)("div",{className:(0,n.Z)("h-32 w-full max-w-[5rem] animate-pulse rounded-lg",0===l&&"min-w-[4rem]"),children:(0,a.jsx)("div",{className:"h-32 rounded-lg bg-gray-300 dark:bg-gray-700"})},"".concat(e,"_").concat(l)))})};var Z=t(7814),k=t(10050);let C=()=>{let[e,l]=(0,s.useState)([]),[t,n]=(0,s.useState)(!1),[o,d]=(0,s.useState)(-1),c=(0,r.l)(e=>e.attachments),u=(0,r.l)(e=>e.videoThumbnail),x=(0,r.l)(e=>e.setVideoThumbnail),{file:p}=c[0],v=async e=>{x({uploading:!0});let l=await (0,w.l)(e);return l.original.url||m.Am.error("Failed to upload thumbnail"),x({url:l.original.url,type:e.type||"image/jpeg",uploading:!1}),l},f=async t=>{var a,n,s;d(t),(null===(a=e[t])||void 0===a?void 0:a.ipfsUrl)===""?(x({uploading:!0}),h(e[t].blobUrl,"thumbnail.jpeg",async a=>{if(!a)return m.Am.error("Please upload a custom thumbnail");let n=await v(a);l(e.map((e,l)=>(l===t&&(e.ipfsUrl=n.original.url),e)))})):x({url:null===(n=e[t])||void 0===n?void 0:n.ipfsUrl,type:(null===(s=e[t])||void 0===s?void 0:s.mimeType)||"image/jpeg",uploading:!1})},b=async e=>{try{let t=await g(e,4),a=[];for(let n of t)a.push({blobUrl:n,ipfsUrl:"",mimeType:"image/jpeg"});l(a),d(0)}catch(s){console.error("Failed to generate thumbnails",s)}};(0,i.rf)(()=>{f(o)},[o]),(0,s.useEffect)(()=>(p&&b(p),()=>{d(-1),l([])}),[p]);let y=async t=>{var a,s;if(null===(a=t.target.files)||void 0===a?void 0:a.length)try{n(!0),d(-1);let r=t.target.files[0],i=await v(r),o=null===(s=window.URL)||void 0===s?void 0:s.createObjectURL(r);l([{blobUrl:o,ipfsUrl:i.original.url,mimeType:r.type||"image/jpeg"},...e]),d(0)}catch(c){console.error("Failed to upload thumbnail",c),m.Am.error("Failed to upload thumbnail")}finally{n(!1)}},C=u.uploading;return(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("b",{children:"Choose Thumbnail"}),(0,a.jsxs)("div",{className:"mt-1 grid grid-cols-3 gap-3 py-0.5 md:grid-cols-5",children:[(0,a.jsxs)("label",{htmlFor:"chooseThumbnail",className:"max-w-32 flex h-24 w-full flex-none cursor-pointer flex-col items-center justify-center rounded-xl border dark:border-gray-700",children:[(0,a.jsx)("input",{id:"chooseThumbnail",type:"file",accept:".png, .jpg, .jpeg",className:"hidden w-full",onChange:y}),t?(0,a.jsx)(j.$,{size:"sm"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"mb-1 h-5 w-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Upload"})]})]}),e.length?null:(0,a.jsx)(N,{}),e.map((e,l)=>{let{blobUrl:t,ipfsUrl:n}=e,s=o===l,r=n===u.url;return(0,a.jsxs)("button",{type:"button",disabled:C,onClick:()=>f(l),className:"relative",children:[(0,a.jsx)("img",{className:"h-24 w-full rounded-xl border object-cover dark:border-gray-700",src:t,alt:"thumbnail",draggable:!1}),n&&s&&r?(0,a.jsx)("div",{className:"absolute inset-0 grid place-items-center rounded-xl bg-gray-100/10",children:(0,a.jsx)(k.Z,{className:"h-6 w-6 text-green-500"})}):null,C&&s&&(0,a.jsx)("div",{className:"absolute inset-0 grid place-items-center rounded-xl bg-gray-100/10 backdrop-blur-md",children:(0,a.jsx)(j.$,{size:"sm"})})]},"".concat(t,"_").concat(l))})]})]})};var S=t(45706),T=t(44762),_=t(30052),F=t(23),P=t(5362);t(44753);var I=t(23286);let A=e=>{var l,t,a;return(0,I.A)(null===(l=null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.media[0])||void 0===l?void 0:null===(a=l.original)||void 0===a?void 0:a.url)};var R=t(11163),M=t(55225),U=t(21192),O=t(38624);let E=e=>{let{publication:l}=e,t=(0,y.qr)(e=>e.videoWatchTime),[n,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!0),[x,m]=(0,s.useState)(""),h=(0,s.useRef)(null),[p,v]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[g,j]=(0,s.useState)(!1),w="Mirror"===l.__typename,N=w?l.mirrorOf:l;(0,R.useRouter)();let[Z,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=new IntersectionObserver(l=>{l.forEach(l=>{l.isIntersecting&&(v(!0),e.disconnect())})});h.current&&e.observe(h.current)},[]);let C=N.appId===d.fO||l.appId===d.AF;return(0,a.jsxs)("div",{className:"lenshare-player",children:[(0,a.jsx)("div",{children:(0,a.jsx)(U.Z,{currentTime:t,publicationId:null==N?void 0:N.id,permanentUrl:A(N),posterUrl:(0,M.Z)((0,I.A)((0,O.Z)(N.metadata)),C?"thumbnail_v":"thumbnail"),showControls:!0,options:{autoPlay:!0,muted:!0,loop:!0,loadingSpinner:!1,isCurrentlyShown:!0}})}),(0,a.jsx)("div",{className:"absolute right-0 top-0 m-2 mr-6 flex flex-row space-x-6 p-2 md:relative md:m-0 md:flex md:flex-col md:space-x-0 md:p-0 md:pt-[50px]",children:(0,a.jsx)("div",{className:"dropdown relative inline-block"})})]})},D=function(e){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return 1===e?{aspect:l?"aspect-w-16 aspect-h-10":"",row:"grid-cols-1 grid-rows-1"}:2===e?{aspect:"aspect-w-16 aspect-h-12",row:"grid-cols-2 grid-rows-1"}:e>2?{aspect:"aspect-w-16 aspect-h-12",row:"grid-cols-2 grid-rows-2"}:void 0},z=e=>{var l;let{attachments:t=[],isNew:m=!1,hideDelete:h=!1,publication:p,txn:v}=e,f=(0,r.l)(e=>e.setAttachments),b=(0,r.l)(e=>e.setVideoDurationInSeconds),[g,j]=(0,s.useState)(null),y=(0,s.useRef)(null),w=()=>{var e,l;(null===(e=y.current)||void 0===e?void 0:e.duration)&&(null===(l=y.current)||void 0===l?void 0:l.duration)!==1/0&&b(y.current.duration.toFixed(2))};(0,i.rf)(()=>{y.current&&(y.current.onloadeddata=w)},[y,t]);let N=e=>{f(t.filter(l=>l!==e))},Z=(null==t?void 0:t.some(e=>{var l;return d.Xe.includes(null==e?void 0:null===(l=e.original)||void 0===l?void 0:l.mimeType)}))?null==t?void 0:t.slice(0,1):null==t?void 0:t.slice(0,4),k=null==Z?void 0:Z.length;return 0!==k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,n.Z)(null===(l=D(k))||void 0===l?void 0:l.row,"mt-3 grid gap-2"),children:null==Z?void 0:Z.map((e,l)=>{var t,s,r;let i=null===(t=e.original)||void 0===t?void 0:t.mimeType,f=m?e.previewItem:(0,c.Z)(null===(s=e.original)||void 0===s?void 0:s.url),b=d.cV.includes(i),g=d.Xe.includes(i);return(0,a.jsxs)("div",{className:(0,n.Z)(g||b?"":"".concat(null===(r=D(k,m))||void 0===r?void 0:r.aspect," ").concat(3===k&&0===l?"row-span-2":""),{"w-full":b||g,"w-2/3":!g&&1===k},"relative"),onClick:u.Z,"aria-hidden":"true",children:["image/svg+xml"===i?(0,a.jsx)(x.z,{className:"text-sm",variant:"primary",icon:(0,a.jsx)(F.Z,{className:"h-4 w-4"}),onClick:()=>window.open(f,"_blank"),children:(0,a.jsx)("span",{children:"Open Image in new tab"})}):g?m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("video",{className:"w-full overflow-hidden rounded-xl",src:f,ref:y,disablePictureInPicture:!0,disableRemotePlayback:!0,controlsList:"nodownload noplaybackrate",controls:!0}),(0,a.jsx)(C,{})]}):(0,a.jsx)(E,{publication:p}):b?(0,a.jsx)(o.Z,{src:f,isNew:m,publication:p,txn:v,expandCover:e=>j(e)}):(0,a.jsx)(_.E,{className:"cursor-pointer rounded-lg border bg-gray-100 object-cover dark:border-gray-700 dark:bg-gray-800",loading:"lazy",height:1e3,width:1e3,onError:e=>{let{currentTarget:l}=e;l.src=f},onClick:()=>{j(f)},src:m?f:(0,S.Z)(f,d.y7),alt:m?f:(0,S.Z)(f,d.y7),"data-testid":"attachment-image-".concat(f)}),m&&!h&&(g?(0,a.jsx)(x.z,{className:"mt-3",variant:"danger",size:"sm",icon:(0,a.jsx)(P.Z,{className:"h-4 w-4"}),onClick:()=>N(e),outline:!0,children:"Cancel Upload"}):(0,a.jsx)("div",{className:(0,n.Z)(b?"absolute left-2 top-2":"m-3"),children:(0,a.jsx)("button",{type:"button",className:"rounded-full bg-gray-900 p-1.5 opacity-75",onClick:()=>N(e),children:(0,a.jsx)(P.Z,{className:"h-4 w-4 text-white"})})}))]},l+f)})}),(0,a.jsx)(T.q,{show:Boolean(g),url:g,onClose:()=>j(null)})]}):null};var L=z},92321:function(e,l,t){"use strict";t.d(l,{q:function(){return Z},Z:function(){return C}});var a=t(85893),n=t(67294),s=t(48113),r=t(1604),i=t(33962),o=t(34625),d=t(45706),c=t(62641),u=t(92359),x=t(7814),m=t(86010),h=t(30052);let p=e=>{let{isNew:l=!1,cover:t,setCover:s,imageRef:r,expandCover:p}=e,[v,f]=(0,n.useState)(!1),b=e=>{f(!1)},g=async e=>{var l;if(null===(l=e.target.files)||void 0===l?void 0:l.length)try{f(!0);let t=await (0,c.l)(e.target.files[0]);s(t.original.url,t.original.mimeType)}catch(a){b(a)}};return(0,a.jsxs)("div",{className:"group relative flex-none overflow-hidden",children:[(0,a.jsx)("button",{type:"button",className:"flex focus:outline-none",onClick:()=>p(t?(0,u.Z)(t):t),children:(0,a.jsx)(h.E,{onError:e=>{let{currentTarget:l}=e;l.src=t?(0,u.Z)(t):t},src:t?(0,d.Z)((0,u.Z)(t),o.y7):t,className:"h-24 w-24 rounded-xl object-cover md:h-40 md:w-40 md:rounded-none",draggable:!1,alt:"attachment-audio-cover-".concat(t),"data-testid":"attachment-audio-cover-".concat(t),ref:r})}),l&&(0,a.jsxs)("label",{className:(0,m.Z)({visible:v&&!t,invisible:t},"absolute top-0 grid h-24 w-24 cursor-pointer place-items-center bg-gray-100 backdrop-blur-lg group-hover:visible dark:bg-gray-900 md:h-40 md:w-40"),children:[v&&!t?(0,a.jsx)(i.$,{size:"sm"}):(0,a.jsxs)("div",{className:"flex flex-col items-center text-sm text-black opacity-60 dark:text-white",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Add cover"})]}),(0,a.jsx)("input",{type:"file",accept:".png, .jpg, .jpeg, .svg",className:"hidden w-full",onChange:g})]})]})};t(44753);var v=t(23106);let f=e=>{let{playerRef:l,src:t}=e;return(0,a.jsx)(v.Z,{ref:l,source:{type:"audio",sources:[{src:t}]},options:{controls:["progress","current-time","mute","volume"]}})};var b=(0,n.memo)(f),g=t(38624),j=t(83436),y=t(21321),w=t(4239),N=t(31586);let Z=(0,r.Ry)({title:(0,r.Z_)().trim().min(1,{message:"Invalid audio title"}),author:(0,r.Z_)().trim().min(1,{message:"Invalid author name"}),cover:(0,r.Z_)().trim().min(1,{message:"Invalid cover image"})}),k=e=>{var l,t,r,i,o;let{src:d,isNew:c=!1,publication:u,txn:x,expandCover:m}=e,[h,v]=(0,n.useState)(!1),f=(0,s.l)(e=>e.audioPublication),Z=(0,s.l)(e=>e.setAudioPublication),k=(0,n.useRef)(null),C=(0,n.useRef)(null),S=()=>{var e,l,t;if(k.current){if((null===(e=k.current)||void 0===e?void 0:e.plyr.paused)&&!h)return v(!0),null===(t=k.current)||void 0===t?void 0:t.plyr.play();v(!1),null===(l=k.current)||void 0===l||l.plyr.pause()}},T=e=>{Z({...f,[e.target.name]:e.target.value})};return(0,a.jsx)("div",{className:"bg-brand-500 overflow-hidden rounded-xl border-2 px-3.5 pt-3.5 dark:border-blue-700 md:p-0","data-testid":"attachment-audio-".concat(d),children:(0,a.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap md:space-x-2",children:[(0,a.jsx)(p,{isNew:c&&!x,cover:c?null!==(t=null==x?void 0:x.cover)&&void 0!==t?t:f.cover:(0,g.Z)(null==u?void 0:u.metadata),setCover:(e,l)=>Z({...f,cover:e,coverMimeType:l}),imageRef:C,expandCover:m}),(0,a.jsxs)("div",{className:"flex w-full flex-col justify-between truncate py-1 md:px-3",children:[(0,a.jsx)("div",{className:"mt-3 flex justify-between md:mt-7",children:(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2.5 truncate",children:[(0,a.jsx)("button",{type:"button",onClick:S,children:!h||(null===(l=k.current)||void 0===l?void 0:l.plyr.paused)?(0,a.jsx)(y.Z,{className:"h-[50px] w-[50px] text-blue-600 hover:text-white"}):(0,a.jsx)(j.Z,{className:"h-[50px] w-[50px] text-blue-600 hover:text-white"})}),(0,a.jsx)("div",{className:"w-full truncate pr-3",children:c&&!x?(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)("input",{className:"border-none bg-transparent text-lg text-blue-600 outline-none placeholder:text-white",placeholder:"Add title",name:"title",value:f.title,autoComplete:"off",onChange:T}),(0,a.jsx)("input",{className:"border-none bg-transparent text-blue-600/70 outline-none placeholder:text-white/70",placeholder:"Add author",name:"author",value:f.author,onChange:T,autoComplete:"off"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{className:"truncate text-lg text-blue-600",children:null!==(r=null==u?void 0:u.metadata.name)&&void 0!==r?r:x.title}),(0,a.jsx)("h6",{className:"truncate text-blue-600/70",children:null!==(o=null!==(i=null==x?void 0:x.author)&&void 0!==i?i:(0,w.Z)(null==u?void 0:u.metadata.attributes,"author"))&&void 0!==o?o:(0,N.Z)(null==u?void 0:u.profile.name)})]})})]})}),(0,a.jsx)("div",{className:"md:pb-3",children:(0,a.jsx)(b,{src:d,playerRef:k})})]})]})})};var C=k},49117:function(e,l,t){"use strict";var a=t(85893),n=t(11761);let s=e=>{let{type:l="Publication"}=e;return(0,a.jsx)(n.Z,{className:"!bg-gray-100 dark:!bg-gray-800",children:(0,a.jsxs)("div",{className:"px-4 py-3 text-sm",children:[l," was hidden by the author"]})})};l.Z=s},92304:function(e,l,t){"use strict";t.d(l,{Z:function(){return ev}});var a=t(85893),n=t(20240),s=t(4239),r=t(72154),i=t(86010),o=t(41664),d=t.n(o),c=t(27102),u=t(84831),x=t(43797),m=t(68980),h=t(38564),p=t(51406),v=t(61896);let f=e=>{let{showActions:l=!0}=e;return(0,a.jsxs)("div",{className:"space-y-4 p-5",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(v.Z,{}),(0,a.jsx)("div",{className:"shimmer h-5 w-5 rounded-lg"})]}),(0,a.jsxs)("div",{className:"ml-[52px] space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"shimmer h-3 w-7/12 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-3 w-1/3 rounded-lg"})]}),l&&(0,a.jsxs)("div",{className:"flex gap-7 pt-3",children:[(0,a.jsx)("div",{className:"shimmer h-5 w-5 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-5 w-5 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-5 w-5 rounded-lg"})]})]})]})},b=e=>{let{publicationId:l,profile:t}=e,{data:n,loading:s,error:r}=(0,m.Kwl)({variables:{request:{publicationId:l}}});return s?(0,a.jsx)(p.Z,{zeroPadding:!0,children:(0,a.jsx)(f,{showActions:!1})}):!r&&(null==n?void 0:n.publication)?(0,a.jsx)(p.Z,{zeroPadding:!0,children:(0,a.jsx)(h.Z,{profile:t,publication:n.publication})}):null};var g=t(54209),j=t(34625),y=t(92359),w=t(52942),N=t(847),Z=t(6154),k=t(11163),C=t(67294),S=t(92882),T=t(96806),_=t(31618),F=t(11761),P=t(59355),I=t(79352),A=t(56186),R=t(7543),M=t(7814),U=t(62940),O=t(63750),E=t(29451),D=t(93300),z=t(66167),L=t(93189);let q=e=>{let{address:l,chainId:t,enabled:a}=e,n=()=>{switch(t){case 1:default:return"eth-mainnet";case 5:return"eth-goerli";case 137:return"polygon-mainnet";case 80001:return"polygon-mumbai"}},s=async()=>{let e=await (0,Z.Z)({method:"GET",url:"https://".concat(n(),".g.alchemy.com/nft/v2/").concat(j.QI,"/getContractMetadata"),params:{contractAddress:l}});return e.data},{data:r,error:i}=(0,L.a)(["nftData"],()=>s().then(e=>e),{enabled:a});return{data:r,error:i}},B=e=>{let{icon:l,children:t}=e;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[l,(0,a.jsx)("span",{children:t})]})},V=e=>{var l,t,n,s,r,o,h,p,v,f;let{encryptedPublication:b}=e,{pathname:L}=(0,k.useRouter)(),V=(0,S.qr)(e=>e.currentProfile),W=(0,T.u)(e=>e.setShowAuthModal),[G,K]=(0,C.useState)(null),[Q,H]=(0,C.useState)(null),[J,Y]=(0,C.useState)(!1),[X,$]=(0,C.useState)(null==b?void 0:null===(l=b.canDecrypt)||void 0===l?void 0:l.result),[ee,el]=(0,C.useState)(null==b?void 0:b.canDecrypt.reasons),et=(0,_.t_)(),{data:ea}=(0,w.Z)(),en=(null==b?void 0:null===(t=b.metadata)||void 0===t?void 0:null===(n=t.content)||void 0===n?void 0:n.length)>450&&"/post/[id]"!==L;(0,m.mVA)({variables:{request:{publicationId:b.id},profileId:null!==(o=null==V?void 0:V.id)&&void 0!==o?o:null},pollInterval:5e3,skip:X||!V,onCompleted:e=>{let{publication:l}=e;$((null==l?void 0:l.canDecrypt.result)||!1),el((null==l?void 0:l.canDecrypt.reasons)||[])}});let es=e=>{var l,t,a,n;let s=null===(l=null===(t=b.metadata.encryptionParams)||void 0===t?void 0:t.accessCondition.or)||void 0===l?void 0:l.criteria,r=e=>s.map(l=>l[e]).find(e=>e);return(null===(a=r("and"))||void 0===a?void 0:a.criteria)?r("and").criteria.map(l=>l[e]).find(e=>e):(null===(n=r("or"))||void 0===n?void 0:n.criteria)?r("or").criteria.map(l=>l[e]).find(e=>e):s.map(l=>l[e]).find(e=>e)},er=es("token"),ei=es("nft"),eo=es("collect"),{data:ed}=(0,_.dQ)({address:null==er?void 0:er.contractAddress,chainId:null==er?void 0:er.chainID,enabled:Boolean(er)}),{data:ec}=q({address:null==ei?void 0:ei.contractAddress,chainId:null==ei?void 0:ei.chainID,enabled:Boolean(ei)}),eu="text-sm rounded-xl w-fit p-9 shadow-sm bg-gradient-to-tr from-brand-400 to-brand-600",ex=null==ee?void 0:ee.includes(m.f1D.HasNotCollectedPublication),em=!ex&&(null==ee?void 0:ee.includes(m.f1D.CollectNotFinalisedOnChain)),eh=null==ee?void 0:ee.includes(m.f1D.DoesNotFollowProfile),ep=!eh&&(null==ee?void 0:ee.includes(m.f1D.FollowNotFinalisedOnChain)),ev=null==ee?void 0:ee.includes(m.f1D.UnauthorizedBalance),ef=null==ee?void 0:ee.includes(m.f1D.DoesNotOwnNft),eb=async()=>{if(!ea||J)return;Y(!0);let e=(0,y.Z)(null==b?void 0:b.onChainContentURI),{data:l}=await Z.Z.get(e),t=await N.LensGatedSDK.create({provider:et,signer:ea,env:j._s}),{decrypted:a,error:n}=await t.gated.decryptMetadata(l);K(a),H(n),Y(!1)};return V?X?Q?(0,a.jsx)(z.B,{title:"Error while decrypting!",error:Q}):!G&&J?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"shimmer h-3 w-7/12 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-3 w-1/3 rounded-lg"})]}):G?(0,a.jsxs)("div",{className:"break-words",children:[(0,a.jsx)(c.Z,{className:(0,i.Z)({"line-clamp-5":en},"markup linkify text-md break-words"),children:null==G?void 0:G.content}),en&&(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-1 text-sm font-bold text-gray-500",children:[(0,a.jsx)(U.Z,{className:"h-4 w-4"}),(0,a.jsx)(d(),{href:"/post/".concat(null==b?void 0:b.id),children:"Show more"})]}),(null==G?void 0:null===(s=G.media)||void 0===s?void 0:s.length)?(0,a.jsx)(u.Z,{attachments:null==G?void 0:G.media}):(null==G?void 0:G.content)?(null===(r=(0,x.Z)(null==G?void 0:G.content))||void 0===r?void 0:r.length)>0&&(0,a.jsx)(g.Z,{url:(0,x.Z)(null==G?void 0:G.content)[0]}):null]}):(0,a.jsx)(F.Z,{className:(0,i.Z)(eu,"!cursor-pointer"),onClick:async e=>{(0,P.Z)(e),await eb()},children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 border-blue-600 font-bold text-blue-600",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5"}),(0,a.jsxs)("span",{children:["Decrypt"," ",(0,a.jsx)("span",{className:"lowercase",children:b.__typename})]})]})}):(0,a.jsxs)(F.Z,{className:(0,i.Z)(eu,"cursor-text"),onClick:P.Z,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 font-bold",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5 text-green-300"}),(0,a.jsx)("span",{className:"text-base font-black text-white",children:"To view this..."})]}),(0,a.jsxs)("div",{className:"space-y-2 pt-3.5 text-white",children:[ex&&(0,a.jsxs)(B,{icon:(0,a.jsx)(O.pNO,{className:"h-4 w-4"}),children:["Collect the"," ",(0,a.jsx)(d(),{href:"/post/".concat(null==eo?void 0:eo.publicationId),className:"font-bold lowercase underline",children:null==b?void 0:b.__typename})]}),em&&(0,a.jsx)(B,{icon:(0,a.jsx)(O.pNO,{className:"h-4 w-4 animate-pulse"}),children:"Collect finalizing on chain.."}),eh&&(0,a.jsxs)(B,{icon:(0,a.jsx)(R.Z,{className:"h-4 w-4"}),children:["Follow"," ",(0,a.jsxs)(d(),{href:"/u/".concat(null==b?void 0:null===(h=b.profile)||void 0===h?void 0:h.id),className:"font-bold",children:["@",(0,E.Z)(null==b?void 0:null===(p=b.profile)||void 0===p?void 0:p.handle)]})]}),ep&&(0,a.jsx)(B,{icon:(0,a.jsx)(R.Z,{className:"h-4 w-4 animate-pulse"}),children:"Follow finalizing on chain..."}),ev&&(0,a.jsxs)(B,{icon:(0,a.jsx)(O.oxP,{className:"h-4 w-4"}),children:["You need"," ",(0,a.jsxs)(d(),{href:"".concat(j.Bq,"/token/").concat(er.contractAddress),className:"font-bold underline",target:"_blank",rel:"noreferrer noopener",children:[er.amount," ",null==ed?void 0:ed.symbol]})," ","to unlock"]}),ef&&(0,a.jsxs)(B,{icon:(0,a.jsx)(M.Z,{className:"h-4 w-4"}),children:["You need"," ",(0,a.jsx)(D.u,{content:null==ec?void 0:null===(v=ec.contractMetadata)||void 0===v?void 0:v.name,placement:"top",children:(0,a.jsx)(d(),{href:"".concat(j.qP,"/collection/polygon/").concat(ei.contractAddress,"/items"),className:"font-bold underline",target:"_blank",rel:"noreferrer noopener",children:null==ec?void 0:null===(f=ec.contractMetadata)||void 0===f?void 0:f.symbol})})," ","nft to unlock"]})]})]}):(0,a.jsx)(F.Z,{className:(0,i.Z)(eu,"!cursor-pointer"),onClick:e=>{(0,P.Z)(e),W(!0)},children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 font-bold text-white",children:[(0,a.jsx)(I.orh,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Login to decrypt"})]})})};var W=t(4896),G=t(64985),K=t(93053),Q=t(88037),H=t(5678),J=t(22257),Y=t(25675),X=t.n(Y),$=t(8974),ee=t(48900),el=t(31586),et=t(22023);let ea=e=>{var l;let{profile:t,timestamp:n="",smallAvatar:s=!1}=e,r=()=>(0,a.jsx)(X(),{src:(0,J.Z)(t),loading:"lazy",className:(0,i.Z)(s?"h-5 w-5":"h-6 w-6","rounded-full border bg-gray-200 dark:border-gray-700"),height:s?20:24,width:s?20:24,alt:(0,E.Z)(null==t?void 0:t.handle)}),o=()=>(0,a.jsxs)("div",{className:"flex max-w-sm items-center",children:[(0,a.jsx)("div",{className:"truncate",children:null!==(l=(0,el.Z)(null==t?void 0:t.name))&&void 0!==l?l:(0,E.Z)(null==t?void 0:t.handle)}),(0,a.jsx)($.Z,{className:"ml-2 text-sm",slug:(0,E.Z)(null==t?void 0:t.handle),prefix:"@"}),n?(0,a.jsxs)("span",{className:"lt-text-gray-500",children:[(0,a.jsx)("span",{className:"mx-1.5",children:"\xb7"}),(0,a.jsx)("span",{className:"text-xs",title:(0,ee.Z)(n),children:(0,et.RK)(n)})]}):null]});return(0,a.jsx)(d(),{href:"/u/".concat((0,E.Z)(null==t?void 0:t.handle)),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r,{}),(0,a.jsx)(o,{})]})})};var en=(0,C.memo)(ea),es=t(61452),er=t(48974),ei=t(29780),eo=t(33962),ed=t(38439);let ec=e=>{var l;let{peer:t}=e,n=t.displayName,{data:s,loading:r}=(0,ed.O_h)({variables:{request:{profileId:n}},skip:!n||"Guest"===n});if(r)return(0,a.jsx)("div",{children:"Loading..."});if(!(null==s?void 0:s.profile))return null;let i=null==s?void 0:s.profile,o=()=>(0,a.jsx)(X(),{src:(0,J.Z)(i),loading:"lazy",className:"h-10 w-10 rounded-full border bg-gray-200 dark:border-gray-700 sm:h-12 sm:w-12",alt:(0,E.Z)(null==i?void 0:i.handle)}),d=()=>(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"max-w-[80px] truncate text-sm sm:max-w-[120px]",children:null!==(l=(0,el.Z)(null==i?void 0:i.name))&&void 0!==l?l:(0,E.Z)(null==i?void 0:i.handle)})});return(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)(o,{}),(0,a.jsxs)("div",{className:"space-y-1 text-center",children:[(0,a.jsx)(d,{}),(0,a.jsx)("div",{className:"lt-text-gray-500 text-xs",children:"host"===t.role?"Host":"Listener"})]})]})},eu=e=>{let{publication:l,space:t}=e,n=(0,S.qr)(e=>e.currentProfile),[s,r]=(0,C.useState)(""),{initialize:i,isInitialized:o,me:d}=(0,Q.LV)(),{joinLobby:c,isLobbyJoined:u}=(0,Q.m6)(),{fetchAudioStream:x,stopProducingAudio:m,produceAudio:h,stream:p}=(0,Q.QV)(),{joinRoom:v,leaveRoom:f,isRoomJoined:b}=(0,Q.NW)(),{setDisplayName:g}=(0,G.y)(),{peers:j}=(0,Q.P0)(),{address:y}=(0,_.mA)(),{metadata:w}=l,{signMessage:N,isLoading:Z}=(0,_.QW)({onSuccess:async e=>{let l=await (0,W.Y_)(e,y);r(l.accessToken)}});return(0,H.qR)(()=>{i("3kzet_ujpjtF8dzciFefEOAZqrDNpdQS")}),(0,H.rf)(()=>{o&&s&&c(t.id,s)},[o,s]),(0,H.rf)(()=>{x.isCallable&&x()},[u]),(0,H.rf)(()=>{b&&g(null==n?void 0:n.id)},[b]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsx)(en,{profile:t.host,smallAvatar:!0}),(0,a.jsxs)("div",{className:"mt-2 space-y-3",children:[(0,a.jsx)("b",{className:"text-lg",children:w.content}),s?b?(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"grid grid-cols-3 gap-6 sm:grid-cols-5",children:Object.values(j).filter(e=>"Guest"!==e.displayName).map(e=>(0,a.jsxs)(a.Fragment,{children:[e.mic?(0,a.jsx)(K.B,{peerId:e.peerId,track:e.mic},e.peerId):null,(0,a.jsx)(ec,{peer:e},e.peerId)]}))})}):(0,a.jsx)(ei.z,{className:"flex w-full justify-center",icon:(0,a.jsx)(es.Z,{className:"h-5 w-5"}),onClick:v,disabled:!v.isCallable,children:"Join Space"}):(0,a.jsx)(ei.z,{className:"flex w-full justify-center",icon:Z?(0,a.jsx)(eo.$,{size:"xs",className:"mr-1"}):(0,a.jsx)(er.Z,{className:"h-5 w-5"}),disabled:Z,onClick:async()=>{let e=await (0,W.XY)(y);N({message:e.message})},children:"Sign to continue"})]})]}),b?(0,a.jsxs)("div",{className:"flex items-center justify-between space-x-2 border-t p-5",children:["host"===d.role?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ei.z,{disabled:!h.isCallable,onClick:()=>h(p),children:"Talk"}),(0,a.jsx)(ei.z,{disabled:!m.isCallable,onClick:m,children:"Mute"})]}):(0,a.jsx)("div",{}),(0,a.jsx)(ei.z,{variant:"danger",disabled:!f.isCallable,onClick:()=>f(),children:"Leave"})]}):null]})};var ex=t(89814),em=t(64208);let eh=e=>{var l,t;let{publication:n}=e,[r,i]=(0,C.useState)(!1),{metadata:o}=n,d=JSON.parse((0,s.Z)(o.attributes,"audioSpace")),{data:c,loading:u}=(0,m.zip)({variables:{request:{ownedBy:[d.host]}}});if(u)return(0,a.jsx)("div",{children:"Loading..."});let x=null==c?void 0:null===(l=c.profiles)||void 0===l?void 0:null===(t=l.items)||void 0===t?void 0:t.find(e=>(null==e?void 0:e.ownedBy)===d.host&&(null==e?void 0:e.isDefault));return(0,a.jsxs)(p.Z,{className:"!bg-brand-500/30 border-brand-400 mt-0 !p-3",children:[(0,a.jsx)(en,{profile:x,smallAvatar:!0}),(0,a.jsxs)("div",{className:"mt-2 space-y-3",children:[(0,a.jsx)("b",{className:"text-lg",children:o.content}),(0,a.jsx)(ei.z,{className:"!mt-4 flex w-full justify-center",icon:(0,a.jsx)(ex.Z,{className:"h-5 w-5"}),onClick:()=>i(!0),children:"Open Space"})]}),(0,a.jsx)(em.u,{show:r,onClose:()=>i(!1),size:"md",title:"Space",icon:(0,a.jsx)(ex.Z,{className:"text-brand h-5 w-5"}),children:(0,a.jsx)(eu,{publication:n,space:{id:d.id,host:x}})})]})},ep=e=>{var l,t;let{publication:o,profile:m,showMore:h=!1,quoted:p=!1}=e,v=(0,r.Z)(n.T.Spaces),{id:f,metadata:j}=o,y=(null==j?void 0:null===(l=j.content)||void 0===l?void 0:l.length)>450&&h,w=(0,x.Z)(null==j?void 0:j.content),N=(null==w?void 0:w.length)>0,Z=(0,s.Z)(j.attributes,"quotedPublicationId"),k=(0,s.Z)(j.attributes,"audioSpace"),C=Boolean(k)?JSON.parse(k):null,S=null==j?void 0:j.content;if(Z)for(let T of w)T.includes(Z)&&(S=null==S?void 0:S.replace(T,""));if(null==j?void 0:j.encryptionParams)return(0,a.jsx)(V,{encryptedPublication:o});if(Boolean(null==C?void 0:C.id)&&v)return(0,a.jsx)(eh,{publication:o});let _=(null==j?void 0:null===(t=j.media)||void 0===t?void 0:t.length)>0,F=Z&&!p;return(0,a.jsxs)("div",{className:"break-words border-blue-500 ",children:[(0,a.jsx)(c.Z,{className:(0,i.Z)({"line-clamp-5":y},"markup linkify font-helvetica break-words text-xs font-bold"),children:S}),y&&(0,a.jsx)("div",{className:"lt-text-gray-500 mt-4 flex items-center space-x-1 text-sm font-bold",children:(0,a.jsx)(d(),{href:"/post/".concat(f),children:"Show more"})}),_?(0,a.jsx)(u.Z,{attachments:null==j?void 0:j.media,publication:o}):null,!N||_||F||p?null:(0,a.jsx)(g.Z,{url:w[0]}),F?(0,a.jsx)(b,{profile:m,publicationId:Z}):null]})};var ev=ep},49167:function(e,l,t){"use strict";t.d(l,{Z:function(){return v}});var a=t(85893),n=t(59355),s=t(86010),r=t(48113),i=t(67909),o=t(5362),d=t(92882),c=t(34625);let u=["0x16","0x01","0x02","0x05","0x06","0x0210","0x0d","0x24","0x8e","0x0636","0xa1","0x30aa","0x4b","0xfc3f","0x2ee4","0x2d","0x0a","0x09","0xabd0","0x01b430","0x73","0x3a","0x933b"],x=["0x01","0x02","0x18","0x15","0x038b","0x933b",37691],m=e=>c.M8?u.includes(e):x.includes(e),h=()=>{let e=(0,d.qr)(e=>e.currentProfile),l=!!e&&m(null==e?void 0:e.id);return{allowed:l}},p=e=>{var l,t;let{publication:d,feedItem:c,quoted:u=!1,isNew:x=!1}=e,m=(0,r.l)(e=>e.setQuotedPublication),{allowed:p}=h(),v="Mirror"===d.__typename,f=(null==c?void 0:c.comments)&&c.comments[0],b=c?f||(null==c?void 0:c.root):d,g=c?b.profile:v?null==d?void 0:null===(l=d.mirrorOf)||void 0===l?void 0:l.profile:null==d?void 0:d.profile,j=c?b.createdAt:v?null==d?void 0:null===(t=d.mirrorOf)||void 0===t?void 0:t.createdAt:null==d?void 0:d.createdAt;return(0,a.jsxs)("div",{className:(0,s.Z)(u?"pb-2":"pb-4","relative m-2 flex justify-between space-x-1.5 pt-3"),"data-testid":"publication-".concat(d.id,"-header"),children:[(0,a.jsx)("span",{onClick:n.Z,"aria-hidden":"true",children:u?(0,a.jsx)(i.Z,{profile:g,timestamp:j}):(0,a.jsx)(i.Z,{profile:g,timestamp:j,showStatus:!0})}),(0,a.jsx)("div",{className:"!-mr-[7px] flex items-center space-x-1",children:u&&x&&(0,a.jsx)("button",{className:"rounded-full p-1.5",onClick:e=>{(0,n.Z)(e),m(null)},"aria-label":"Remove Quote",children:(0,a.jsx)(o.Z,{className:"lt-text-gray-500 w-[15px] sm:w-[18px]"})})})]})};var v=p},97959:function(e,l,t){"use strict";var a=t(85893),n=t(86010),s=t(11163);let r=e=>{let{publication:l,className:t="",children:r}=e,{push:i}=(0,s.useRouter)();return(0,a.jsx)("article",{className:(0,n.Z)(t),onClick:()=>{let e=window.getSelection();e&&0!==e.toString().length||i("/post/".concat(null==l?void 0:l.id))},"data-testid":"publication-".concat(l.id),"aria-hidden":"true",children:r})};l.Z=r},38564:function(e,l,t){"use strict";var a=t(85893),n=t(92304),s=t(49167),r=t(49117),i=t(97959);let o=e=>{let{publication:l,isNew:t=!1,profile:o}=e;return(0,a.jsxs)(i.Z,{className:"line-clamp-8 dark:hover:bg-grey-600/50 cursor-pointer break-words border-blue-500 p-5 text-xs first:rounded-t-xl last:rounded-b-xl hover:bg-gray-100",publication:l,children:[(0,a.jsx)(s.Z,{profile:o,publication:l,quoted:!0,isNew:t}),(null==l?void 0:l.hidden)?(0,a.jsx)(r.Z,{type:l.__typename}):(0,a.jsx)(n.Z,{profile:o,publication:l,showMore:!0,quoted:!0})]})};l.Z=o},61896:function(e,l,t){"use strict";var a=t(85893),n=t(86010);let s=e=>{let{showFollow:l=!1,isBig:t=!1}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:(0,n.Z)(t?"h-14 w-14":"h-10 w-10","shimmer rounded-full")}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"shimmer h-3 w-28 rounded-lg"}),(0,a.jsx)("div",{className:"shimmer h-3 w-20 rounded-lg"}),t&&(0,a.jsx)("div",{className:"shimmer h-3 w-48 rounded-lg"})]})]}),l&&(0,a.jsx)("div",{className:"shimmer h-8 w-10 rounded-lg"})]})};l.Z=s},43797:function(e,l){"use strict";let t=e=>e&&e.match(/(((https?:\/\/)|(www\.))\S+)/g)||[];l.Z=t},51406:function(e,l,t){"use strict";var a=t(85893),n=t(59355),s=t(86010),r=t(11761);let i=e=>{let{children:l,className:t="",dataTestId:i="",zeroPadding:o=!1}=e;return(0,a.jsx)(r.Z,{className:(0,s.Z)("mt-3 cursor-auto",t,{"p-5":!o}),forceRounded:!0,dataTestId:i,onClick:n.Z,children:l})};l.Z=i},66167:function(e,l,t){"use strict";t.d(l,{B:function(){return n}});var a=t(85893);let n=e=>{let{title:l,error:t,className:n=""}=e;return t?(0,a.jsxs)("div",{className:"space-y-1 rounded-xl border-2 border-red-500/50 bg-red-50 p-4 dark:bg-red-900/10 ".concat(n),children:[l&&(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:l}),(0,a.jsx)("div",{className:"text-sm text-red-700 dark:text-red-200",children:null==t?void 0:t.message})]}):null}},54209:function(e,l,t){"use strict";t.d(l,{Z:function(){return v}});var a=t(85893),n=t(93189),s=t(6154),r=t(59355),i=t(41664),o=t.n(i),d=t(11761),c=t(45706),u=t(34625),x=t(30052);let m=e=>{let{og:l}=e;return(0,a.jsx)("div",{className:"mt-4 text-sm sm:w-5/6","data-testid":"normal-oembed-".concat(l.url),children:(0,a.jsx)(o(),{href:l.url,onClick:e=>{(0,r.Z)(e)},target:l.url.includes(location.host)?"_self":"_blank",rel:"noreferrer noopener",children:(0,a.jsxs)(d.Z,{forceRounded:!0,children:[l.isLarge&&l.thumbnail&&(0,a.jsx)(x.E,{className:"divider w-full rounded-t-xl",onError:e=>{let{currentTarget:t}=e;t.src=l.thumbnail},src:(0,c.Z)(l.thumbnail,u.y7),alt:"Thumbnail"}),(0,a.jsxs)("div",{className:"flex items-center",children:[!l.isLarge&&l.thumbnail&&(0,a.jsx)(x.E,{className:"h-34 w-34 flex rounded-l-xl border-r",height:144,width:144,onError:e=>{let{currentTarget:t}=e;t.src=l.thumbnail},src:(0,c.Z)(l.thumbnail,u.y7),alt:"Thumbnail"}),(0,a.jsx)("div",{className:"truncate p-2",children:(0,a.jsxs)("div",{className:"space-y-1.5",children:[l.title&&(0,a.jsx)("div",{className:"line-clamp-2 truncate break-words font-bold",children:l.title}),l.site&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-1.5",children:[l.favicon&&(0,a.jsx)("img",{className:"h-4 w-4 rounded-full",height:16,width:16,src:l.favicon,alt:"Favicon"}),(0,a.jsx)("div",{className:"lt-text-gray-500 text-xs",children:l.site})]})]})})]})]})})})},h=e=>{let{og:l}=e;return(0,a.jsx)("div",{className:" mt-5 flex h-full w-full rounded-l-xl text-sm","data-testid":"rich-oembed-".concat(l.url),children:(0,a.jsx)("div",{className:"oembed-player",dangerouslySetInnerHTML:{__html:l.html}})})},p=e=>{let{url:l}=e,{isLoading:t,error:r,data:i}=(0,n.a)([l],()=>(0,s.Z)({url:u.rF,params:{url:l}}).then(e=>e.data.oembed),{enabled:Boolean(l)});if(r||t||!i)return null;let o={url:l,title:null==i?void 0:i.title,description:null==i?void 0:i.description,site:null==i?void 0:i.site,favicon:"https://www.google.com/s2/favicons?domain=".concat(i.url),thumbnail:null==i?void 0:i.image,isLarge:!1,html:null==i?void 0:i.html};return o.title?o.html?(0,a.jsx)(h,{og:o}):(0,a.jsx)(m,{og:o}):null};var v=p},44762:function(e,l,t){"use strict";t.d(l,{q:function(){return c}});var a=t(85893),n=t(44080),s=t(92485),r=t(59355),i=t(41664),o=t.n(i),d=t(67294);let c=e=>{let{show:l,url:t,onClose:i}=e;return(0,a.jsx)(n.u.Root,{show:l,as:d.Fragment,children:(0,a.jsx)(s.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:i,children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.u.Child,{as:d.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(s.V.Overlay,{className:"fixed inset-0 bg-gray-500/75 transition-opacity"})}),(0,a.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,a.jsxs)(n.u.Child,{as:"div",className:"inline-block p-8 text-left align-middle transition-all sm:max-w-3xl",enter:"ease-out duration-100",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:[(0,a.jsx)("img",{className:"max-h-screen",height:1e3,width:1e3,src:null!=t?t:"",alt:null!=t?t:"",onClick:i,"aria-hidden":"true"}),t?(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(o(),{className:"text-sm text-gray-200 hover:underline",href:t,target:"_blank",rel:"noreferrer noopener",onClick:r.Z,"data-testid":"lightbox-open-original",children:"Open original"})}):null]})]})})})}},64208:function(e,l,t){"use strict";t.d(l,{u:function(){return d}});var a=t(85893),n=t(44080),s=t(92485),r=t(5362),i=t(86010),o=t(67294);let d=e=>{let{icon:l,title:t,size:d="sm",show:c,children:u,dataTestId:x="",onClose:m}=e;return(0,a.jsx)(n.u.Root,{show:c,as:o.Fragment,children:(0,a.jsx)(s.V,{as:"div",className:"fixed inset-0 z-[20] overflow-y-auto",onClose:()=>null==m?void 0:m(),"data-testid":x,children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:block sm:p-0",children:[(0,a.jsx)(n.u.Child,{as:o.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(s.V.Overlay,{className:"fixed inset-0 bg-gray-500/75 transition-opacity "})}),(0,a.jsx)("span",{className:" sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,a.jsx)(n.u.Child,{as:o.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)("div",{className:(0,i.Z)({"sm:max-w-5xl":"lg"===d},{"sm:max-w-3xl":"md"===d},{"sm:max-w-lg":"sm"===d},{"sm:max-w-sm":"xs"===d},"inline-block w-full scale-100 rounded-xl bg-blue-700/80 text-left align-bottom shadow-xl transition-all sm:my-8 sm:align-middle"),children:[t&&(0,a.jsxs)("div",{className:"divider flex items-center justify-between px-5 py-3.5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 font-bold",children:[l,(0,a.jsx)("div",{children:t})]}),m?(0,a.jsx)("button",{type:"button",className:"rounded-full p-1 text-gray-800 hover:bg-gray-200 dark:text-gray-100 dark:hover:bg-gray-500",onClick:m,children:(0,a.jsx)(r.Z,{className:"h-5 w-5"})}):null]}),u]})})]})})})}},93300:function(e,l,t){"use strict";t.d(l,{u:function(){return s}});var a=t(85893);t(85470);var n=t(52697);let s=e=>{let{children:l,content:t,placement:s="right",className:r="",withDelay:i=!1}=e;return(0,a.jsx)(n.ZP,{placement:s,duration:0,delay:[i?500:0,0],className:"hidden !rounded-lg !text-xs !leading-6 tracking-wide sm:block",content:(0,a.jsx)("span",{className:r,children:t}),children:(0,a.jsx)("span",{children:l})})}},41741:function(e,l,t){"use strict";var a,n;t.d(l,{D:function(){return a}}),(n=a||(a={})).SomethingWentWrong="Something went wrong!",n.SignWallet="Please sign in your wallet."},64911:function(e,l){"use strict";let t=(e,l)=>{let{[l]:t,...a}=e;return a},a=e=>{let{domain:l,types:a,value:n}=e;return{primaryType:Object.keys(t(a,"__typename"))[0],domain:t(l,"__typename"),types:t(a,"__typename"),message:t(n,"__typename")}};l.Z=a},45706:function(e,l,t){"use strict";var a=t(34625);let n=(e,l)=>{if(!e)return"";if(e.includes(a.vC)){let t=e.split("/"),n=t[t.length-1];return l?"".concat(a.vC,"/").concat(l,"/").concat(n):e}return e};l.Z=n},59355:function(e,l){"use strict";let t=e=>e.stopPropagation();l.Z=t},62641:function(e,l,t){"use strict";t.d(l,{l:function(){return c}});var a=t(25232),n=t(34625),s=t(6154),r=t(57632);let i="image/jpeg",o=async()=>{var e,l,t;let r=await s.Z.get(n.Kl),i=new a.S3({endpoint:n.qD,credentials:{accessKeyId:null===(e=r.data)||void 0===e?void 0:e.accessKeyId,secretAccessKey:null===(l=r.data)||void 0===l?void 0:l.secretAccessKey,sessionToken:null===(t=r.data)||void 0===t?void 0:t.sessionToken},region:"us-west-2",maxAttempts:3});return i.middlewareStack.addRelativeTo(e=>async l=>{let{response:t}=await e(l);return null===t.body&&(t.body=new Uint8Array),{response:t}},{name:"nullFetchResponseBodyMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",override:!0}),i},d=async e=>{try{let l=Array.from(e),t=await o(),a=await Promise.all(l.map(async(l,a)=>{let s=e[a],o={Bucket:n.DG.LENSTER_MEDIA,Key:(0,r.Z)()};await t.putObject({...o,Body:s,ContentType:s.type});let d=await t.headObject(o),c=d.Metadata;return{original:{url:"ipfs://".concat(null==c?void 0:c["ipfs-hash"]),mimeType:s.type||i}}}));return a}catch(s){return[]}},c=async e=>{try{let l=await d([e]),t=l[0];return{original:{url:t.original.url,mimeType:e.type||i}}}catch(a){return console.error("Failed to upload file to IPFS",a),{original:{url:"",mimeType:e.type||i}}}};l.Z=d},96806:function(e,l,t){"use strict";t.d(l,{u:function(){return n}});var a=t(73445);let n=(0,a.Ue)(e=>({showAuthModal:!1,setShowAuthModal:l=>e(()=>({showAuthModal:l})),showNewPostModal:!1,setShowNewPostModal:l=>e(()=>({showNewPostModal:l})),showReportModal:!1,reportingPublication:null,reportConfig:null,setShowReportModal:(l,t,a)=>e(()=>({showReportModal:l,reportingPublication:t,reportConfig:a})),showStatusModal:!1,setShowStatusModal:l=>e(()=>({showStatusModal:l})),showProfileSwitchModal:!1,setShowProfileSwitchModal:l=>e(()=>({showProfileSwitchModal:l})),showMobileDrawer:!1,setShowMobileDrawer:l=>e(()=>({showMobileDrawer:l}))}))},70769:function(e,l,t){"use strict";t.d(l,{p:function(){return s}});var a=t(73445),n=t(782);let s=(0,a.Ue)((0,n.XR)(e=>({userSigNonce:0,setUserSigNonce:l=>e(()=>({userSigNonce:l}))})))},48113:function(e,l,t){"use strict";t.d(l,{l:function(){return n}});var a=t(73445);let n=(0,a.Ue)(e=>({publicationContent:"",setPublicationContent:l=>e(()=>({publicationContent:l})),quotedPublication:null,setQuotedPublication:l=>e(()=>({quotedPublication:l})),audioPublication:{title:"",author:"",cover:"",coverMimeType:"image/jpeg"},setAudioPublication:l=>e(()=>({audioPublication:l})),attachments:[],setAttachments:l=>e(()=>({attachments:l})),addAttachments:l=>e(e=>({attachments:[...e.attachments,...l]})),updateAttachments:l=>e(e=>{let t=[...e.attachments];return l.map(e=>{let l=t.findIndex(l=>l.id===e.id);-1!==l&&(t[l]=e)}),{attachments:t}}),removeAttachments:l=>e(e=>{let t=[...e.attachments];return l.map(e=>{let l=t.findIndex(l=>l.id===e);-1!==l&&t.splice(l,1)}),{attachments:t}}),videoThumbnail:{url:"",type:"",uploading:!1},setVideoThumbnail:l=>e(()=>({videoThumbnail:l})),videoDurationInSeconds:"",setVideoDurationInSeconds:l=>e(()=>({videoDurationInSeconds:l})),isUploading:!1,setIsUploading:l=>e(()=>({isUploading:l})),showPollEditor:!1,setShowPollEditor:l=>e(()=>({showPollEditor:l})),pollConfig:{length:7,choices:["",""]},setPollConfig:l=>e(()=>({pollConfig:l})),resetPollConfig:()=>e(()=>({pollConfig:{length:1,choices:["",""]}})),showSpaceEditor:!1,setShowSpaceEditor:l=>e(()=>({showSpaceEditor:l}))}))},21192:function(e,l,t){"use strict";t.d(l,{Z:function(){return p}});var a=t(85893);t(44753);var n=t(54125),s=t.n(n),r=t(11163),i=t(67294),o=t(34625),d=t(35385),c=t(5996);let u=e=>{var l,t,n;let{ratio:s,permanentUrl:r,posterUrl:i,playerRef:u,options:x,showControls:m}=e;return(0,a.jsx)("div",{className:"lensshare-player",children:(0,a.jsx)(d.e,{src:r,poster:i,showTitle:!1,objectFit:"contain",aspectRatio:s,showPipButton:!0,mediaElementRef:u,loop:null===(l=x.loop)||void 0===l||l,showUploadingIndicator:!1,muted:null===(t=null==x?void 0:x.muted)||void 0===t||t,controls:{defaultVolume:1},autoPlay:null===(n=x.autoPlay)||void 0===n||n,showLoadingSpinner:x.loadingSpinner,_isCurrentlyShown:x.isCurrentlyShown,autoUrlUpload:o.M8&&{fallback:!0,ipfsGateway:c.Gs},children:m?null:(0,a.jsx)(a.Fragment,{})})})};var x=i.memo(u);let m=e=>{let{acceptWarning:l}=e;return(0,a.jsx)("div",{className:"flex h-56 w-full items-center justify-center space-x-5 rounded-xl bg-black px-10 text-lg text-white md:h-[60vh]",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"text-base",children:["The following video has sensitive content and may inappropriate or offensive to some audiences. ",(0,a.jsx)("div",{children:"Viewer discretion is advised."})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"button",className:"mt-5 rounded-xl bg-gray-800 px-5 py-2 text-sm outline-none",onClick:()=>l(),children:"I understand & wish to proceed"})})]})})},h=e=>{let{permanentUrl:l,posterUrl:t,ratio:n="16to9",isSensitiveContent:d,currentTime:c=0,refCallback:u,publicationId:h,options:p,showControls:v=!0}=e,f=(0,r.useRouter)(),b=(0,i.useRef)(),[g,j]=(0,i.useState)(d),y=e=>{var l;let t=s().utils.now();s().monitor(e,{debug:!1,data:{env_key:o.Vk,player_name:"Lensshare-player",video_id:h,video_stream_type:"on-demand",player_init_time:t,video_title:"".concat(o.Tq,"/post/").concat(null!=h?h:null===(l=f.query)||void 0===l?void 0:l.id),page_type:"bytespage",video_duration:null==e?void 0:e.duration}})},w=(0,i.useCallback)(e=>{null==u||u(e),b.current=e,b.current.currentTime=Number(c||0),o.M8&&y(b.current)},[]);(0,i.useEffect)(()=>{b.current&&(b.current.currentTime=Number(c||0))},[c]);let N=e=>{e.preventDefault()};return(0,a.jsx)("div",{className:"w-full rounded-lg",children:g?(0,a.jsx)(m,{acceptWarning:()=>j(!1)}):(0,a.jsx)("div",{onContextMenu:N,className:"lensshare-player",children:(0,a.jsx)(x,{posterUrl:t,permanentUrl:l,ratio:n,playerRef:w,options:p,showControls:v})})})};var p=i.memo(h)},20240:function(e,l,t){"use strict";var a,n;t.d(l,{T:function(){return a},V:function(){return i}});let s=["0x016efc","0x010040","0xacaf","0x01a2ee","0x019b72","0xbbb9","0x933b"],r=["0x7cca","0x01cd87","0x608f","0x9346","0x019da0","0x01cae1","0x01cbf6","0x01c989","0x3a77","0x01cc3a","0x01c8b6","0x01a7a3","0x01c7d4","0x01615e","0xbbb9","0x01c688","0x01c5b9","0xc01c","0x565f","0x011a73","0x0376","0x01c498","0x01852a","0x01c48b","0x01bff3","0x8a58","0x01bc17","0x01ab4f","0x018a1c","0x01b94b","0x01b190","0x01afc5","0x018d04","0x01ac9b","0x01aca7","0x8d68","0xadb2","0x1044","0xd6","0x01a681","0x01a2d4","0x013f83","0x9752","0x01a011","0x3015","0x2033","0x019c8b","0x0efa","0x016b0f","0x018df3","0xe922","0x018ab6","0x1087","0x018a8d","0x0126ab","0x7a85","0x12ea","0x0196de","0xb1c8","0x8ba4","0xa518","0xf2a3","0x01873a","0xc1bd","0x014c1f","0xf71a","0x018ccc","0x5805","0xf6b0","0x0132","0x013e57","0x018cf8","0x73a4","0x713e","0x010356","0x01859a","0x010323","0x010350","0xb175","0xe804","0x018cba","0x018cbd","0x018cb8","0x018ebd","0xe506","0x018d18","0x4dc9","0xf5b6","0x0187b3","0x018c69","0x7e08","0x933b","0x4b","0x02ed","0x7810","0x326c","0x06d4","0x21ac","0x011f55","0x1b49","0xe239","0x017597","0x8396","0xeca7","0x016ea6","0x016b2d","0x01067e","0xf4f5","0xeb6f","0x3093","0xee84","0x013cee","0x2e2a","0xe5cc","0x012d4e","0x8eaf","0x6871","0xee8b","0x0fa1","0xe508","0xa68c","0x016463","0x015e00","0x016b43","0xd543","0x012ba5","0xb17c","0x0ac7","0x1bdd","0x1f28","0x1d58","0x2c66","0xdd33","0xb087","0x8dbc","0xd63c","0x20ed","0x1c1b","0x3824","0x2aab","0x8623","0xb493","0xb1ff","0x0207","0x08f8","0x5881","0x2d44","0x14f5","0x7d","0xf857","0xf1b1","0xc4c2","0x7901","0x0c67","0x1c5f","0xe06b","0x250e","0xdf7a","0xdf89","0x016e","0x2a05","0x2292","0xdf88","0xcea6","0xdf85","0x0b89","0xce63","0x2e1b","0x2d0d","0x1f9e","0x8dec","0x010a","0x0749","0xce6d","0xa1e3","0x0ace","0x0ce1","0x0e01","0x0870","0x07c7","0xad5d","0xc0dc","0xb289","0xad1e","0xb400","0xb27a","0x8cb6","0xbca0","0xac","0xb17c","0x0352","0xb28e","0xb821","0x0c7e","0x25f1","0x2816","0x2c6d","0x2e09","0x1ef0","0x0f30","0x30fb","0x8d94","0x0d31","0x5b5b","0x09f1","0x2057","0x1ed2","0x0f83","0x0dcf","0x8635","0x1053","0x1c19","0x8e79","0x011d","0x8b61","0x8690","0x6417","0x1eb8","0x5138","0x3498","0x2e02","0x3479","0x2f70","0x20c6","0x2e0a","0x228d","0x266b","0x25f3","0x26e5","0x23ac","0xf5","0xcc","0x1cef","0x38","0x0210","0x0160","0x16","0x10","0x0580","0x27","0x1966","0x25b7","0x40","0x84ed","0x0636","0xe2ae","0x01c173"];(n=a||(a={})).TrendingWidget="trending-widget",n.NftGallery="nft-gallery",n.NftDetail="nft-detail",n.GatedLocales="gated-locales",n.Polls="polls",n.Spaces="spaces",n.ForYou="for-you",n.WTF2="wtf2",n.ExploreTags="explore-tags",n.POST_WITH_SOURCE_URL="POST_WITH_SOURCE_URL";let i=[{key:a.TrendingWidget,enabledFor:[...s,...r]},{key:a.NftGallery,enabledFor:[...s,...r]},{key:a.NftDetail,enabledFor:[...s,...r]},{key:a.GatedLocales,enabledFor:[...s,...r]},{key:a.Polls,enabledFor:[...s,...r]},{key:a.Spaces,enabledFor:[...s,...r]},{key:a.ForYou,enabledFor:[...s,...r]},{key:a.WTF2,enabledFor:[...s,...r]},{key:a.ExploreTags,enabledFor:[...s,...r]}]},4239:function(e,l){"use strict";let t=(e,l)=>{var t;let a=null==e?void 0:e.find(e=>e.traitType===l);return null!==(t=null==a?void 0:a.value)&&void 0!==t?t:""};l.Z=t},38624:function(e,l,t){"use strict";var a=t(34625),n=t(92359);let s=e=>{var l,t,s;let r="".concat(a.C1,"/placeholder.webp");if(!e)return r;let{cover:i,image:o}=e,d=null!==(s=null!==(t=null==i?void 0:null===(l=i.original)||void 0===l?void 0:l.url)&&void 0!==t?t:o)&&void 0!==s?s:r;return(0,n.Z)(d)};l.Z=s},72154:function(e,l,t){"use strict";var a=t(45341),n=t(20240),s=t(34625);let r=e=>{let l=JSON.parse(localStorage.getItem(a.d.LensshareStore)||JSON.stringify({state:{profileId:null}})),t=n.V.find(l=>l.key===e);return!!t&&(!s.M8||t.enabledFor.includes(l.state.profileId))};l.Z=r},69125:function(e,l,t){"use strict";t.d(l,{D:function(){return a}});let a=e=>{var l;return"".concat(e.__typename,":").concat(JSON.stringify({id:e.id,collectedBy:null===(l=e.collectedBy)||void 0===l?void 0:l.address,createdAt:e.createdAt}))}},92359:function(e,l,t){"use strict";var a=t(34625),n=t(5996);let s=e=>{let l="".concat(n.Gs,"/"),t="".concat(a.C7,"/");return e?e.replace(/^Qm[1-9A-Za-z]{44}/gm,"".concat(l,"/").concat(e)).replace("https://ipfs.io/ipfs",l).replace("https://ipfs.infura.io/ipfs",l).replace("https://lens.ipfs.infura.io/ipfs",l).replace("https://ipfs-infura.io/ipfs",l).replace("https://lens.ipfs-infura.io/ipfs",l).replace("https://lenshareapp.ipfs-infura.io/ipfs",l).replace("https://lenshareapp.ipfs-infura.io",l).replace("ipfs://",l).replace("ipfs://ipfs/",l).replace("ipfs://ipfs",l).replace("ar://",t).replace("https://lp-playback.com/hls","".concat(t,"/").concat(e)).replace("https://lp-playback.com/hls",t).replace("https://lp-playback.com","".concat(t,"/").concat(e)).replace("https://lp-playback.com",t):e};l.Z=s},54287:function(){}}]);